/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={6099:(t,e,n)=>{"use strict";n.d(e,{Z:()=>_});var r,i,o=n(655),s=n(4589),a=n(909),u=n(4594),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),h=new s.LL("app","Firebase",c),l="@firebase/app",f="[DEFAULT]",d=((i={})[l]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/app-check"]="fire-app-check",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.Yd("@firebase/app"),m=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=(0,s.p$)(t),this.container=new a.H0(e.name),this._addComponent(new a.wA("app",(function(){return r}),"PUBLIC")),this.firebase_.INTERNAL.components.forEach((function(t){return r._addComponent(t)}))}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise((function(e){t.checkDestroyed_(),e()})).then((function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map((function(t){return t.delete()})))})).then((function(){t.isDeleted_=!0}))},t.prototype._getService=function(t,e){var n;void 0===e&&(e=f),this.checkDestroyed_();var r=this.container.getProvider(t);return r.isInitialized()||"EXPLICIT"!==(null===(n=r.getComponent())||void 0===n?void 0:n.instantiationMode)||r.initialize(),r.getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw h.create("app-deleted",{appName:this.name_})},t}();m.prototype.name&&m.prototype.options||m.prototype.delete||console.log("dc");var v=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw h.create("bad-app-name",{appName:String(a)});if((0,s.r3)(e,a))throw h.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.wA(i+"-version",(function(){return{library:i,version:e}}),"VERSION"))},setLogLevel:u.Ub,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw h.create("invalid-log-argument");(0,u.Am)(t,e)},apps:null,SDK_VERSION:"8.10.0",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!(0,s.r3)(e,t))throw h.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw h.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&(0,s.ZB)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,l=Object.keys(e);c<l.length;c++){var f=l[c];e[f]._addComponent(o)}return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map((function(t){return e[t]}))}}),i.App=t,r}(m);return e.INTERNAL=(0,o.pi)((0,o.pi)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){(0,s.ZB)(e,t)},createSubscribe:s.ne,ErrorFactory:s.LL,deepExtend:s.ZB}),e}(),g=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map((function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null})).filter((function(t){return t})).join(" ")},t}();if((0,s.jU)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var y=self.firebase.SDK_VERSION;y&&y.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=v.initializeApp;v.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return(0,s.UG)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=v;!function(t,e){t.INTERNAL.registerComponent(new a.wA("platform-logger",(function(t){return new g(t)}),"PRIVATE")),t.registerVersion(l,"0.6.30",void 0),t.registerVersion("fire-js","")}(w);const _=w},909:(t,e,n)=>{"use strict";n.d(e,{wA:()=>o,H0:()=>u});var r=n(655),i=n(4589),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t.prototype.setInstanceCreatedCallback=function(t){return this.onInstanceCreated=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}return t.prototype.get=function(t){var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.BH;if(this.instancesDeferred.set(e,n),this.isInitialized(e)||this.shouldAutoInitialize())try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(t){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e,n=this.normalizeInstanceIdentifier(null==t?void 0:t.identifier),r=null!==(e=null==t?void 0:t.optional)&&void 0!==e&&e;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(t){if(r)return null;throw t}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,this.shouldAutoInitialize()){if(function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(t){}try{for(var i=(0,r.XA)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=(0,r.CR)(o.value,2),u=a[0],c=a[1],h=this.normalizeInstanceIdentifier(u);try{var l=this.getOrInitializeService({instanceIdentifier:h});c.resolve(l)}catch(t){}}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return(0,r.mG)(this,void 0,void 0,(function(){var t;return(0,r.Jh)(this,(function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all((0,r.ev)((0,r.ev)([],(0,r.CR)(t.filter((function(t){return"INTERNAL"in t})).map((function(t){return t.INTERNAL.delete()})))),(0,r.CR)(t.filter((function(t){return"_delete"in t})).map((function(t){return t._delete()})))))];case 1:return e.sent(),[2]}}))}))},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.getOptions=function(t){return void 0===t&&(t=s),this.instancesOptions.get(t)||{}},t.prototype.initialize=function(t){var e,n;void 0===t&&(t={});var i=t.options,o=void 0===i?{}:i,s=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(s))throw Error(this.name+"("+s+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:s,options:o});try{for(var u=(0,r.XA)(this.instancesDeferred.entries()),c=u.next();!c.done;c=u.next()){var h=(0,r.CR)(c.value,2),l=h[0],f=h[1];s===this.normalizeInstanceIdentifier(l)&&f.resolve(a)}}catch(t){e={error:t}}finally{try{c&&!c.done&&(n=u.return)&&n.call(u)}finally{if(e)throw e.error}}return a},t.prototype.onInit=function(t,e){var n,r=this.normalizeInstanceIdentifier(e),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(t),this.onInitCallbacks.set(r,i);var o=this.instances.get(r);return o&&t(o,r),function(){i.delete(t)}},t.prototype.invokeOnInitCallbacks=function(t,e){var n,i,o=this.onInitCallbacks.get(e);if(o)try{for(var s=(0,r.XA)(o),a=s.next();!a.done;a=s.next()){var u=a.value;try{u(t,e)}catch(t){}}}catch(t){n={error:t}}finally{try{a&&!a.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o),this.instancesOptions.set(n,i),this.invokeOnInitCallbacks(o,n),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,n,o)}catch(t){}return o||null},t.prototype.normalizeInstanceIdentifier=function(t){return void 0===t&&(t=s),this.component?this.component.multipleInstances?t:s:t},t.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},4594:(t,e,n)=>{"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,{in:()=>o,Yd:()=>l,Ub:()=>f,Am:()=>d});var o,s=[];!function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"}(o||(o={}));var a={debug:o.DEBUG,verbose:o.VERBOSE,info:o.INFO,warn:o.WARN,error:o.ERROR,silent:o.SILENT},u=o.INFO,c=((i={})[o.DEBUG]="log",i[o.VERBOSE]="log",i[o.INFO]="info",i[o.WARN]="warn",i[o.ERROR]="error",i),h=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},l=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=h,this._userLogHandler=null,s.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in o))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.DEBUG],t)),this._logHandler.apply(this,r([this,o.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.VERBOSE],t)),this._logHandler.apply(this,r([this,o.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.INFO],t)),this._logHandler.apply(this,r([this,o.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.WARN],t)),this._logHandler.apply(this,r([this,o.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,o.ERROR],t)),this._logHandler.apply(this,r([this,o.ERROR],t))},t}();function f(t){s.forEach((function(e){e.setLogLevel(t)}))}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],s=2;s<arguments.length;s++)i[s-2]=arguments[s];var a=i.map((function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(t){return null}})).filter((function(t){return t})).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:o[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=s;r<i.length;r++)n(i[r])}},4589:(t,e,n)=>{"use strict";n.d(e,{BH:()=>c,LL:()=>I,ZR:()=>_,r3:()=>S,Sg:()=>h,ne:()=>A,p$:()=>a,ZB:()=>u,m9:()=>N,z$:()=>l,jU:()=>p,ru:()=>m,d:()=>g,w1:()=>y,uI:()=>f,UG:()=>d,b$:()=>v,G6:()=>w,Mn:()=>b});var r=n(655),i=function(t){for(var e=[],n=0,r=0;r<t.length;r++){var i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=63&i|128):55296==(64512&i)&&r+1<t.length&&56320==(64512&t.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&t.charCodeAt(++r)),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=63&i|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=63&i|128)}return e},o={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[],i=0;i<t.length;i+=3){var o=t[i],s=i+1<t.length,a=s?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,h=o>>2,l=(3&o)<<4|a>>4,f=(15&a)<<2|c>>6,d=63&c;u||(d=64,s||(f=64)),r.push(n[h],n[l],n[f],n[d])}return r.join("")},encodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(i(t),e)},decodeString:function(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):function(t){for(var e=[],n=0,r=0;n<t.length;){var i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){var o=t[n++];e[r++]=String.fromCharCode((31&i)<<6|63&o)}else if(i>239&&i<365){var s=((7&i)<<18|(63&(o=t[n++]))<<12|(63&(a=t[n++]))<<6|63&t[n++])-65536;e[r++]=String.fromCharCode(55296+(s>>10)),e[r++]=String.fromCharCode(56320+(1023&s))}else{o=t[n++];var a=t[n++];e[r++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&a)}}return e.join("")}(this.decodeStringToByteArray(t,e))},decodeStringToByteArray:function(t,e){this.init_();for(var n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[],i=0;i<t.length;){var o=n[t.charAt(i++)],s=i<t.length?n[t.charAt(i)]:0,a=++i<t.length?n[t.charAt(i)]:64,u=++i<t.length?n[t.charAt(i)]:64;if(++i,null==o||null==s||null==a||null==u)throw Error();var c=o<<2|s>>4;if(r.push(c),64!==a){var h=s<<4&240|a>>2;if(r.push(h),64!==u){var l=a<<6&192|u;r.push(l)}}}return r},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}},s=function(t){return function(t){var e=i(t);return o.encodeByteArray(e,!0)}(t).replace(/\./g,"")};function a(t){return u(void 0,t)}function u(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=u(t[n],e[n]));return t}var c=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch((function(){})),1===t.length?t(n):t(n,r))}},t}();function h(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');var n=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");var a=(0,r.pi)({iss:"https://securetoken.google.com/"+n,aud:n,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t);return[s(JSON.stringify({alg:"none",type:"JWT"})),s(JSON.stringify(a)),""].join(".")}function l(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function f(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(l())}function d(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function p(){return"object"==typeof self&&self.self===self}function m(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function v(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function g(){return l().indexOf("Electron/")>=0}function y(){var t=l();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function b(){return l().indexOf("MSAppHost/")>=0}function w(){return!d()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}var _=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,I.prototype.create),o}return(0,r.ZT)(e,t),e}(Error),I=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?T(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new _(i,a,r);return u},t}();function T(t,e){return t.replace(E,(function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"}))}var E=/\{\$([^}]+)}/g;function S(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function A(t,e){var n=new k(t,e);return n.subscribe.bind(n)}!function(){function t(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(var t=1;t<this.blockSize;++t)this.pad_[t]=0;this.reset()}t.prototype.reset=function(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0},t.prototype.compress_=function(t,e){e||(e=0);var n=this.W_;if("string"==typeof t)for(var r=0;r<16;r++)n[r]=t.charCodeAt(e)<<24|t.charCodeAt(e+1)<<16|t.charCodeAt(e+2)<<8|t.charCodeAt(e+3),e+=4;else for(r=0;r<16;r++)n[r]=t[e]<<24|t[e+1]<<16|t[e+2]<<8|t[e+3],e+=4;for(r=16;r<80;r++){var i=n[r-3]^n[r-8]^n[r-14]^n[r-16];n[r]=4294967295&(i<<1|i>>>31)}var o,s,a=this.chain_[0],u=this.chain_[1],c=this.chain_[2],h=this.chain_[3],l=this.chain_[4];for(r=0;r<80;r++)r<40?r<20?(o=h^u&(c^h),s=1518500249):(o=u^c^h,s=1859775393):r<60?(o=u&c|h&(u|c),s=2400959708):(o=u^c^h,s=3395469782),i=(a<<5|a>>>27)+o+l+s+n[r]&4294967295,l=h,h=c,c=4294967295&(u<<30|u>>>2),u=a,a=i;this.chain_[0]=this.chain_[0]+a&4294967295,this.chain_[1]=this.chain_[1]+u&4294967295,this.chain_[2]=this.chain_[2]+c&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+l&4294967295},t.prototype.update=function(t,e){if(null!=t){void 0===e&&(e=t.length);for(var n=e-this.blockSize,r=0,i=this.buf_,o=this.inbuf_;r<e;){if(0===o)for(;r<=n;)this.compress_(t,r),r+=this.blockSize;if("string"==typeof t){for(;r<e;)if(i[o]=t.charCodeAt(r),++r,++o===this.blockSize){this.compress_(i),o=0;break}}else for(;r<e;)if(i[o]=t[r],++r,++o===this.blockSize){this.compress_(i),o=0;break}}this.inbuf_=o,this.total_+=e}},t.prototype.digest=function(){var t=[],e=8*this.total_;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(var n=this.blockSize-1;n>=56;n--)this.buf_[n]=255&e,e/=256;this.compress_(this.buf_);var r=0;for(n=0;n<5;n++)for(var i=24;i>=0;i-=8)t[r]=this.chain_[n]>>i&255,++r;return t}}();var k=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then((function(){t(n)})).catch((function(t){n.error(t)}))}return t.prototype.next=function(t){this.forEachObserver((function(e){e.next(t)}))},t.prototype.error=function(t){this.forEachObserver((function(e){e.error(t)})),this.close(t)},t.prototype.complete=function(){this.forEachObserver((function(t){t.complete()})),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=C),void 0===r.error&&(r.error=C),void 0===r.complete&&(r.complete=C);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then((function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}})),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then((function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(t){"undefined"!=typeof console&&console.error&&console.error(t)}}))},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then((function(){e.observers=void 0,e.onNoObservers=void 0})))},t}();function C(){}function N(t){return t&&t._delegate?t._delegate:t}},9669:(t,e,n)=>{t.exports=n(1609)},7970:(t,e,n)=>{"use strict";var r=n(4867),i=n(6026),o=n(4097),s=n(5327),a=n(8605),u=n(7211),c=n(938).http,h=n(938).https,l=n(8835),f=n(8761),d=n(8593),p=n(5061),m=n(481),v=/https:?/;function g(t,e,n){if(t.hostname=e.host,t.host=e.host,t.port=e.port,t.path=n,e.auth){var r=Buffer.from(e.auth.username+":"+e.auth.password,"utf8").toString("base64");t.headers["Proxy-Authorization"]="Basic "+r}t.beforeRedirect=function(t){t.headers.host=t.host,g(t,e,t.href)}}t.exports=function(t){return new Promise((function(e,n){var y=function(t){e(t)},b=function(t){n(t)},w=t.data,_=t.headers;if("User-Agent"in _||"user-agent"in _?_["User-Agent"]||_["user-agent"]||(delete _["User-Agent"],delete _["user-agent"]):_["User-Agent"]="axios/"+d.version,w&&!r.isStream(w)){if(Buffer.isBuffer(w));else if(r.isArrayBuffer(w))w=Buffer.from(new Uint8Array(w));else{if(!r.isString(w))return b(p("Data after transformation must be a string, an ArrayBuffer, a Buffer, or a Stream",t));w=Buffer.from(w,"utf-8")}_["Content-Length"]=w.length}var I=void 0;t.auth&&(I=(t.auth.username||"")+":"+(t.auth.password||""));var T=o(t.baseURL,t.url),E=l.parse(T),S=E.protocol||"http:";if(!I&&E.auth){var A=E.auth.split(":");I=(A[0]||"")+":"+(A[1]||"")}I&&delete _.Authorization;var k=v.test(S),C=k?t.httpsAgent:t.httpAgent,N={path:s(E.path,t.params,t.paramsSerializer).replace(/^\?/,""),method:t.method.toUpperCase(),headers:_,agent:C,agents:{http:t.httpAgent,https:t.httpsAgent},auth:I};t.socketPath?N.socketPath=t.socketPath:(N.hostname=E.hostname,N.port=E.port);var R,O=t.proxy;if(!O&&!1!==O){var D=S.slice(0,-1)+"_proxy",x=process.env[D]||process.env[D.toUpperCase()];if(x){var P=l.parse(x),L=process.env.no_proxy||process.env.NO_PROXY,M=!0;if(L&&(M=!L.split(",").map((function(t){return t.trim()})).some((function(t){return!!t&&("*"===t||"."===t[0]&&E.hostname.substr(E.hostname.length-t.length)===t||E.hostname===t)}))),M&&(O={host:P.hostname,port:P.port,protocol:P.protocol},P.auth)){var j=P.auth.split(":");O.auth={username:j[0],password:j[1]}}}}O&&(N.headers.host=E.hostname+(E.port?":"+E.port:""),g(N,O,S+"//"+E.hostname+(E.port?":"+E.port:"")+N.path));var U=k&&(!O||v.test(O.protocol));t.transport?R=t.transport:0===t.maxRedirects?R=U?u:a:(t.maxRedirects&&(N.maxRedirects=t.maxRedirects),R=U?h:c),t.maxBodyLength>-1&&(N.maxBodyLength=t.maxBodyLength);var F=R.request(N,(function(e){if(!F.aborted){var n=e,o=e.req||F;if(204!==e.statusCode&&"HEAD"!==o.method&&!1!==t.decompress)switch(e.headers["content-encoding"]){case"gzip":case"compress":case"deflate":n=n.pipe(f.createUnzip()),delete e.headers["content-encoding"]}var s={status:e.statusCode,statusText:e.statusMessage,headers:e.headers,config:t,request:o};if("stream"===t.responseType)s.data=n,i(y,b,s);else{var a=[],u=0;n.on("data",(function(e){a.push(e),u+=e.length,t.maxContentLength>-1&&u>t.maxContentLength&&(n.destroy(),b(p("maxContentLength size of "+t.maxContentLength+" exceeded",t,null,o)))})),n.on("error",(function(e){F.aborted||b(m(e,t,null,o))})),n.on("end",(function(){var e=Buffer.concat(a);"arraybuffer"!==t.responseType&&(e=e.toString(t.responseEncoding),t.responseEncoding&&"utf8"!==t.responseEncoding||(e=r.stripBOM(e))),s.data=e,i(y,b,s)}))}}}));if(F.on("error",(function(e){F.aborted&&"ERR_FR_TOO_MANY_REDIRECTS"!==e.code||b(m(e,t,null,F))})),t.timeout){var q=parseInt(t.timeout,10);if(isNaN(q))return void b(p("error trying to parse `config.timeout` to int",t,"ERR_PARSE_TIMEOUT",F));F.setTimeout(q,(function(){F.abort(),b(p("timeout of "+q+"ms exceeded",t,t.transitional&&t.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",F))}))}t.cancelToken&&t.cancelToken.promise.then((function(t){F.aborted||(F.abort(),b(t))})),r.isStream(w)?w.on("error",(function(e){b(m(e,t,null,F))})).pipe(F):F.end(w)}))}},5448:(t,e,n)=>{"use strict";var r=n(4867),i=n(6026),o=n(4372),s=n(5327),a=n(4097),u=n(6373),c=n(7985),h=n(5061);t.exports=function(t){return new Promise((function(e,n){var l=t.data,f=t.headers,d=t.responseType;r.isFormData(l)&&delete f["Content-Type"];var p=new XMLHttpRequest;if(t.auth){var m=t.auth.username||"",v=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";f.Authorization="Basic "+btoa(m+":"+v)}var g=a(t.baseURL,t.url);function y(){if(p){var r="getAllResponseHeaders"in p?u(p.getAllResponseHeaders()):null,o={data:d&&"text"!==d&&"json"!==d?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:r,config:t,request:p};i(e,n,o),p=null}}if(p.open(t.method.toUpperCase(),s(g,t.params,t.paramsSerializer),!0),p.timeout=t.timeout,"onloadend"in p?p.onloadend=y:p.onreadystatechange=function(){p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))&&setTimeout(y)},p.onabort=function(){p&&(n(h("Request aborted",t,"ECONNABORTED",p)),p=null)},p.onerror=function(){n(h("Network Error",t,null,p)),p=null},p.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(h(e,t,t.transitional&&t.transitional.clarifyTimeoutError?"ETIMEDOUT":"ECONNABORTED",p)),p=null},r.isStandardBrowserEnv()){var b=(t.withCredentials||c(g))&&t.xsrfCookieName?o.read(t.xsrfCookieName):void 0;b&&(f[t.xsrfHeaderName]=b)}"setRequestHeader"in p&&r.forEach(f,(function(t,e){void 0===l&&"content-type"===e.toLowerCase()?delete f[e]:p.setRequestHeader(e,t)})),r.isUndefined(t.withCredentials)||(p.withCredentials=!!t.withCredentials),d&&"json"!==d&&(p.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&p.addEventListener("progress",t.onDownloadProgress),"function"==typeof t.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then((function(t){p&&(p.abort(),n(t),p=null)})),l||(l=null),p.send(l)}))}},1609:(t,e,n)=>{"use strict";var r=n(4867),i=n(1849),o=n(321),s=n(7185);function a(t){var e=new o(t),n=i(o.prototype.request,e);return r.extend(n,o.prototype,e),r.extend(n,e),n}var u=a(n(5655));u.Axios=o,u.create=function(t){return a(s(u.defaults,t))},u.Cancel=n(5263),u.CancelToken=n(4972),u.isCancel=n(6502),u.all=function(t){return Promise.all(t)},u.spread=n(8713),u.isAxiosError=n(6268),t.exports=u,t.exports.default=u},5263:t=>{"use strict";function e(t){this.message=t}e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,t.exports=e},4972:(t,e,n)=>{"use strict";var r=n(5263);function i(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise((function(t){e=t}));var n=this;t((function(t){n.reason||(n.reason=new r(t),e(n.reason))}))}i.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},i.source=function(){var t;return{token:new i((function(e){t=e})),cancel:t}},t.exports=i},6502:t=>{"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},321:(t,e,n)=>{"use strict";var r=n(4867),i=n(5327),o=n(782),s=n(1956),a=n(7185),u=n(4875),c=u.validators;function h(t){this.defaults=t,this.interceptors={request:new o,response:new o}}h.prototype.request=function(t){"string"==typeof t?(t=arguments[1]||{}).url=arguments[0]:t=t||{},(t=a(this.defaults,t)).method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=t.transitional;void 0!==e&&u.assertOptions(e,{silentJSONParsing:c.transitional(c.boolean,"1.0.0"),forcedJSONParsing:c.transitional(c.boolean,"1.0.0"),clarifyTimeoutError:c.transitional(c.boolean,"1.0.0")},!1);var n=[],r=!0;this.interceptors.request.forEach((function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(r=r&&e.synchronous,n.unshift(e.fulfilled,e.rejected))}));var i,o=[];if(this.interceptors.response.forEach((function(t){o.push(t.fulfilled,t.rejected)})),!r){var h=[s,void 0];for(Array.prototype.unshift.apply(h,n),h=h.concat(o),i=Promise.resolve(t);h.length;)i=i.then(h.shift(),h.shift());return i}for(var l=t;n.length;){var f=n.shift(),d=n.shift();try{l=f(l)}catch(t){d(t);break}}try{i=s(l)}catch(t){return Promise.reject(t)}for(;o.length;)i=i.then(o.shift(),o.shift());return i},h.prototype.getUri=function(t){return t=a(this.defaults,t),i(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},r.forEach(["delete","get","head","options"],(function(t){h.prototype[t]=function(e,n){return this.request(a(n||{},{method:t,url:e,data:(n||{}).data}))}})),r.forEach(["post","put","patch"],(function(t){h.prototype[t]=function(e,n,r){return this.request(a(r||{},{method:t,url:e,data:n}))}})),t.exports=h},782:(t,e,n)=>{"use strict";var r=n(4867);function i(){this.handlers=[]}i.prototype.use=function(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1},i.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},i.prototype.forEach=function(t){r.forEach(this.handlers,(function(e){null!==e&&t(e)}))},t.exports=i},4097:(t,e,n)=>{"use strict";var r=n(1793),i=n(7303);t.exports=function(t,e){return t&&!r(e)?i(t,e):e}},5061:(t,e,n)=>{"use strict";var r=n(481);t.exports=function(t,e,n,i,o){var s=new Error(t);return r(s,e,n,i,o)}},1956:(t,e,n)=>{"use strict";var r=n(4867),i=n(8527),o=n(6502),s=n(5655);function a(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){return a(t),t.headers=t.headers||{},t.data=i.call(t,t.data,t.headers,t.transformRequest),t.headers=r.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),r.forEach(["delete","get","head","post","put","patch","common"],(function(e){delete t.headers[e]})),(t.adapter||s.adapter)(t).then((function(e){return a(t),e.data=i.call(t,e.data,e.headers,t.transformResponse),e}),(function(e){return o(e)||(a(t),e&&e.response&&(e.response.data=i.call(t,e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)}))}},481:t=>{"use strict";t.exports=function(t,e,n,r,i){return t.config=e,n&&(t.code=n),t.request=r,t.response=i,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},7185:(t,e,n)=>{"use strict";var r=n(4867);t.exports=function(t,e){e=e||{};var n={},i=["url","method","data"],o=["headers","auth","proxy","params"],s=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],a=["validateStatus"];function u(t,e){return r.isPlainObject(t)&&r.isPlainObject(e)?r.merge(t,e):r.isPlainObject(e)?r.merge({},e):r.isArray(e)?e.slice():e}function c(i){r.isUndefined(e[i])?r.isUndefined(t[i])||(n[i]=u(void 0,t[i])):n[i]=u(t[i],e[i])}r.forEach(i,(function(t){r.isUndefined(e[t])||(n[t]=u(void 0,e[t]))})),r.forEach(o,c),r.forEach(s,(function(i){r.isUndefined(e[i])?r.isUndefined(t[i])||(n[i]=u(void 0,t[i])):n[i]=u(void 0,e[i])})),r.forEach(a,(function(r){r in e?n[r]=u(t[r],e[r]):r in t&&(n[r]=u(void 0,t[r]))}));var h=i.concat(o).concat(s).concat(a),l=Object.keys(t).concat(Object.keys(e)).filter((function(t){return-1===h.indexOf(t)}));return r.forEach(l,c),n}},6026:(t,e,n)=>{"use strict";var r=n(5061);t.exports=function(t,e,n){var i=n.config.validateStatus;n.status&&i&&!i(n.status)?e(r("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},8527:(t,e,n)=>{"use strict";var r=n(4867),i=n(5655);t.exports=function(t,e,n){var o=this||i;return r.forEach(n,(function(n){t=n.call(o,t,e)})),t}},5655:(t,e,n)=>{"use strict";var r=n(4867),i=n(6016),o=n(481),s={"Content-Type":"application/x-www-form-urlencoded"};function a(t,e){!r.isUndefined(t)&&r.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}var u,c={transitional:{silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},adapter:("undefined"!=typeof XMLHttpRequest?u=n(5448):"undefined"!=typeof process&&"[object process]"===Object.prototype.toString.call(process)&&(u=n(7970)),u),transformRequest:[function(t,e){return i(e,"Accept"),i(e,"Content-Type"),r.isFormData(t)||r.isArrayBuffer(t)||r.isBuffer(t)||r.isStream(t)||r.isFile(t)||r.isBlob(t)?t:r.isArrayBufferView(t)?t.buffer:r.isURLSearchParams(t)?(a(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):r.isObject(t)||e&&"application/json"===e["Content-Type"]?(a(e,"application/json"),function(t,e,n){if(r.isString(t))try{return(0,JSON.parse)(t),r.trim(t)}catch(t){if("SyntaxError"!==t.name)throw t}return(0,JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){var e=this.transitional,n=e&&e.silentJSONParsing,i=e&&e.forcedJSONParsing,s=!n&&"json"===this.responseType;if(s||i&&r.isString(t)&&t.length)try{return JSON.parse(t)}catch(t){if(s){if("SyntaxError"===t.name)throw o(t,this,"E_JSON_PARSE");throw t}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};r.forEach(["delete","get","head"],(function(t){c.headers[t]={}})),r.forEach(["post","put","patch"],(function(t){c.headers[t]=r.merge(s)})),t.exports=c},1849:t=>{"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),r=0;r<n.length;r++)n[r]=arguments[r];return t.apply(e,n)}}},5327:(t,e,n)=>{"use strict";var r=n(4867);function i(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var o;if(n)o=n(e);else if(r.isURLSearchParams(e))o=e.toString();else{var s=[];r.forEach(e,(function(t,e){null!=t&&(r.isArray(t)?e+="[]":t=[t],r.forEach(t,(function(t){r.isDate(t)?t=t.toISOString():r.isObject(t)&&(t=JSON.stringify(t)),s.push(i(e)+"="+i(t))})))})),o=s.join("&")}if(o){var a=t.indexOf("#");-1!==a&&(t=t.slice(0,a)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}},7303:t=>{"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},4372:(t,e,n)=>{"use strict";var r=n(4867);t.exports=r.isStandardBrowserEnv()?{write:function(t,e,n,i,o,s){var a=[];a.push(t+"="+encodeURIComponent(e)),r.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),r.isString(i)&&a.push("path="+i),r.isString(o)&&a.push("domain="+o),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},1793:t=>{"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},6268:t=>{"use strict";t.exports=function(t){return"object"==typeof t&&!0===t.isAxiosError}},7985:(t,e,n)=>{"use strict";var r=n(4867);t.exports=r.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function i(t){var r=t;return e&&(n.setAttribute("href",r),r=n.href),n.setAttribute("href",r),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=i(window.location.href),function(e){var n=r.isString(e)?i(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return!0}},6016:(t,e,n)=>{"use strict";var r=n(4867);t.exports=function(t,e){r.forEach(t,(function(n,r){r!==e&&r.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[r])}))}},6373:(t,e,n)=>{"use strict";var r=n(4867),i=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,o,s={};return t?(r.forEach(t.split("\n"),(function(t){if(o=t.indexOf(":"),e=r.trim(t.substr(0,o)).toLowerCase(),n=r.trim(t.substr(o+1)),e){if(s[e]&&i.indexOf(e)>=0)return;s[e]="set-cookie"===e?(s[e]?s[e]:[]).concat([n]):s[e]?s[e]+", "+n:n}})),s):s}},8713:t=>{"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},4875:(t,e,n)=>{"use strict";var r=n(8593),i={};["object","boolean","number","function","string","symbol"].forEach((function(t,e){i[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}}));var o={},s=r.version.split(".");function a(t,e){for(var n=e?e.split("."):s,r=t.split("."),i=0;i<3;i++){if(n[i]>r[i])return!0;if(n[i]<r[i])return!1}return!1}i.transitional=function(t,e,n){var i=e&&a(e);function s(t,e){return"[Axios v"+r.version+"] Transitional option '"+t+"'"+e+(n?". "+n:"")}return function(n,r,a){if(!1===t)throw new Error(s(r," has been removed in "+e));return i&&!o[r]&&(o[r]=!0,console.warn(s(r," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,r,a)}},t.exports={isOlderVersion:a,assertOptions:function(t,e,n){if("object"!=typeof t)throw new TypeError("options must be an object");for(var r=Object.keys(t),i=r.length;i-- >0;){var o=r[i],s=e[o];if(s){var a=t[o],u=void 0===a||s(a,o,t);if(!0!==u)throw new TypeError("option "+o+" must be "+u)}else if(!0!==n)throw Error("Unknown option "+o)}},validators:i}},4867:(t,e,n)=>{"use strict";var r=n(1849),i=Object.prototype.toString;function o(t){return"[object Array]"===i.call(t)}function s(t){return void 0===t}function a(t){return null!==t&&"object"==typeof t}function u(t){if("[object Object]"!==i.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function c(t){return"[object Function]"===i.call(t)}function h(t,e){if(null!=t)if("object"!=typeof t&&(t=[t]),o(t))for(var n=0,r=t.length;n<r;n++)e.call(null,t[n],n,t);else for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.call(null,t[i],i,t)}t.exports={isArray:o,isArrayBuffer:function(t){return"[object ArrayBuffer]"===i.call(t)},isBuffer:function(t){return null!==t&&!s(t)&&null!==t.constructor&&!s(t.constructor)&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)},isFormData:function(t){return"undefined"!=typeof FormData&&t instanceof FormData},isArrayBufferView:function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer},isString:function(t){return"string"==typeof t},isNumber:function(t){return"number"==typeof t},isObject:a,isPlainObject:u,isUndefined:s,isDate:function(t){return"[object Date]"===i.call(t)},isFile:function(t){return"[object File]"===i.call(t)},isBlob:function(t){return"[object Blob]"===i.call(t)},isFunction:c,isStream:function(t){return a(t)&&c(t.pipe)},isURLSearchParams:function(t){return"undefined"!=typeof URLSearchParams&&t instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&"undefined"!=typeof window&&"undefined"!=typeof document},forEach:h,merge:function t(){var e={};function n(n,r){u(e[r])&&u(n)?e[r]=t(e[r],n):u(n)?e[r]=t({},n):o(n)?e[r]=n.slice():e[r]=n}for(var r=0,i=arguments.length;r<i;r++)h(arguments[r],n);return e},extend:function(t,e,n){return h(e,(function(e,i){t[i]=n&&"function"==typeof e?r(e,n):e})),t},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},stripBOM:function(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}}},1227:(t,e,n)=>{function r(){var t;try{t=e.storage.debug}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t}(e=t.exports=n(1658)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},e.formatArgs=function(t){var n=this.useColors;if(t[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+t[0]+(n?"%c ":" ")+"+"+e.humanize(this.diff),n){var r="color: "+this.color;t.splice(1,0,r,"color: inherit");var i=0,o=0;t[0].replace(/%[a-zA-Z%]/g,(function(t){"%%"!==t&&(i++,"%c"===t&&(o=i))})),t.splice(o,0,r)}},e.save=function(t){try{null==t?e.storage.removeItem("debug"):e.storage.debug=t}catch(t){}},e.load=r,e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type)||("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(t){}}(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],e.formatters.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}},e.enable(r())},1658:(t,e,n)=>{var r;function i(t){function n(){if(n.enabled){var t=n,i=+new Date,o=i-(r||i);t.diff=o,t.prev=r,t.curr=i,r=i;for(var s=new Array(arguments.length),a=0;a<s.length;a++)s[a]=arguments[a];s[0]=e.coerce(s[0]),"string"!=typeof s[0]&&s.unshift("%O");var u=0;s[0]=s[0].replace(/%([a-zA-Z%])/g,(function(n,r){if("%%"===n)return n;u++;var i=e.formatters[r];if("function"==typeof i){var o=s[u];n=i.call(t,o),s.splice(u,1),u--}return n})),e.formatArgs.call(t,s);var c=n.log||e.log||console.log.bind(console);c.apply(t,s)}}return n.namespace=t,n.enabled=e.enabled(t),n.useColors=e.useColors(),n.color=function(t){var n,r=0;for(n in t)r=(r<<5)-r+t.charCodeAt(n),r|=0;return e.colors[Math.abs(r)%e.colors.length]}(t),"function"==typeof e.init&&e.init(n),n}(e=t.exports=i.debug=i.default=i).coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){e.enable("")},e.enable=function(t){e.save(t),e.names=[],e.skips=[];for(var n=("string"==typeof t?t:"").split(/[\s,]+/),r=n.length,i=0;i<r;i++)n[i]&&("-"===(t=n[i].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.substr(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){var n,r;for(n=0,r=e.skips.length;n<r;n++)if(e.skips[n].test(t))return!1;for(n=0,r=e.names.length;n<r;n++)if(e.names[n].test(t))return!0;return!1},e.humanize=n(7824),e.names=[],e.skips=[],e.formatters={}},5158:(t,e,n)=>{"undefined"!=typeof process&&"renderer"===process.type?t.exports=n(1227):t.exports=n(39)},39:(t,e,n)=>{var r=n(3867),i=n(1669);(e=t.exports=n(1658)).init=function(t){t.inspectOpts={};for(var n=Object.keys(e.inspectOpts),r=0;r<n.length;r++)t.inspectOpts[n[r]]=e.inspectOpts[n[r]]},e.log=function(){return s.write(i.format.apply(i,arguments)+"\n")},e.formatArgs=function(t){var n=this.namespace;if(this.useColors){var r=this.color,i="  [3"+r+";1m"+n+" [0m";t[0]=i+t[0].split("\n").join("\n"+i),t.push("[3"+r+"m+"+e.humanize(this.diff)+"[0m")}else t[0]=(new Date).toUTCString()+" "+n+" "+t[0]},e.save=function(t){null==t?delete process.env.DEBUG:process.env.DEBUG=t},e.load=a,e.useColors=function(){return"colors"in e.inspectOpts?Boolean(e.inspectOpts.colors):r.isatty(o)},e.colors=[6,2,3,4,5,1],e.inspectOpts=Object.keys(process.env).filter((function(t){return/^debug_/i.test(t)})).reduce((function(t,e){var n=e.substring(6).toLowerCase().replace(/_([a-z])/g,(function(t,e){return e.toUpperCase()})),r=process.env[e];return r=!!/^(yes|on|true|enabled)$/i.test(r)||!/^(no|off|false|disabled)$/i.test(r)&&("null"===r?null:Number(r)),t[n]=r,t}),{});var o=parseInt(process.env.DEBUG_FD,10)||2;1!==o&&2!==o&&i.deprecate((function(){}),"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var s=1===o?process.stdout:2===o?process.stderr:function(t){var e;switch(process.binding("tty_wrap").guessHandleType(t)){case"TTY":(e=new r.WriteStream(t))._type="tty",e._handle&&e._handle.unref&&e._handle.unref();break;case"FILE":(e=new(n(5747).SyncWriteStream)(t,{autoClose:!1}))._type="fs";break;case"PIPE":case"TCP":(e=new(n(1631).Socket)({fd:t,readable:!1,writable:!0})).readable=!1,e.read=null,e._type="pipe",e._handle&&e._handle.unref&&e._handle.unref();break;default:throw new Error("Implement me. Unknown stream file type!")}return e.fd=t,e._isStdio=!0,e}(o);function a(){return process.env.DEBUG}e.formatters.o=function(t){return this.inspectOpts.colors=this.useColors,i.inspect(t,this.inspectOpts).split("\n").map((function(t){return t.trim()})).join(" ")},e.formatters.O=function(t){return this.inspectOpts.colors=this.useColors,i.inspect(t,this.inspectOpts)},e.enable(a())},5503:(t,e,n)=>{"use strict";n.r(e),n.d(e,{default:()=>r.Z});var r=n(6099),i="8.10.0";r.Z.registerVersion("firebase",i,"app"),r.Z.SDK_VERSION=i},7397:(t,e,n)=>{"use strict";n.r(e);var r=n(6099);(function(){var t,e="function"==typeof Object.defineProperties?Object.defineProperty:function(t,e,n){t!=Array.prototype&&t!=Object.prototype&&(t[e]=n.value)},n=function(t){t=["object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global,t];for(var e=0;e<t.length;++e){var n=t[e];if(n&&n.Math==Math)return n}return globalThis}(this);function i(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}}function o(t){var e="undefined"!=typeof Symbol&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):{next:i(t)}}!function(t,r){if(r){var i=n;t=t.split(".");for(var o=0;o<t.length-1;o++){var s=t[o];s in i||(i[s]={}),i=i[s]}(r=r(o=i[t=t[t.length-1]]))!=o&&null!=r&&e(i,t,{configurable:!0,writable:!0,value:r})}}("Promise",(function(t){function e(t){this.b=0,this.c=void 0,this.a=[];var e=this.f();try{t(e.resolve,e.reject)}catch(t){e.reject(t)}}function r(){this.a=null}function i(t){return t instanceof e?t:new e((function(e){e(t)}))}if(t)return t;r.prototype.b=function(t){if(null==this.a){this.a=[];var e=this;this.c((function(){e.g()}))}this.a.push(t)};var s=n.setTimeout;r.prototype.c=function(t){s(t,0)},r.prototype.g=function(){for(;this.a&&this.a.length;){var t=this.a;this.a=[];for(var e=0;e<t.length;++e){var n=t[e];t[e]=null;try{n()}catch(t){this.f(t)}}}this.a=null},r.prototype.f=function(t){this.c((function(){throw t}))},e.prototype.f=function(){function t(t){return function(r){n||(n=!0,t.call(e,r))}}var e=this,n=!1;return{resolve:t(this.m),reject:t(this.g)}},e.prototype.m=function(t){if(t===this)this.g(new TypeError("A Promise cannot resolve to itself"));else if(t instanceof e)this.s(t);else{t:switch(typeof t){case"object":var n=null!=t;break t;case"function":n=!0;break t;default:n=!1}n?this.v(t):this.h(t)}},e.prototype.v=function(t){var e=void 0;try{e=t.then}catch(t){return void this.g(t)}"function"==typeof e?this.u(e,t):this.h(t)},e.prototype.g=function(t){this.i(2,t)},e.prototype.h=function(t){this.i(1,t)},e.prototype.i=function(t,e){if(0!=this.b)throw Error("Cannot settle("+t+", "+e+"): Promise already settled in state"+this.b);this.b=t,this.c=e,this.l()},e.prototype.l=function(){if(null!=this.a){for(var t=0;t<this.a.length;++t)a.b(this.a[t]);this.a=null}};var a=new r;return e.prototype.s=function(t){var e=this.f();t.Ra(e.resolve,e.reject)},e.prototype.u=function(t,e){var n=this.f();try{t.call(e,n.resolve,n.reject)}catch(t){n.reject(t)}},e.prototype.then=function(t,n){function r(t,e){return"function"==typeof t?function(e){try{i(t(e))}catch(t){o(t)}}:e}var i,o,s=new e((function(t,e){i=t,o=e}));return this.Ra(r(t,i),r(n,o)),s},e.prototype.catch=function(t){return this.then(void 0,t)},e.prototype.Ra=function(t,e){function n(){switch(r.b){case 1:t(r.c);break;case 2:e(r.c);break;default:throw Error("Unexpected state: "+r.b)}}var r=this;null==this.a?a.b(n):this.a.push(n)},e.resolve=i,e.reject=function(t){return new e((function(e,n){n(t)}))},e.race=function(t){return new e((function(e,n){for(var r=o(t),s=r.next();!s.done;s=r.next())i(s.value).Ra(e,n)}))},e.all=function(t){var n=o(t),r=n.next();return r.done?i([]):new e((function(t,e){function o(e){return function(n){s[e]=n,0==--a&&t(s)}}var s=[],a=0;do{s.push(void 0),a++,i(r.value).Ra(o(s.length-1),e),r=n.next()}while(!r.done)}))},e}));var s=s||{},a=this||self,u=/^[\w+/_-]+[=]{0,2}$/,c=null;function h(t){return(t=t.querySelector&&t.querySelector("script[nonce]"))&&(t=t.nonce||t.getAttribute("nonce"))&&u.test(t)?t:""}function l(){}function f(t){var e=typeof t;return"object"!=e?e:t?Array.isArray(t)?"array":e:"null"}function d(t){var e=f(t);return"array"==e||"object"==e&&"number"==typeof t.length}function p(t){return"function"==f(t)}function m(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}function v(t){return Object.prototype.hasOwnProperty.call(t,g)&&t[g]||(t[g]=++y)}var g="closure_uid_"+(1e9*Math.random()>>>0),y=0;function b(t,e,n){return t.call.apply(t.bind,arguments)}function w(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function _(t,e,n){return(_=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?b:w).apply(null,arguments)}function I(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}var T=Date.now;function E(t,e){function n(){}n.prototype=e.prototype,t.bb=e.prototype,t.prototype=new n,t.prototype.constructor=t}function S(t){return t}function A(t,e,n){this.code=N+t,this.message=e||R[t]||"",this.a=n||null}function k(t){var e=t&&t.code;return e?new A(e.substring(N.length),t.message,t.serverResponse):null}E(A,Error),A.prototype.w=function(){var t={code:this.code,message:this.message};return this.a&&(t.serverResponse=this.a),t},A.prototype.toJSON=function(){return this.w()};var C,N="auth/",R={"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","expired-action-code":"The action code has expired. ","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal error has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal error has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal error has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network error (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal error has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled."},O={ld:{Ua:"https://staging-identitytoolkit.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"b"},sd:{Ua:"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://securetoken.googleapis.com/v1/token",Xa:"https://identitytoolkit.googleapis.com/v2/",id:"p"},ud:{Ua:"https://staging-www.sandbox.googleapis.com/identitytoolkit/v3/relyingparty/",$a:"https://staging-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://staging-identitytoolkit.sandbox.googleapis.com/v2/",id:"s"},vd:{Ua:"https://www-googleapis-test.sandbox.google.com/identitytoolkit/v3/relyingparty/",$a:"https://test-securetoken.sandbox.googleapis.com/v1/token",Xa:"https://test-identitytoolkit.sandbox.googleapis.com/v2/",id:"t"}};function D(t){for(var e in O)if(O[e].id===t)return{firebaseEndpoint:(t=O[e]).Ua,secureTokenEndpoint:t.$a,identityPlatformEndpoint:t.Xa};return null}function x(t){if(!t)return!1;try{return!!t.$goog_Thenable}catch(t){return!1}}function P(t){if(Error.captureStackTrace)Error.captureStackTrace(this,P);else{var e=Error().stack;e&&(this.stack=e)}t&&(this.message=String(t))}function L(t,e){for(var n="",r=(t=t.split("%s")).length-1,i=0;i<r;i++)n+=t[i]+(i<e.length?e[i]:"%s");P.call(this,n+t[r])}function M(t,e){throw new L("Failure"+(t?": "+t:""),Array.prototype.slice.call(arguments,1))}function j(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function U(t,e){t.f(e),100>t.b&&(t.b++,e.next=t.a,t.a=e)}function F(){this.b=this.a=null}C=D("__EID__")?"__EID__":void 0,E(P,Error),P.prototype.name="CustomError",E(L,P),L.prototype.name="AssertionError",j.prototype.get=function(){if(0<this.b){this.b--;var t=this.a;this.a=t.next,t.next=null}else t=this.c();return t};var q=new j((function(){return new V}),(function(t){t.reset()}));function B(){var t=be,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function V(){this.next=this.b=this.a=null}F.prototype.add=function(t,e){var n=q.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},V.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},V.prototype.reset=function(){this.next=this.b=this.a=null};var G=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},H=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)},K=Array.prototype.filter?function(t,e){return Array.prototype.filter.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=[],i=0,o="string"==typeof t?t.split(""):t,s=0;s<n;s++)if(s in o){var a=o[s];e.call(void 0,a,s,t)&&(r[i++]=a)}return r},z=Array.prototype.map?function(t,e){return Array.prototype.map.call(t,e,void 0)}:function(t,e){for(var n=t.length,r=Array(n),i="string"==typeof t?t.split(""):t,o=0;o<n;o++)o in i&&(r[o]=e.call(void 0,i[o],o,t));return r},W=Array.prototype.some?function(t,e){return Array.prototype.some.call(t,e,void 0)}:function(t,e){for(var n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t))return!0;return!1};function J(t,e){return 0<=G(t,e)}function $(t,e){var n;return(n=0<=(e=G(t,e)))&&Array.prototype.splice.call(t,e,1),n}function X(t,e){!function(t,e){for(var n="string"==typeof t?t.split(""):t,r=t.length-1;0<=r;--r)r in n&&e.call(void 0,n[r],r,t)}(t,(function(n,r){e.call(void 0,n,r,t)&&Array.prototype.splice.call(t,r,1).length}))}function Q(t){return Array.prototype.concat.apply([],arguments)}function Y(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}var Z,tt=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]},et=/&/g,nt=/</g,rt=/>/g,it=/"/g,ot=/'/g,st=/\x00/g,at=/[\x00&<>"']/;function ut(t,e){return-1!=t.indexOf(e)}function ct(t,e){return t<e?-1:t>e?1:0}t:{var ht=a.navigator;if(ht){var lt=ht.userAgent;if(lt){Z=lt;break t}}Z=""}function ft(t){return ut(Z,t)}function dt(t,e){for(var n in t)e.call(void 0,t[n],n,t)}function pt(t){for(var e in t)return!1;return!0}function mt(t){var e,n={};for(e in t)n[e]=t[e];return n}var vt="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function gt(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<vt.length;o++)n=vt[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function yt(t,e){t:{try{var n=t&&t.ownerDocument,r=n&&(n.defaultView||n.parentWindow);if((r=r||a).Element&&r.Location){var i=r;break t}}catch(t){}i=null}if(i&&void 0!==i[e]&&(!t||!(t instanceof i[e])&&(t instanceof i.Location||t instanceof i.Element))){if(m(t))try{var o=t.constructor.displayName||t.constructor.name||Object.prototype.toString.call(t)}catch(t){o="<object could not be stringified>"}else o=void 0===t?"undefined":null===t?"null":typeof t;M("Argument is not a %s (or a non-Element, non-Location mock); got: %s",e,o)}}function bt(t,e){this.a=t===Tt&&e||"",this.b=It}function wt(t){return t instanceof bt&&t.constructor===bt&&t.b===It?t.a:(M("expected object of type Const, got '"+t+"'"),"type_error:Const")}bt.prototype.ta=!0,bt.prototype.sa=function(){return this.a},bt.prototype.toString=function(){return"Const{"+this.a+"}"};var _t,It={},Tt={};function Et(){if(void 0===_t){var t=null,e=a.trustedTypes;if(e&&e.createPolicy){try{t=e.createPolicy("goog#html",{createHTML:S,createScript:S,createScriptURL:S})}catch(t){a.console&&a.console.error(t.message)}_t=t}else _t=t}return _t}function St(t,e){this.a=e===Rt?t:""}function At(t){return t instanceof St&&t.constructor===St?t.a:(M("expected object of type TrustedResourceUrl, got '"+t+"' of type "+f(t)),"type_error:TrustedResourceUrl")}function kt(t,e){var n=wt(t);if(!Nt.test(n))throw Error("Invalid TrustedResourceUrl format: "+n);return function(t){var e=Et();return new St(t=e?e.createScriptURL(t):t,Rt)}(t=n.replace(Ct,(function(t,r){if(!Object.prototype.hasOwnProperty.call(e,r))throw Error('Found marker, "'+r+'", in format string, "'+n+'", but no valid label mapping found in args: '+JSON.stringify(e));return(t=e[r])instanceof bt?wt(t):encodeURIComponent(String(t))})))}St.prototype.ta=!0,St.prototype.sa=function(){return this.a.toString()},St.prototype.toString=function(){return"TrustedResourceUrl{"+this.a+"}"};var Ct=/%{(\w+)}/g,Nt=/^((https:)?\/\/[0-9a-z.:[\]-]+\/|\/[^/\\]|[^:/\\%]+\/|[^:/\\%]*[?#]|about:blank#)/i,Rt={};function Ot(t,e){this.a=e===Ut?t:""}function Dt(t){return t instanceof Ot&&t.constructor===Ot?t.a:(M("expected object of type SafeUrl, got '"+t+"' of type "+f(t)),"type_error:SafeUrl")}Ot.prototype.ta=!0,Ot.prototype.sa=function(){return this.a.toString()},Ot.prototype.toString=function(){return"SafeUrl{"+this.a+"}"};var xt=/^(?:audio\/(?:3gpp2|3gpp|aac|L16|midi|mp3|mp4|mpeg|oga|ogg|opus|x-m4a|x-matroska|x-wav|wav|webm)|font\/\w+|image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp|x-icon)|text\/csv|video\/(?:mpeg|mp4|ogg|webm|quicktime|x-matroska))(?:;\w+=(?:\w+|"[\w;,= ]+"))*$/i,Pt=/^data:(.*);base64,[a-z0-9+\/]+=*$/i,Lt=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Mt(t){if(t instanceof Ot)return t;if(t="object"==typeof t&&t.ta?t.sa():String(t),Lt.test(t))t=new Ot(t,Ut);else{var e=(t=(t=String(t)).replace(/(%0A|%0D)/g,"")).match(Pt);t=e&&xt.test(e[1])?new Ot(t,Ut):null}return t}function jt(t){return t instanceof Ot?t:(t="object"==typeof t&&t.ta?t.sa():String(t),Lt.test(t)||(t="about:invalid#zClosurez"),new Ot(t,Ut))}var Ut={},Ft=new Ot("about:invalid#zClosurez",Ut);function qt(t,e,n){this.a=n===Bt?t:""}qt.prototype.ta=!0,qt.prototype.sa=function(){return this.a.toString()},qt.prototype.toString=function(){return"SafeHtml{"+this.a+"}"};var Bt={};function Vt(t,e,n,r){return t=t instanceof Ot?t:jt(t),e=e||a,n=n instanceof bt?wt(n):n||"",e.open(Dt(t),n,r,void 0)}function Gt(t,e){for(var n=t.split("%s"),r="",i=Array.prototype.slice.call(arguments,1);i.length&&1<n.length;)r+=n.shift()+i.shift();return r+n.join("%s")}function Ht(t){return at.test(t)&&(-1!=t.indexOf("&")&&(t=t.replace(et,"&amp;")),-1!=t.indexOf("<")&&(t=t.replace(nt,"&lt;")),-1!=t.indexOf(">")&&(t=t.replace(rt,"&gt;")),-1!=t.indexOf('"')&&(t=t.replace(it,"&quot;")),-1!=t.indexOf("'")&&(t=t.replace(ot,"&#39;")),-1!=t.indexOf("\0")&&(t=t.replace(st,"&#0;"))),t}function Kt(t){return Kt[" "](t),t}Kt[" "]=l;var zt,Wt,Jt=ft("Opera"),$t=ft("Trident")||ft("MSIE"),Xt=ft("Edge"),Qt=Xt||$t,Yt=ft("Gecko")&&!(ut(Z.toLowerCase(),"webkit")&&!ft("Edge"))&&!(ft("Trident")||ft("MSIE"))&&!ft("Edge"),Zt=ut(Z.toLowerCase(),"webkit")&&!ft("Edge");function te(){var t=a.document;return t?t.documentMode:void 0}t:{var ee="",ne=(Wt=Z,Yt?/rv:([^\);]+)(\)|;)/.exec(Wt):Xt?/Edge\/([\d\.]+)/.exec(Wt):$t?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(Wt):Zt?/WebKit\/(\S+)/.exec(Wt):Jt?/(?:Version)[ \/]?(\S+)/.exec(Wt):void 0);if(ne&&(ee=ne?ne[1]:""),$t){var re=te();if(null!=re&&re>parseFloat(ee)){zt=String(re);break t}}zt=ee}var ie,oe={};function se(t){return function(t,e){var n=oe;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,(function(){for(var e=0,n=tt(String(zt)).split("."),r=tt(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=ct(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||ct(0==s[2].length,0==a[2].length)||ct(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e}))}a.document&&$t?ie=te()||parseInt(zt,10)||void 0:ie=void 0;var ae=ie;try{new self.OffscreenCanvas(0,0).getContext("2d")}catch(Wt){}var ue=!$t||9<=Number(ae);function ce(t){var e=document;return"string"==typeof t?e.getElementById(t):t}function he(t,e){dt(e,(function(e,n){e&&"object"==typeof e&&e.ta&&(e=e.sa()),"style"==n?t.style.cssText=e:"class"==n?t.className=e:"for"==n?t.htmlFor=e:de.hasOwnProperty(n)?t.setAttribute(de[n],e):0==n.lastIndexOf("aria-",0)||0==n.lastIndexOf("data-",0)?t.setAttribute(n,e):t[n]=e}))}var le,fe,de={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function pe(t,e,n){function r(n){n&&e.appendChild("string"==typeof n?t.createTextNode(n):n)}for(var i=2;i<n.length;i++){var o=n[i];if(!d(o)||m(o)&&0<o.nodeType)r(o);else{t:{if(o&&"number"==typeof o.length){if(m(o)){var s="function"==typeof o.item||"string"==typeof o.item;break t}if(p(o)){s="function"==typeof o.item;break t}}s=!1}H(s?Y(o):o,r)}}}function me(t,e){return e=String(e),"application/xhtml+xml"===t.contentType&&(e=e.toLowerCase()),t.createElement(e)}function ve(t){a.setTimeout((function(){throw t}),0)}function ge(t,e){fe||function(){if(a.Promise&&a.Promise.resolve){var t=a.Promise.resolve(void 0);fe=function(){t.then(we)}}else fe=function(){var t=we;!p(a.setImmediate)||a.Window&&a.Window.prototype&&!ft("Edge")&&a.Window.prototype.setImmediate==a.setImmediate?(le||(le=function(){var t=a.MessageChannel;if(void 0===t&&"undefined"!=typeof window&&window.postMessage&&window.addEventListener&&!ft("Presto")&&(t=function(){var t=me(document,"IFRAME");t.style.display="none",document.documentElement.appendChild(t);var e=t.contentWindow;(t=e.document).open(),t.close();var n="callImmediate"+Math.random(),r="file:"==e.location.protocol?"*":e.location.protocol+"//"+e.location.host;t=_((function(t){"*"!=r&&t.origin!=r||t.data!=n||this.port1.onmessage()}),this),e.addEventListener("message",t,!1),this.port1={},this.port2={postMessage:function(){e.postMessage(n,r)}}}),void 0!==t&&!ft("Trident")&&!ft("MSIE")){var e=new t,n={},r=n;return e.port1.onmessage=function(){if(void 0!==n.next){var t=(n=n.next).Hb;n.Hb=null,t()}},function(t){r.next={Hb:t},r=r.next,e.port2.postMessage(0)}}return function(t){a.setTimeout(t,0)}}()),le(t)):a.setImmediate(t)}}(),ye||(fe(),ye=!0),be.add(t,e)}var ye=!1,be=new F;function we(){for(var t;t=B();){try{t.a.call(t.b)}catch(t){ve(t)}U(q,t)}ye=!1}function _e(t,e){if(this.a=Ie,this.i=void 0,this.f=this.b=this.c=null,this.g=this.h=!1,t!=l)try{var n=this;t.call(e,(function(t){Le(n,Te,t)}),(function(t){if(!(t instanceof Ve))try{if(t instanceof Error)throw t;throw Error("Promise rejected.")}catch(t){}Le(n,Ee,t)}))}catch(t){Le(this,Ee,t)}}var Ie=0,Te=2,Ee=3;function Se(){this.next=this.f=this.b=this.g=this.a=null,this.c=!1}Se.prototype.reset=function(){this.f=this.b=this.g=this.a=null,this.c=!1};var Ae=new j((function(){return new Se}),(function(t){t.reset()}));function ke(t,e,n){var r=Ae.get();return r.g=t,r.b=e,r.f=n,r}function Ce(t){if(t instanceof _e)return t;var e=new _e(l);return Le(e,Te,t),e}function Ne(t){return new _e((function(e,n){n(t)}))}function Re(t,e,n){Me(t,e,n,null)||ge(I(e,t))}function Oe(t){return new _e((function(e){var n=t.length,r=[];if(n)for(var i=function(t,i,o){n--,r[t]=i?{Qb:!0,value:o}:{Qb:!1,reason:o},0==n&&e(r)},o=0;o<t.length;o++)Re(t[o],I(i,o,!0),I(i,o,!1));else e(r)}))}function De(t,e){if(t.a==Ie)if(t.c){var n=t.c;if(n.b){for(var r=0,i=null,o=null,s=n.b;s&&(s.c||(r++,s.a==t&&(i=s),!(i&&1<r)));s=s.next)i||(o=s);i&&(n.a==Ie&&1==r?De(n,e):(o?((r=o).next==n.f&&(n.f=r),r.next=r.next.next):Ue(n),Fe(n,i,Ee,e)))}t.c=null}else Le(t,Ee,e)}function xe(t,e){t.b||t.a!=Te&&t.a!=Ee||je(t),t.f?t.f.next=e:t.b=e,t.f=e}function Pe(t,e,n,r){var i=ke(null,null,null);return i.a=new _e((function(t,o){i.g=e?function(n){try{var i=e.call(r,n);t(i)}catch(t){o(t)}}:t,i.b=n?function(e){try{var i=n.call(r,e);void 0===i&&e instanceof Ve?o(e):t(i)}catch(t){o(t)}}:o})),i.a.c=t,xe(t,i),i.a}function Le(t,e,n){t.a==Ie&&(t===n&&(e=Ee,n=new TypeError("Promise cannot resolve to itself")),t.a=1,Me(n,t.$c,t.ad,t)||(t.i=n,t.a=e,t.c=null,je(t),e!=Ee||n instanceof Ve||function(t,e){t.g=!0,ge((function(){t.g&&Be.call(null,e)}))}(t,n)))}function Me(t,e,n,r){if(t instanceof _e)return xe(t,ke(e||l,n||null,r)),!0;if(x(t))return t.then(e,n,r),!0;if(m(t))try{var i=t.then;if(p(i))return function(t,e,n,r,i){function o(t){s||(s=!0,r.call(i,t))}var s=!1;try{e.call(t,(function(t){s||(s=!0,n.call(i,t))}),o)}catch(t){o(t)}}(t,i,e,n,r),!0}catch(t){return n.call(r,t),!0}return!1}function je(t){t.h||(t.h=!0,ge(t.gc,t))}function Ue(t){var e=null;return t.b&&(e=t.b,t.b=e.next,e.next=null),t.b||(t.f=null),e}function Fe(t,e,n,r){if(n==Ee&&e.b&&!e.c)for(;t&&t.g;t=t.c)t.g=!1;if(e.a)e.a.c=null,qe(e,n,r);else try{e.c?e.g.call(e.f):qe(e,n,r)}catch(t){Be.call(null,t)}U(Ae,e)}function qe(t,e,n){e==Te?t.g.call(t.f,n):t.b&&t.b.call(t.f,n)}_e.prototype.then=function(t,e,n){return Pe(this,p(t)?t:null,p(e)?e:null,n)},_e.prototype.$goog_Thenable=!0,(t=_e.prototype).oa=function(t,e){return(t=ke(t,t,e)).c=!0,xe(this,t),this},t.o=function(t,e){return Pe(this,null,t,e)},t.cancel=function(t){if(this.a==Ie){var e=new Ve(t);ge((function(){De(this,e)}),this)}},t.$c=function(t){this.a=Ie,Le(this,Te,t)},t.ad=function(t){this.a=Ie,Le(this,Ee,t)},t.gc=function(){for(var t;t=Ue(this);)Fe(this,t,this.a,this.i);this.h=!1};var Be=ve;function Ve(t){P.call(this,t)}function Ge(){0!=He&&(Ke[v(this)]=this),this.ya=this.ya,this.pa=this.pa}E(Ve,P),Ve.prototype.name="cancel";var He=0,Ke={};function ze(t){if(!t.ya&&(t.ya=!0,t.Da(),0!=He)){var e=v(t);if(0!=He&&t.pa&&0<t.pa.length)throw Error(t+" did not empty its onDisposeCallbacks queue. This probably means it overrode dispose() or disposeInternal() without calling the superclass' method.");delete Ke[e]}}Ge.prototype.ya=!1,Ge.prototype.Da=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};var We=Object.freeze||function(t){return t},Je=!$t||9<=Number(ae),$e=$t&&!se("9"),Xe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{a.addEventListener("test",l,e),a.removeEventListener("test",l,e)}catch(t){}return t}();function Qe(t,e){this.type=t,this.b=this.target=e,this.defaultPrevented=!1}function Ye(t,e){if(Qe.call(this,t?t.type:""),this.relatedTarget=this.b=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.a=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.b=e,e=t.relatedTarget){if(Yt){t:{try{Kt(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Ze[t.pointerType]||"",this.a=t,t.defaultPrevented&&this.preventDefault()}}Qe.prototype.preventDefault=function(){this.defaultPrevented=!0},E(Ye,Qe);var Ze=We({2:"touch",3:"pen",4:"mouse"});Ye.prototype.preventDefault=function(){Ye.bb.preventDefault.call(this);var t=this.a;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,$e)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(t){}},Ye.prototype.g=function(){return this.a};var tn="closure_listenable_"+(1e6*Math.random()|0),en=0;function nn(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.Wa=i,this.key=++en,this.wa=this.Qa=!1}function rn(t){t.wa=!0,t.listener=null,t.proxy=null,t.src=null,t.Wa=null}function on(t){this.src=t,this.a={},this.b=0}function sn(t,e){var n=e.type;n in t.a&&$(t.a[n],e)&&(rn(e),0==t.a[n].length&&(delete t.a[n],t.b--))}function an(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.wa&&o.listener==e&&o.capture==!!n&&o.Wa==r)return i}return-1}on.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=an(t,e,r,i);return-1<s?(e=t[s],n||(e.Qa=!1)):((e=new nn(e,this.src,o,!!r,i)).Qa=n,t.push(e)),e};var un="closure_lm_"+(1e6*Math.random()|0),cn={};function hn(t,e,n,r,i){if(r&&r.once)fn(t,e,n,r,i);else if(Array.isArray(e))for(var o=0;o<e.length;o++)hn(t,e[o],n,r,i);else n=_n(n),t&&t[tn]?Tn(t,e,n,m(r)?!!r.capture:!!r,i):ln(t,e,n,!1,r,i)}function ln(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=m(i)?!!i.capture:!!i,a=bn(t);if(a||(t[un]=a=new on(t)),!(n=a.add(e,n,r,s,o)).proxy)if(r=function(){var t=yn,e=Je?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Xe||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(mn(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}}function fn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)fn(t,e[o],n,r,i);else n=_n(n),t&&t[tn]?En(t,e,n,m(r)?!!r.capture:!!r,i):ln(t,e,n,!0,r,i)}function dn(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)dn(t,e[o],n,r,i);else r=m(r)?!!r.capture:!!r,n=_n(n),t&&t[tn]?(t=t.v,(e=String(e).toString())in t.a&&-1<(n=an(o=t.a[e],n,r,i))&&(rn(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=bn(t))&&(e=t.a[e.toString()],t=-1,e&&(t=an(e,n,r,i)),(n=-1<t?e[t]:null)&&pn(n))}function pn(t){if("number"!=typeof t&&t&&!t.wa){var e=t.src;if(e&&e[tn])sn(e.v,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(mn(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=bn(e))?(sn(n,t),0==n.b&&(n.src=null,e[un]=null)):rn(t)}}}function mn(t){return t in cn?cn[t]:cn[t]="on"+t}function vn(t,e,n,r){var i=!0;if((t=bn(t))&&(e=t.a[e.toString()]))for(e=e.concat(),t=0;t<e.length;t++){var o=e[t];o&&o.capture==n&&!o.wa&&(o=gn(o,r),i=i&&!1!==o)}return i}function gn(t,e){var n=t.listener,r=t.Wa||t.src;return t.Qa&&pn(t),n.call(r,e)}function yn(t,e){if(t.wa)return!0;if(!Je){if(!e)t:{e=["window","event"];for(var n=a,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}if(e=new Ye(r=e,this),n=!0,!(0>r.keyCode||null!=r.returnValue)){t:{var i=!1;if(0==r.keyCode)try{r.keyCode=-1;break t}catch(t){i=!0}(i||null==r.returnValue)&&(r.returnValue=!0)}for(r=[],i=e.b;i;i=i.parentNode)r.push(i);for(t=t.type,i=r.length-1;0<=i;i--){e.b=r[i];var o=vn(r[i],t,!0,e);n=n&&o}for(i=0;i<r.length;i++)e.b=r[i],o=vn(r[i],t,!1,e),n=n&&o}return n}return gn(t,new Ye(e,this))}function bn(t){return(t=t[un])instanceof on?t:null}var wn="__closure_events_fn_"+(1e9*Math.random()>>>0);function _n(t){return p(t)?t:(t[wn]||(t[wn]=function(e){return t.handleEvent(e)}),t[wn])}function In(){Ge.call(this),this.v=new on(this),this.bc=this,this.hb=null}function Tn(t,e,n,r,i){t.v.add(String(e),n,!1,r,i)}function En(t,e,n,r,i){t.v.add(String(e),n,!0,r,i)}function Sn(t,e,n,r){if(!(e=t.v.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.wa&&s.capture==n){var a=s.listener,u=s.Wa||s.src;s.Qa&&sn(t.v,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}function An(t,e,n){if(p(t))n&&(t=_(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=_(t.handleEvent,t)}return 2147483647<Number(e)?-1:a.setTimeout(t,e||0)}function kn(t){var e=null;return new _e((function(n,r){-1==(e=An((function(){n(void 0)}),t))&&r(Error("Failed to schedule timer."))})).o((function(t){throw a.clearTimeout(e),t}))}function Cn(t){if(t.X&&"function"==typeof t.X)return t.X();if("string"==typeof t)return t.split("");if(d(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}function Nn(t){if(t.Y&&"function"==typeof t.Y)return t.Y();if(!t.X||"function"!=typeof t.X){if(d(t)||"string"==typeof t){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}for(var r in e=[],n=0,t)e[n++]=r;return e}}function Rn(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Rn)for(n=t.Y(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function On(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Dn(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Dn(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Dn(t,e){return Object.prototype.hasOwnProperty.call(t,e)}E(In,Ge),In.prototype[tn]=!0,In.prototype.addEventListener=function(t,e,n,r){hn(this,t,e,n,r)},In.prototype.removeEventListener=function(t,e,n,r){dn(this,t,e,n,r)},In.prototype.dispatchEvent=function(t){var e,n=this.hb;if(n)for(e=[];n;n=n.hb)e.push(n);n=this.bc;var r=t.type||t;if("string"==typeof t)t=new Qe(t,n);else if(t instanceof Qe)t.target=t.target||n;else{var i=t;gt(t=new Qe(r,n),i)}if(i=!0,e)for(var o=e.length-1;0<=o;o--){var s=t.b=e[o];i=Sn(s,r,!0,t)&&i}if(i=Sn(s=t.b=n,r,!0,t)&&i,i=Sn(s,r,!1,t)&&i,e)for(o=0;o<e.length;o++)i=Sn(s=t.b=e[o],r,!1,t)&&i;return i},In.prototype.Da=function(){if(In.bb.Da.call(this),this.v){var t,e=this.v;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)rn(n[r]);delete e.a[t],e.b--}}this.hb=null},(t=Rn.prototype).X=function(){On(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},t.Y=function(){return On(this),this.a.concat()},t.clear=function(){this.b={},this.c=this.a.length=0},t.get=function(t,e){return Dn(this.b,t)?this.b[t]:e},t.set=function(t,e){Dn(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},t.forEach=function(t,e){for(var n=this.Y(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var xn=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Pn(t,e){var n;this.a=this.l=this.c="",this.g=null,this.h=this.f="",this.i=!1,t instanceof Pn?(this.i=void 0!==e?e:t.i,Ln(this,t.c),this.l=t.l,this.a=t.a,Mn(this,t.g),this.f=t.f,jn(this,nr(t.b)),this.h=t.h):t&&(n=String(t).match(xn))?(this.i=!!e,Ln(this,n[1]||"",!0),this.l=Vn(n[2]||""),this.a=Vn(n[3]||"",!0),Mn(this,n[4]),this.f=Vn(n[5]||"",!0),jn(this,n[6]||"",!0),this.h=Vn(n[7]||"")):(this.i=!!e,this.b=new Xn(null,this.i))}function Ln(t,e,n){t.c=n?Vn(e,!0):e,t.c&&(t.c=t.c.replace(/:$/,""))}function Mn(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.g=e}else t.g=null}function jn(t,e,n){e instanceof Xn?(t.b=e,function(t,e){e&&!t.f&&(Qn(t),t.c=null,t.a.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(Zn(this,e),er(this,n,t))}),t)),t.f=e}(t.b,t.i)):(n||(e=Gn(e,Jn)),t.b=new Xn(e,t.i))}function Un(t,e,n){t.b.set(e,n)}function Fn(t,e){return t.b.get(e)}function qn(t){return t instanceof Pn?new Pn(t):new Pn(t,void 0)}function Bn(t,e,n,r){var i=new Pn(null,void 0);return t&&Ln(i,t),e&&(i.a=e),n&&Mn(i,n),r&&(i.f=r),i}function Vn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Gn(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,Hn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function Hn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}Pn.prototype.toString=function(){var t=[],e=this.c;e&&t.push(Gn(e,Kn,!0),":");var n=this.a;return(n||"file"==e)&&(t.push("//"),(e=this.l)&&t.push(Gn(e,Kn,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.g)&&t.push(":",String(n))),(n=this.f)&&(this.a&&"/"!=n.charAt(0)&&t.push("/"),t.push(Gn(n,"/"==n.charAt(0)?Wn:zn,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.h)&&t.push("#",Gn(n,$n)),t.join("")},Pn.prototype.resolve=function(t){var e=new Pn(this),n=!!t.c;n?Ln(e,t.c):n=!!t.l,n?e.l=t.l:n=!!t.a,n?e.a=t.a:n=null!=t.g;var r=t.f;if(n)Mn(e,t.g);else if(n=!!t.f){if("/"!=r.charAt(0))if(this.a&&!this.f)r="/"+r;else{var i=e.f.lastIndexOf("/");-1!=i&&(r=e.f.substr(0,i+1)+r)}if(".."==(i=r)||"."==i)r="";else if(ut(i,"./")||ut(i,"/.")){r=0==i.lastIndexOf("/",0),i=i.split("/");for(var o=[],s=0;s<i.length;){var a=i[s++];"."==a?r&&s==i.length&&o.push(""):".."==a?((1<o.length||1==o.length&&""!=o[0])&&o.pop(),r&&s==i.length&&o.push("")):(o.push(a),r=!0)}r=o.join("/")}else r=i}return n?e.f=r:n=""!==t.b.toString(),n?jn(e,nr(t.b)):n=!!t.h,n&&(e.h=t.h),e};var Kn=/[#\/\?@]/g,zn=/[#\?:]/g,Wn=/[#\?]/g,Jn=/[#\?@]/g,$n=/#/g;function Xn(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function Qn(t){t.a||(t.a=new Rn,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function Yn(t){var e=Nn(t);if(void 0===e)throw Error("Keys are undefined");var n=new Xn(null,void 0);t=Cn(t);for(var r=0;r<e.length;r++){var i=e[r],o=t[r];Array.isArray(o)?er(n,i,o):n.add(i,o)}return n}function Zn(t,e){Qn(t),e=rr(t,e),Dn(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Dn((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&On(t)))}function tr(t,e){return Qn(t),e=rr(t,e),Dn(t.a.b,e)}function er(t,e,n){Zn(t,e),0<n.length&&(t.c=null,t.a.set(rr(t,e),Y(n)),t.b+=n.length)}function nr(t){var e=new Xn;return e.c=t.c,t.a&&(e.a=new Rn(t.a),e.b=t.b),e}function rr(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}function ir(t){var e=[];return sr(new or,t,e),e.join("")}function or(){}function sr(t,e,n){if(null==e)n.push("null");else{if("object"==typeof e){if(Array.isArray(e)){var r=e;e=r.length,n.push("[");for(var i="",o=0;o<e;o++)n.push(i),sr(t,r[o],n),i=",";return void n.push("]")}if(!(e instanceof String||e instanceof Number||e instanceof Boolean)){for(r in n.push("{"),i="",e)Object.prototype.hasOwnProperty.call(e,r)&&"function"!=typeof(o=e[r])&&(n.push(i),cr(r,n),n.push(":"),sr(t,o,n),i=",");return void n.push("}")}e=e.valueOf()}switch(typeof e){case"string":cr(e,n);break;case"number":n.push(isFinite(e)&&!isNaN(e)?String(e):"null");break;case"boolean":n.push(String(e));break;case"function":n.push("null");break;default:throw Error("Unknown type: "+typeof e)}}}(t=Xn.prototype).add=function(t,e){Qn(this),this.c=null,t=rr(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},t.clear=function(){this.a=this.c=null,this.b=0},t.forEach=function(t,e){Qn(this),this.a.forEach((function(n,r){H(n,(function(n){t.call(e,n,r,this)}),this)}),this)},t.Y=function(){Qn(this);for(var t=this.a.X(),e=this.a.Y(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},t.X=function(t){Qn(this);var e=[];if("string"==typeof t)tr(this,t)&&(e=Q(e,this.a.get(rr(this,t))));else{t=this.a.X();for(var n=0;n<t.length;n++)e=Q(e,t[n])}return e},t.set=function(t,e){return Qn(this),this.c=null,tr(this,t=rr(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},t.get=function(t,e){return t&&0<(t=this.X(t)).length?String(t[0]):e},t.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.Y(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.X(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var ar={'"':'\\"',"\\":"\\\\","/":"\\/","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","\t":"\\t","\v":"\\u000b"},ur=/\uffff/.test("￿")?/[\\"\x00-\x1f\x7f-\uffff]/g:/[\\"\x00-\x1f\x7f-\xff]/g;function cr(t,e){e.push('"',t.replace(ur,(function(t){var e=ar[t];return e||(e="\\u"+(65536|t.charCodeAt(0)).toString(16).substr(1),ar[t]=e),e})),'"')}function hr(){var t=Rr();return $t&&!!ae&&11==ae||/Edge\/\d+/.test(t)}function lr(){return a.window&&a.window.location.href||self&&self.location&&self.location.href||""}function fr(t,e){e=e||a.window;var n="about:blank";t&&(n=Dt(Mt(t)||Ft)),e.location.href=n}function dr(t,e){var n,r=[];for(n in t)n in e?typeof t[n]!=typeof e[n]?r.push(n):"object"==typeof t[n]&&null!=t[n]&&null!=e[n]?0<dr(t[n],e[n]).length&&r.push(n):t[n]!==e[n]&&r.push(n):r.push(n);for(n in e)n in t||r.push(n);return r}function pr(t){return!!((t=(t||Rr()).toLowerCase()).match(/android/)||t.match(/webos/)||t.match(/iphone|ipad|ipod/)||t.match(/blackberry/)||t.match(/windows phone/)||t.match(/iemobile/))}function mr(t){t=t||a.window;try{t.close()}catch(t){}}function vr(t,e,n){var r=Math.floor(1e9*Math.random()).toString();e=e||500,n=n||600;var i=(window.screen.availHeight-n)/2,o=(window.screen.availWidth-e)/2;for(s in e={width:e,height:n,top:0<i?i:0,left:0<o?o:0,location:!0,resizable:!0,statusbar:!0,toolbar:!1},n=Rr().toLowerCase(),r&&(e.target=r,ut(n,"crios/")&&(e.target="_blank")),kr(Rr())==Sr&&(t=t||"http://localhost",e.scrollbars=!0),n=t||"",(t=e)||(t={}),r=window,e=n instanceof Ot?n:Mt(void 0!==n.href?n.href:String(n))||Ft,n=t.target||n.target,i=[],t)switch(s){case"width":case"height":case"top":case"left":i.push(s+"="+t[s]);break;case"target":case"noopener":case"noreferrer":break;default:i.push(s+"="+(t[s]?1:0))}var s=i.join(",");if((ft("iPhone")&&!ft("iPod")&&!ft("iPad")||ft("iPad")||ft("iPod"))&&r.navigator&&r.navigator.standalone&&n&&"_self"!=n?(yt(s=me(document,"A"),"HTMLAnchorElement"),e=e instanceof Ot?e:jt(e),s.href=Dt(e),s.setAttribute("target",n),t.noreferrer&&s.setAttribute("rel","noreferrer"),(t=document.createEvent("MouseEvent")).initMouseEvent("click",!0,!0,r,1),s.dispatchEvent(t),s={}):t.noreferrer?(s=Vt("",r,n,s),t=Dt(e),s&&(Qt&&ut(t,";")&&(t="'"+t.replace(/'/g,"%27")+"'"),s.opener=null,t='<meta name="referrer" content="no-referrer"><meta http-equiv="refresh" content="0; url='+Ht(t)+'">',t=new qt(t=(r=Et())?r.createHTML(t):t,null,Bt),r=s.document)&&(r.write(function(t){return t instanceof qt&&t.constructor===qt?t.a:(M("expected object of type SafeHtml, got '"+t+"' of type "+f(t)),"type_error:SafeHtml")}(t)),r.close())):(s=Vt(e,r,n,s))&&t.noopener&&(s.opener=null),s)try{s.focus()}catch(t){}return s}var gr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,yr=/^[^@]+@[^@]+$/;function br(){var t=null;return new _e((function(e){"complete"==a.document.readyState?e():(t=function(){e()},fn(window,"load",t))})).o((function(e){throw dn(window,"load",t),e}))}function wr(t){return t=t||Rr(),!("file:"!==Lr()&&"ionic:"!==Lr()||!t.toLowerCase().match(/iphone|ipad|ipod|android/))}function _r(){var t=a.window;try{return!(!t||t==t.top)}catch(t){return!1}}function Ir(){return void 0!==a.WorkerGlobalScope&&"function"==typeof a.importScripts}function Tr(){return r.Z.INTERNAL.hasOwnProperty("reactNative")?"ReactNative":r.Z.INTERNAL.hasOwnProperty("node")?"Node":Ir()?"Worker":"Browser"}function Er(){var t=Tr();return"ReactNative"===t||"Node"===t}var Sr="Firefox",Ar="Chrome";function kr(t){var e=t.toLowerCase();return ut(e,"opera/")||ut(e,"opr/")||ut(e,"opios/")?"Opera":ut(e,"iemobile")?"IEMobile":ut(e,"msie")||ut(e,"trident/")?"IE":ut(e,"edge/")?"Edge":ut(e,"firefox/")?Sr:ut(e,"silk/")?"Silk":ut(e,"blackberry")?"Blackberry":ut(e,"webos")?"Webos":!ut(e,"safari/")||ut(e,"chrome/")||ut(e,"crios/")||ut(e,"android")?!ut(e,"chrome/")&&!ut(e,"crios/")||ut(e,"edge/")?ut(e,"android")?"Android":(t=t.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/))&&2==t.length?t[1]:"Other":Ar:"Safari"}var Cr={md:"FirebaseCore-web",od:"FirebaseUI-web"};function Nr(t,e){e=e||[];var n,r=[],i={};for(n in Cr)i[Cr[n]]=!0;for(n=0;n<e.length;n++)void 0!==i[e[n]]&&(delete i[e[n]],r.push(e[n]));return r.sort(),(e=r).length||(e=["FirebaseCore-web"]),"Browser"===(r=Tr())?r=kr(i=Rr()):"Worker"===r&&(r=kr(i=Rr())+"-"+r),r+"/JsCore/"+t+"/"+e.join(",")}function Rr(){return a.navigator&&a.navigator.userAgent||""}function Or(t,e){t=t.split("."),e=e||a;for(var n=0;n<t.length&&"object"==typeof e&&null!=e;n++)e=e[t[n]];return n!=t.length&&(e=void 0),e}function Dr(){try{var t=a.localStorage,e=qr();if(t)return t.setItem(e,"1"),t.removeItem(e),!hr()||!!a.indexedDB}catch(t){return Ir()&&!!a.indexedDB}return!1}function xr(){return(Pr()||"chrome-extension:"===Lr()||wr())&&!Er()&&Dr()&&!Ir()}function Pr(){return"http:"===Lr()||"https:"===Lr()}function Lr(){return a.location&&a.location.protocol||null}function Mr(t){return!pr(t=t||Rr())&&kr(t)!=Sr}function jr(t){return void 0===t?null:ir(t)}function Ur(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&null!==t[e]&&void 0!==t[e]&&(n[e]=t[e]);return n}function Fr(t){if(null!==t)return JSON.parse(t)}function qr(t){return t||Math.floor(1e9*Math.random()).toString()}function Br(t){return"Safari"!=kr(t=t||Rr())&&!t.toLowerCase().match(/iphone|ipad|ipod/)}function Vr(){var t=a.___jsl;if(t&&t.H)for(var e in t.H)if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=t.H[e].L.concat(),t.CP)for(var n=0;n<t.CP.length;n++)t.CP[n]=null}function Gr(t,e){if(t>e)throw Error("Short delay should be less than long delay!");this.a=t,this.c=e,t=Rr(),e=Tr(),this.b=pr(t)||"ReactNative"===e}function Hr(){var t=a.document;return!t||void 0===t.visibilityState||"visible"==t.visibilityState}function Kr(t){try{var e=new Date(parseInt(t,10));if(!isNaN(e.getTime())&&!/[^0-9]/.test(t))return e.toUTCString()}catch(t){}return null}function zr(){return!(!Or("fireauth.oauthhelper",a)&&!Or("fireauth.iframe",a))}Gr.prototype.get=function(){var t=a.navigator;return!t||"boolean"!=typeof t.onLine||!Pr()&&"chrome-extension:"!==Lr()&&void 0===t.connection||t.onLine?this.b?this.c:this.a:Math.min(5e3,this.a)};var Wr,Jr={};function $r(t){Jr[t]||(Jr[t]=!0,"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(t))}try{var Xr={};Object.defineProperty(Xr,"abcd",{configurable:!0,enumerable:!0,value:1}),Object.defineProperty(Xr,"abcd",{configurable:!0,enumerable:!0,value:2}),Wr=2==Xr.abcd}catch(Wt){Wr=!1}function Qr(t,e,n){Wr?Object.defineProperty(t,e,{configurable:!0,enumerable:!0,value:n}):t[e]=n}function Yr(t,e){if(e)for(var n in e)e.hasOwnProperty(n)&&Qr(t,n,e[n])}function Zr(t){var e={};return Yr(e,t),e}function ti(t){var e=t;if("object"==typeof t&&null!=t)for(var n in e="length"in t?[]:{},t)Qr(e,n,ti(t[n]));return e}function ei(t){var e=t&&(t[si]?"phone":null);if(!(e&&t&&t[oi]))throw new A("internal-error","Internal assert: invalid MultiFactorInfo object");Qr(this,"uid",t[oi]),Qr(this,"displayName",t[ri]||null);var n=null;t[ii]&&(n=new Date(t[ii]).toUTCString()),Qr(this,"enrollmentTime",n),Qr(this,"factorId",e)}function ni(t){try{var e=new ai(t)}catch(t){e=null}return e}ei.prototype.w=function(){return{uid:this.uid,displayName:this.displayName,factorId:this.factorId,enrollmentTime:this.enrollmentTime}};var ri="displayName",ii="enrolledAt",oi="mfaEnrollmentId",si="phoneInfo";function ai(t){ei.call(this,t),Qr(this,"phoneNumber",t[si])}function ui(t){var e={},n=t[fi],r=t[pi],i=t[mi];if(t=ni(t[di]),!i||i!=hi&&i!=li&&!n||i==li&&!r||i==ci&&!t)throw Error("Invalid checkActionCode response!");i==li?(e[gi]=n||null,e[bi]=n||null,e[vi]=r):(e[gi]=r||null,e[bi]=r||null,e[vi]=n||null),e[yi]=t||null,Qr(this,_i,i),Qr(this,wi,ti(e))}E(ai,ei),ai.prototype.w=function(){var t=ai.bb.w.call(this);return t.phoneNumber=this.phoneNumber,t};var ci="REVERT_SECOND_FACTOR_ADDITION",hi="EMAIL_SIGNIN",li="VERIFY_AND_CHANGE_EMAIL",fi="email",di="mfaInfo",pi="newEmail",mi="requestType",vi="email",gi="fromEmail",yi="multiFactorInfo",bi="previousEmail",wi="data",_i="operation";function Ii(t){var e=Fn(t=qn(t),Ti)||null,n=Fn(t,Ei)||null,r=Fn(t,ki)||null;if(r=r&&Ni[r]||null,!e||!n||!r)throw new A("argument-error",Ti+", "+Ei+"and "+ki+" are required in a valid action code URL.");Yr(this,{apiKey:e,operation:r,code:n,continueUrl:Fn(t,Si)||null,languageCode:Fn(t,Ai)||null,tenantId:Fn(t,Ci)||null})}var Ti="apiKey",Ei="oobCode",Si="continueUrl",Ai="languageCode",ki="mode",Ci="tenantId",Ni={recoverEmail:"RECOVER_EMAIL",resetPassword:"PASSWORD_RESET",revertSecondFactorAddition:ci,signIn:hi,verifyAndChangeEmail:li,verifyEmail:"VERIFY_EMAIL"};function Ri(t){try{return new Ii(t)}catch(t){return null}}function Oi(t){var e=t[Mi];if(void 0===e)throw new A("missing-continue-uri");if("string"!=typeof e||"string"==typeof e&&!e.length)throw new A("invalid-continue-uri");this.h=e,this.b=this.a=null,this.g=!1;var n=t[Di];if(n&&"object"==typeof n){e=n[Fi];var r=n[ji];if(n=n[Ui],"string"==typeof e&&e.length){if(this.a=e,void 0!==r&&"boolean"!=typeof r)throw new A("argument-error",ji+" property must be a boolean when specified.");if(this.g=!!r,void 0!==n&&("string"!=typeof n||"string"==typeof n&&!n.length))throw new A("argument-error",Ui+" property must be a non empty string when specified.");this.b=n||null}else{if(void 0!==e)throw new A("argument-error",Fi+" property must be a non empty string when specified.");if(void 0!==r||void 0!==n)throw new A("missing-android-pkg-name")}}else if(void 0!==n)throw new A("argument-error",Di+" property must be a non null object when specified.");if(this.f=null,(e=t[Li])&&"object"==typeof e){if("string"==typeof(e=e[qi])&&e.length)this.f=e;else if(void 0!==e)throw new A("argument-error",qi+" property must be a non empty string when specified.")}else if(void 0!==e)throw new A("argument-error",Li+" property must be a non null object when specified.");if(void 0!==(e=t[Pi])&&"boolean"!=typeof e)throw new A("argument-error",Pi+" property must be a boolean when specified.");if(this.c=!!e,void 0!==(t=t[xi])&&("string"!=typeof t||"string"==typeof t&&!t.length))throw new A("argument-error",xi+" property must be a non empty string when specified.");this.i=t||null}var Di="android",xi="dynamicLinkDomain",Pi="handleCodeInApp",Li="iOS",Mi="url",ji="installApp",Ui="minimumVersion",Fi="packageName",qi="bundleId";function Bi(t){var e={};for(var n in e.continueUrl=t.h,e.canHandleCodeInApp=t.c,(e.androidPackageName=t.a)&&(e.androidMinimumVersion=t.b,e.androidInstallApp=t.g),e.iOSBundleId=t.f,e.dynamicLinkDomain=t.i,e)null===e[n]&&delete e[n];return e}var Vi=null;function Gi(t){var e=Ki(t);if(!(e&&e.sub&&e.iss&&e.aud&&e.exp))throw Error("Invalid JWT");this.h=t,this.a=e.exp,this.i=e.sub,t=Date.now()/1e3,this.g=e.iat||(t>this.a?this.a:t),this.b=e.provider_id||e.firebase&&e.firebase.sign_in_provider||null,this.f=e.firebase&&e.firebase.tenant||null,this.c=!!e.is_anonymous||"anonymous"==this.b}function Hi(t){try{return new Gi(t)}catch(t){return null}}function Ki(t){if(!t)return null;if(3!=(t=t.split(".")).length)return null;for(var e=(4-(t=t[1]).length%4)%4,n=0;n<e;n++)t+=".";try{var r=function(t){var e=[];return function(t,e){function n(e){for(;r<t.length;){var n=t.charAt(r++),i=Vi[n];if(null!=i)return i;if(!/^[\s\xa0]*$/.test(n))throw Error("Unknown base64 encoding at char: "+n)}return e}!function(){if(!Vi){Vi={};for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".split(""),e=["+/=","+/","-_=","-_.","-_"],n=0;5>n;n++)for(var r=t.concat(e[n].split("")),i=0;i<r.length;i++){var o=r[i];void 0===Vi[o]&&(Vi[o]=i)}}}();for(var r=0;;){var i=n(-1),o=n(0),s=n(64),a=n(64);if(64===a&&-1===i)break;e(i<<2|o>>4),64!=s&&(e(o<<4&240|s>>2),64!=a&&e(s<<6&192|a))}}(t,(function(t){e.push(t)})),e}(t);for(t=[],n=e=0;e<r.length;){var i=r[e++];if(128>i)t[n++]=String.fromCharCode(i);else if(191<i&&224>i){var o=r[e++];t[n++]=String.fromCharCode((31&i)<<6|63&o)}else if(239<i&&365>i){o=r[e++];var s=r[e++],a=((7&i)<<18|(63&o)<<12|(63&s)<<6|63&r[e++])-65536;t[n++]=String.fromCharCode(55296+(a>>10)),t[n++]=String.fromCharCode(56320+(1023&a))}else o=r[e++],s=r[e++],t[n++]=String.fromCharCode((15&i)<<12|(63&o)<<6|63&s)}return JSON.parse(t.join(""))}catch(t){}return null}Gi.prototype.T=function(){return this.f},Gi.prototype.l=function(){return this.c},Gi.prototype.toString=function(){return this.h};var zi="oauth_consumer_key oauth_nonce oauth_signature oauth_signature_method oauth_timestamp oauth_token oauth_version".split(" "),Wi=["client_id","response_type","scope","redirect_uri","state"],Ji={nd:{Ja:"locale",va:700,ua:600,fa:"facebook.com",Ya:Wi},pd:{Ja:null,va:500,ua:750,fa:"github.com",Ya:Wi},qd:{Ja:"hl",va:515,ua:680,fa:"google.com",Ya:Wi},wd:{Ja:"lang",va:485,ua:705,fa:"twitter.com",Ya:zi},kd:{Ja:"locale",va:640,ua:600,fa:"apple.com",Ya:[]}};function $i(t){for(var e in Ji)if(Ji[e].fa==t)return Ji[e];return null}function Xi(t){var e={};e["facebook.com"]=eo,e["google.com"]=ro,e["github.com"]=no,e["twitter.com"]=io;var n=t&&t[Yi];try{if(n)return e[n]?new e[n](t):new to(t);if(void 0!==t[Qi])return new Zi(t)}catch(t){}return null}var Qi="idToken",Yi="providerId";function Zi(t){var e=t[Yi];if(!e&&t[Qi]){var n=Hi(t[Qi]);n&&n.b&&(e=n.b)}if(!e)throw Error("Invalid additional user info!");"anonymous"!=e&&"custom"!=e||(e=null),n=!1,void 0!==t.isNewUser?n=!!t.isNewUser:"identitytoolkit#SignupNewUserResponse"===t.kind&&(n=!0),Qr(this,"providerId",e),Qr(this,"isNewUser",n)}function to(t){Zi.call(this,t),Qr(this,"profile",ti((t=Fr(t.rawUserInfo||"{}"))||{}))}function eo(t){if(to.call(this,t),"facebook.com"!=this.providerId)throw Error("Invalid provider ID!")}function no(t){if(to.call(this,t),"github.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",this.profile&&this.profile.login||null)}function ro(t){if(to.call(this,t),"google.com"!=this.providerId)throw Error("Invalid provider ID!")}function io(t){if(to.call(this,t),"twitter.com"!=this.providerId)throw Error("Invalid provider ID!");Qr(this,"username",t.screenName||null)}function oo(t){var e=qn(t),n=Fn(e,"link"),r=Fn(qn(n),"link");return e=Fn(e,"deep_link_id"),Fn(qn(e),"link")||e||r||n||t}function so(t,e){if(!t&&!e)throw new A("internal-error","Internal assert: no raw session string available");if(t&&e)throw new A("internal-error","Internal assert: unable to determine the session type");this.a=t||null,this.b=e||null,this.type=this.a?ao:uo}E(to,Zi),E(eo,to),E(no,to),E(ro,to),E(io,to);var ao="enroll",uo="signin";function co(){}function ho(t,e){return t.then((function(t){if(t[Ys]){var n=Hi(t[Ys]);if(!n||e!=n.i)throw new A("user-mismatch");return t}throw new A("user-mismatch")})).o((function(t){throw t&&t.code&&t.code==N+"user-not-found"?new A("user-mismatch"):t}))}function lo(t,e){if(!e)throw new A("internal-error","failed to construct a credential");this.a=e,Qr(this,"providerId",t),Qr(this,"signInMethod",t)}function fo(t){return{pendingToken:t.a,requestUri:"http://localhost"}}function po(t){if(t&&t.providerId&&t.signInMethod&&0==t.providerId.indexOf("saml.")&&t.pendingToken)try{return new lo(t.providerId,t.pendingToken)}catch(t){}return null}function mo(t,e,n){if(this.a=null,e.idToken||e.accessToken)e.idToken&&Qr(this,"idToken",e.idToken),e.accessToken&&Qr(this,"accessToken",e.accessToken),e.nonce&&!e.pendingToken&&Qr(this,"nonce",e.nonce),e.pendingToken&&(this.a=e.pendingToken);else{if(!e.oauthToken||!e.oauthTokenSecret)throw new A("internal-error","failed to construct a credential");Qr(this,"accessToken",e.oauthToken),Qr(this,"secret",e.oauthTokenSecret)}Qr(this,"providerId",t),Qr(this,"signInMethod",n)}function vo(t){var e={};return t.idToken&&(e.id_token=t.idToken),t.accessToken&&(e.access_token=t.accessToken),t.secret&&(e.oauth_token_secret=t.secret),e.providerId=t.providerId,t.nonce&&!t.a&&(e.nonce=t.nonce),e={postBody:Yn(e).toString(),requestUri:"http://localhost"},t.a&&(delete e.postBody,e.pendingToken=t.a),e}function go(t){if(t&&t.providerId&&t.signInMethod){var e={idToken:t.oauthIdToken,accessToken:t.oauthTokenSecret?null:t.oauthAccessToken,oauthTokenSecret:t.oauthTokenSecret,oauthToken:t.oauthTokenSecret&&t.oauthAccessToken,nonce:t.nonce,pendingToken:t.pendingToken};try{return new mo(t.providerId,e,t.signInMethod)}catch(t){}}return null}function yo(t,e){this.Qc=e||[],Yr(this,{providerId:t,isOAuthProvider:!0}),this.Jb={},this.qb=($i(t)||{}).Ja||null,this.pb=null}function bo(t){if("string"!=typeof t||0!=t.indexOf("saml."))throw new A("argument-error",'SAML provider IDs must be prefixed with "saml."');yo.call(this,t,[])}function wo(t){yo.call(this,t,Wi),this.a=[]}function _o(){wo.call(this,"facebook.com")}function Io(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return m(t)&&(e=t.accessToken),(new _o).credential({accessToken:e})}function To(){wo.call(this,"github.com")}function Eo(t){if(!t)throw new A("argument-error","credential failed: expected 1 argument (the OAuth access token).");var e=t;return m(t)&&(e=t.accessToken),(new To).credential({accessToken:e})}function So(){wo.call(this,"google.com"),this.Ca("profile")}function Ao(t,e){var n=t;return m(t)&&(n=t.idToken,e=t.accessToken),(new So).credential({idToken:n,accessToken:e})}function ko(){yo.call(this,"twitter.com",zi)}function Co(t,e){var n=t;if(m(n)||(n={oauthToken:t,oauthTokenSecret:e}),!n.oauthToken||!n.oauthTokenSecret)throw new A("argument-error","credential failed: expected 2 arguments (the OAuth access token and secret).");return new mo("twitter.com",n,"twitter.com")}function No(t,e,n){this.a=t,this.f=e,Qr(this,"providerId","password"),Qr(this,"signInMethod",n===Oo.EMAIL_LINK_SIGN_IN_METHOD?Oo.EMAIL_LINK_SIGN_IN_METHOD:Oo.EMAIL_PASSWORD_SIGN_IN_METHOD)}function Ro(t){return t&&t.email&&t.password?new No(t.email,t.password,t.signInMethod):null}function Oo(){Yr(this,{providerId:"password",isOAuthProvider:!1})}function Do(t,e){if(!(e=xo(e)))throw new A("argument-error","Invalid email link!");return new No(t,e.code,Oo.EMAIL_LINK_SIGN_IN_METHOD)}function xo(t){return(t=Ri(t=oo(t)))&&t.operation===hi?t:null}function Po(t){if(!(t.fb&&t.eb||t.La&&t.ea))throw new A("internal-error");this.a=t,Qr(this,"providerId","phone"),this.fa="phone",Qr(this,"signInMethod","phone")}function Lo(t){if(t&&"phone"===t.providerId&&(t.verificationId&&t.verificationCode||t.temporaryProof&&t.phoneNumber)){var e={};return H(["verificationId","verificationCode","temporaryProof","phoneNumber"],(function(n){t[n]&&(e[n]=t[n])})),new Po(e)}return null}function Mo(t){return t.a.La&&t.a.ea?{temporaryProof:t.a.La,phoneNumber:t.a.ea}:{sessionInfo:t.a.fb,code:t.a.eb}}function jo(t){try{this.a=t||r.Z.auth()}catch(t){throw new A("argument-error","Either an instance of firebase.auth.Auth must be passed as an argument to the firebase.auth.PhoneAuthProvider constructor, or the default firebase App instance must be initialized via firebase.initializeApp().")}Yr(this,{providerId:"phone",isOAuthProvider:!1})}function Uo(t,e){if(!t)throw new A("missing-verification-id");if(!e)throw new A("missing-verification-code");return new Po({fb:t,eb:e})}function Fo(t){if(t.temporaryProof&&t.phoneNumber)return new Po({La:t.temporaryProof,ea:t.phoneNumber});var e=t&&t.providerId;if(!e||"password"===e)return null;var n=t&&t.oauthAccessToken,r=t&&t.oauthTokenSecret,i=t&&t.nonce,o=t&&t.oauthIdToken,s=t&&t.pendingToken;try{switch(e){case"google.com":return Ao(o,n);case"facebook.com":return Io(n);case"github.com":return Eo(n);case"twitter.com":return Co(n,r);default:return n||r||o||s?s?0==e.indexOf("saml.")?new lo(e,s):new mo(e,{pendingToken:s,idToken:t.oauthIdToken,accessToken:t.oauthAccessToken},e):new wo(e).credential({idToken:o,accessToken:n,rawNonce:i}):null}}catch(t){return null}}function qo(t){if(!t.isOAuthProvider)throw new A("invalid-oauth-provider")}function Bo(t,e,n,r,i,o,s){if(this.c=t,this.b=e||null,this.g=n||null,this.f=r||null,this.i=o||null,this.h=s||null,this.a=i||null,!this.g&&!this.a)throw new A("invalid-auth-event");if(this.g&&this.a)throw new A("invalid-auth-event");if(this.g&&!this.f)throw new A("invalid-auth-event")}function Vo(t){return(t=t||{}).type?new Bo(t.type,t.eventId,t.urlResponse,t.sessionId,t.error&&k(t.error),t.postBody,t.tenantId):null}function Go(){this.b=null,this.a=[]}so.prototype.Ha=function(){return this.a?Ce(this.a):Ce(this.b)},so.prototype.w=function(){return this.type==ao?{multiFactorSession:{idToken:this.a}}:{multiFactorSession:{pendingCredential:this.b}}},co.prototype.ka=function(){},co.prototype.b=function(){},co.prototype.c=function(){},co.prototype.w=function(){},lo.prototype.ka=function(t){return ba(t,fo(this))},lo.prototype.b=function(t,e){var n=fo(this);return n.idToken=e,wa(t,n)},lo.prototype.c=function(t,e){return ho(_a(t,fo(this)),e)},lo.prototype.w=function(){return{providerId:this.providerId,signInMethod:this.signInMethod,pendingToken:this.a}},mo.prototype.ka=function(t){return ba(t,vo(this))},mo.prototype.b=function(t,e){var n=vo(this);return n.idToken=e,wa(t,n)},mo.prototype.c=function(t,e){return ho(_a(t,vo(this)),e)},mo.prototype.w=function(){var t={providerId:this.providerId,signInMethod:this.signInMethod};return this.idToken&&(t.oauthIdToken=this.idToken),this.accessToken&&(t.oauthAccessToken=this.accessToken),this.secret&&(t.oauthTokenSecret=this.secret),this.nonce&&(t.nonce=this.nonce),this.a&&(t.pendingToken=this.a),t},yo.prototype.Ka=function(t){return this.Jb=mt(t),this},E(bo,yo),E(wo,yo),wo.prototype.Ca=function(t){return J(this.a,t)||this.a.push(t),this},wo.prototype.Rb=function(){return Y(this.a)},wo.prototype.credential=function(t,e){var n;if(!(n=m(t)?{idToken:t.idToken||null,accessToken:t.accessToken||null,nonce:t.rawNonce||null}:{idToken:t||null,accessToken:e||null}).idToken&&!n.accessToken)throw new A("argument-error","credential failed: must provide the ID token and/or the access token.");return new mo(this.providerId,n,this.providerId)},E(_o,wo),Qr(_o,"PROVIDER_ID","facebook.com"),Qr(_o,"FACEBOOK_SIGN_IN_METHOD","facebook.com"),E(To,wo),Qr(To,"PROVIDER_ID","github.com"),Qr(To,"GITHUB_SIGN_IN_METHOD","github.com"),E(So,wo),Qr(So,"PROVIDER_ID","google.com"),Qr(So,"GOOGLE_SIGN_IN_METHOD","google.com"),E(ko,yo),Qr(ko,"PROVIDER_ID","twitter.com"),Qr(ko,"TWITTER_SIGN_IN_METHOD","twitter.com"),No.prototype.ka=function(t){return this.signInMethod==Oo.EMAIL_LINK_SIGN_IN_METHOD?nu(t,Na,{email:this.a,oobCode:this.f}):nu(t,Qa,{email:this.a,password:this.f})},No.prototype.b=function(t,e){return this.signInMethod==Oo.EMAIL_LINK_SIGN_IN_METHOD?nu(t,Ra,{idToken:e,email:this.a,oobCode:this.f}):nu(t,Ga,{idToken:e,email:this.a,password:this.f})},No.prototype.c=function(t,e){return ho(this.ka(t),e)},No.prototype.w=function(){return{email:this.a,password:this.f,signInMethod:this.signInMethod}},Yr(Oo,{PROVIDER_ID:"password"}),Yr(Oo,{EMAIL_LINK_SIGN_IN_METHOD:"emailLink"}),Yr(Oo,{EMAIL_PASSWORD_SIGN_IN_METHOD:"password"}),Po.prototype.ka=function(t){return t.gb(Mo(this))},Po.prototype.b=function(t,e){var n=Mo(this);return n.idToken=e,nu(t,Za,n)},Po.prototype.c=function(t,e){var n=Mo(this);return n.operation="REAUTH",ho(t=nu(t,tu,n),e)},Po.prototype.w=function(){var t={providerId:"phone"};return this.a.fb&&(t.verificationId=this.a.fb),this.a.eb&&(t.verificationCode=this.a.eb),this.a.La&&(t.temporaryProof=this.a.La),this.a.ea&&(t.phoneNumber=this.a.ea),t},jo.prototype.gb=function(t,e){var n=this.a.a;return Ce(e.verify()).then((function(r){if("string"!=typeof r)throw new A("argument-error","An implementation of firebase.auth.ApplicationVerifier.prototype.verify() must return a firebase.Promise that resolves with a string.");switch(e.type){case"recaptcha":var i=m(t)?t.session:null,o=m(t)?t.phoneNumber:t;return(i&&i.type==ao?i.Ha().then((function(t){return function(t,e){return nu(t,Ka,e).then((function(t){return t.phoneSessionInfo.sessionInfo}))}(n,{idToken:t,phoneEnrollmentInfo:{phoneNumber:o,recaptchaToken:r}})})):i&&i.type==uo?i.Ha().then((function(e){return function(t,e){return nu(t,za,e).then((function(t){return t.phoneResponseInfo.sessionInfo}))}(n,{mfaPendingCredential:e,mfaEnrollmentId:t.multiFactorHint&&t.multiFactorHint.uid||t.multiFactorUid,phoneSignInInfo:{recaptchaToken:r}})})):function(t,e){return nu(t,Ba,e)}(n,{phoneNumber:o,recaptchaToken:r})).then((function(t){return"function"==typeof e.reset&&e.reset(),t}),(function(t){throw"function"==typeof e.reset&&e.reset(),t}));default:throw new A("argument-error",'Only firebase.auth.ApplicationVerifiers with type="recaptcha" are currently supported.')}}))},Yr(jo,{PROVIDER_ID:"phone"}),Yr(jo,{PHONE_SIGN_IN_METHOD:"phone"}),Bo.prototype.getUid=function(){var t=[];return t.push(this.c),this.b&&t.push(this.b),this.f&&t.push(this.f),this.h&&t.push(this.h),t.join("-")},Bo.prototype.T=function(){return this.h},Bo.prototype.w=function(){return{type:this.c,eventId:this.b,urlResponse:this.g,sessionId:this.f,postBody:this.i,tenantId:this.h,error:this.a&&this.a.w()}};var Ho,Ko=null;function zo(t){var e="unauthorized-domain",n=void 0,r=qn(t);t=r.a,"chrome-extension"==(r=r.c)?n=Gt("This chrome extension ID (chrome-extension://%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):"http"==r||"https"==r?n=Gt("This domain (%s) is not authorized to run this operation. Add it to the OAuth redirect domains list in the Firebase console -> Auth section -> Sign in method tab.",t):e="operation-not-supported-in-this-environment",A.call(this,e,n)}function Wo(t,e,n){A.call(this,t,n),(t=e||{}).Kb&&Qr(this,"email",t.Kb),t.ea&&Qr(this,"phoneNumber",t.ea),t.credential&&Qr(this,"credential",t.credential),t.$b&&Qr(this,"tenantId",t.$b)}function Jo(t){if(t.code){var e=t.code||"";0==e.indexOf(N)&&(e=e.substring(N.length));var n={credential:Fo(t),$b:t.tenantId};if(t.email)n.Kb=t.email;else if(t.phoneNumber)n.ea=t.phoneNumber;else if(!n.credential)return new A(e,t.message||void 0);return new Wo(e,n,t.message)}return null}function $o(){}function Xo(t){return t.c||(t.c=t.b())}function Qo(){}function Yo(t){if(!t.f&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var e=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],n=0;n<e.length;n++){var r=e[n];try{return new ActiveXObject(r),t.f=r}catch(t){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed")}return t.f}function Zo(){}function ts(){this.a=new XDomainRequest,this.readyState=0,this.onreadystatechange=null,this.responseType=this.responseText=this.response="",this.status=-1,this.statusText="",this.a.onload=_(this.qc,this),this.a.onerror=_(this.Tb,this),this.a.onprogress=_(this.rc,this),this.a.ontimeout=_(this.vc,this)}function es(t,e){t.readyState=e,t.onreadystatechange&&t.onreadystatechange()}function ns(t,e,n){this.reset(t,e,n,void 0,void 0)}function rs(t){this.f=t,this.b=this.c=this.a=null}function is(t,e){this.name=t,this.value=e}E(zo,A),E(Wo,A),Wo.prototype.w=function(){var t={code:this.code,message:this.message};this.email&&(t.email=this.email),this.phoneNumber&&(t.phoneNumber=this.phoneNumber),this.tenantId&&(t.tenantId=this.tenantId);var e=this.credential&&this.credential.w();return e&&gt(t,e),t},Wo.prototype.toJSON=function(){return this.w()},$o.prototype.c=null,E(Qo,$o),Qo.prototype.a=function(){var t=Yo(this);return t?new ActiveXObject(t):new XMLHttpRequest},Qo.prototype.b=function(){var t={};return Yo(this)&&(t[0]=!0,t[1]=!0),t},Ho=new Qo,E(Zo,$o),Zo.prototype.a=function(){var t=new XMLHttpRequest;if("withCredentials"in t)return t;if("undefined"!=typeof XDomainRequest)return new ts;throw Error("Unsupported browser")},Zo.prototype.b=function(){return{}},(t=ts.prototype).open=function(t,e,n){if(null!=n&&!n)throw Error("Only async requests are supported.");this.a.open(t,e)},t.send=function(t){if(t){if("string"!=typeof t)throw Error("Only string data is supported");this.a.send(t)}else this.a.send()},t.abort=function(){this.a.abort()},t.setRequestHeader=function(){},t.getResponseHeader=function(t){return"content-type"==t.toLowerCase()?this.a.contentType:""},t.qc=function(){this.status=200,this.response=this.responseText=this.a.responseText,es(this,4)},t.Tb=function(){this.status=500,this.response=this.responseText="",es(this,4)},t.vc=function(){this.Tb()},t.rc=function(){this.status=200,es(this,1)},t.getAllResponseHeaders=function(){return"content-type: "+this.a.contentType},ns.prototype.a=null,ns.prototype.reset=function(t,e,n,r,i){r||T(),delete this.a},is.prototype.toString=function(){return this.name};var os=new is("SEVERE",1e3),ss=new is("WARNING",900),as=new is("CONFIG",700),us=new is("FINE",500);function cs(t){return t.c?t.c:t.a?cs(t.a):(M("Root logger has no level set."),null)}rs.prototype.log=function(t,e,n){if(t.value>=cs(this).value)for(p(e)&&(e=e()),t=new ns(t,String(e),this.f),n&&(t.a=n),n=this;n;)n=n.a};var hs={},ls=null;function fs(t){var e;if(ls||(ls=new rs(""),hs[""]=ls,ls.c=as),!(e=hs[t])){e=new rs(t);var n=t.lastIndexOf("."),r=t.substr(n+1);(n=fs(t.substr(0,n))).b||(n.b={}),n.b[r]=e,e.a=n,hs[t]=e}return e}function ds(t,e){t&&t.log(us,e,void 0)}function ps(t){this.f=t}function ms(t){In.call(this),this.u=t,this.h=void 0,this.readyState=vs,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.l=new Headers,this.b=null,this.s="GET",this.f="",this.a=!1,this.i=fs("goog.net.FetchXmlHttp"),this.m=this.c=this.g=null}E(ps,$o),ps.prototype.a=function(){return new ms(this.f)},ps.prototype.b=function(t){return function(){return t}}({}),E(ms,In);var vs=0;function gs(t){t.c.read().then(t.pc.bind(t)).catch(t.Va.bind(t))}function ys(t){t.readyState=4,t.g=null,t.c=null,t.m=null,bs(t)}function bs(t){t.onreadystatechange&&t.onreadystatechange.call(t)}function ws(t){In.call(this),this.headers=new Rn,this.D=t||null,this.c=!1,this.C=this.a=null,this.h=this.P=this.l="",this.f=this.N=this.i=this.J=!1,this.g=0,this.s=null,this.m=_s,this.u=this.S=!1}(t=ms.prototype).open=function(t,e){if(this.readyState!=vs)throw this.abort(),Error("Error reopening a connection");this.s=t,this.f=e,this.readyState=1,bs(this)},t.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.a=!0;var e={headers:this.l,method:this.s,credentials:this.h,cache:void 0};t&&(e.body=t),this.u.fetch(new Request(this.f,e)).then(this.uc.bind(this),this.Va.bind(this))},t.abort=function(){this.response=this.responseText="",this.l=new Headers,this.status=0,this.c&&this.c.cancel("Request was aborted."),1<=this.readyState&&this.a&&4!=this.readyState&&(this.a=!1,ys(this)),this.readyState=vs},t.uc=function(t){this.a&&(this.g=t,this.b||(this.status=this.g.status,this.statusText=this.g.statusText,this.b=t.headers,this.readyState=2,bs(this)),this.a&&(this.readyState=3,bs(this),this.a&&("arraybuffer"===this.responseType?t.arrayBuffer().then(this.sc.bind(this),this.Va.bind(this)):void 0!==a.ReadableStream&&"body"in t?(this.response=this.responseText="",this.c=t.body.getReader(),this.m=new TextDecoder,gs(this)):t.text().then(this.tc.bind(this),this.Va.bind(this)))))},t.pc=function(t){if(this.a){var e=this.m.decode(t.value?t.value:new Uint8Array(0),{stream:!t.done});e&&(this.response=this.responseText+=e),t.done?ys(this):bs(this),3==this.readyState&&gs(this)}},t.tc=function(t){this.a&&(this.response=this.responseText=t,ys(this))},t.sc=function(t){this.a&&(this.response=t,ys(this))},t.Va=function(t){var e=this.i;e&&e.log(ss,"Failed to fetch url "+this.f,t instanceof Error?t:Error(t)),this.a&&ys(this)},t.setRequestHeader=function(t,e){this.l.append(t,e)},t.getResponseHeader=function(t){return this.b?this.b.get(t.toLowerCase())||"":((t=this.i)&&t.log(ss,"Attempting to get response header but no headers have been received for url: "+this.f,void 0),"")},t.getAllResponseHeaders=function(){if(!this.b){var t=this.i;return t&&t.log(ss,"Attempting to get all response headers but no headers have been received for url: "+this.f,void 0),""}t=[];for(var e=this.b.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(ms.prototype,"withCredentials",{get:function(){return"include"===this.h},set:function(t){this.h=t?"include":"same-origin"}}),E(ws,In);var _s="";ws.prototype.b=fs("goog.net.XhrIo");var Is=/^https?$/i,Ts=["POST","PUT"];function Es(t){return"content-type"==t.toLowerCase()}function Ss(t,e){t.c=!1,t.a&&(t.f=!0,t.a.abort(),t.f=!1),t.h=e,As(t),Cs(t)}function As(t){t.J||(t.J=!0,t.dispatchEvent("complete"),t.dispatchEvent("error"))}function ks(t){if(t.c&&void 0!==s)if(t.C[1]&&4==Rs(t)&&2==Os(t))ds(t.b,Ds(t,"Local request error detected and ignored"));else if(t.i&&4==Rs(t))An(t.Wb,0,t);else if(t.dispatchEvent("readystatechange"),4==Rs(t)){ds(t.b,Ds(t,"Request complete")),t.c=!1;try{var e,n=Os(t);t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.l).match(xn)[1]||null;if(!o&&a.self&&a.self.location){var u=a.self.location.protocol;o=u.substr(0,u.length-1)}i=!Is.test(o?o.toLowerCase():"")}e=i}if(e)t.dispatchEvent("complete"),t.dispatchEvent("success");else{try{var c=2<Rs(t)?t.a.statusText:""}catch(e){ds(t.b,"Can not get status: "+e.message),c=""}t.h=c+" ["+Os(t)+"]",As(t)}}finally{Cs(t)}}}function Cs(t,e){if(t.a){Ns(t);var n=t.a,r=t.C[0]?l:null;t.a=null,t.C=null,e||t.dispatchEvent("ready");try{n.onreadystatechange=r}catch(e){(t=t.b)&&t.log(os,"Problem encountered resetting onreadystatechange: "+e.message,void 0)}}}function Ns(t){t.a&&t.u&&(t.a.ontimeout=null),t.s&&(a.clearTimeout(t.s),t.s=null)}function Rs(t){return t.a?t.a.readyState:0}function Os(t){try{return 2<Rs(t)?t.a.status:-1}catch(t){return-1}}function Ds(t,e){return e+" ["+t.P+" "+t.l+" "+Os(t)+"]"}function xs(t){var e=Hs;this.g=[],this.u=e,this.s=t||null,this.f=this.a=!1,this.c=void 0,this.v=this.C=this.i=!1,this.h=0,this.b=null,this.l=0}function Ps(t,e,n){t.a=!0,t.c=n,t.f=!e,Us(t)}function Ls(t){if(t.a){if(!t.v)throw new Fs(t);t.v=!1}}function Ms(t,e,n,r){t.g.push([e,n,r]),t.a&&Us(t)}function js(t){return W(t.g,(function(t){return p(t[1])}))}function Us(t){if(t.h&&t.a&&js(t)){var e=t.h,n=Vs[e];n&&(a.clearTimeout(n.a),delete Vs[e]),t.h=0}t.b&&(t.b.l--,delete t.b),e=t.c;for(var r=n=!1;t.g.length&&!t.i;){var i=t.g.shift(),o=i[0],s=i[1];if(i=i[2],o=t.f?s:o)try{var u=o.call(i||t.s,e);void 0!==u&&(t.f=t.f&&(u==e||u instanceof Error),t.c=e=u),(x(e)||"function"==typeof a.Promise&&e instanceof a.Promise)&&(r=!0,t.i=!0)}catch(r){e=r,t.f=!0,js(t)||(n=!0)}}t.c=e,r&&(u=_(t.m,t,!0),r=_(t.m,t,!1),e instanceof xs?(Ms(e,u,r),e.C=!0):e.then(u,r)),n&&(e=new Bs(e),Vs[e.a]=e,t.h=e.a)}function Fs(){P.call(this)}function qs(){P.call(this)}function Bs(t){this.a=a.setTimeout(_(this.c,this),0),this.b=t}(t=ws.prototype).Ma=function(){void 0!==s&&this.a&&(this.h="Timed out after "+this.g+"ms, aborting",ds(this.b,Ds(this,this.h)),this.dispatchEvent("timeout"),this.abort(8))},t.abort=function(){this.a&&this.c&&(ds(this.b,Ds(this,"Aborting")),this.c=!1,this.f=!0,this.a.abort(),this.f=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Cs(this))},t.Da=function(){this.a&&(this.c&&(this.c=!1,this.f=!0,this.a.abort(),this.f=!1),Cs(this,!0)),ws.bb.Da.call(this)},t.Wb=function(){this.ya||(this.N||this.i||this.f?ks(this):this.Jc())},t.Jc=function(){ks(this)},t.getResponse=function(){try{if(!this.a)return null;if("response"in this.a)return this.a.response;switch(this.m){case _s:case"text":return this.a.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in this.a)return this.a.mozResponseArrayBuffer}var t=this.b;return t&&t.log(os,"Response type "+this.m+" is not supported on this browser",void 0),null}catch(t){return ds(this.b,"Can not get response: "+t.message),null}},xs.prototype.cancel=function(t){if(this.a)this.c instanceof xs&&this.c.cancel();else{if(this.b){var e=this.b;delete this.b,t?e.cancel(t):(e.l--,0>=e.l&&e.cancel())}this.u?this.u.call(this.s,this):this.v=!0,this.a||(t=new qs(this),Ls(this),Ps(this,!1,t))}},xs.prototype.m=function(t,e){this.i=!1,Ps(this,t,e)},xs.prototype.then=function(t,e,n){var r,i,o=new _e((function(t,e){r=t,i=e}));return Ms(this,r,(function(t){t instanceof qs?o.cancel():i(t)})),o.then(t,e,n)},xs.prototype.$goog_Thenable=!0,E(Fs,P),Fs.prototype.message="Deferred has already fired",Fs.prototype.name="AlreadyCalledError",E(qs,P),qs.prototype.message="Deferred was canceled",qs.prototype.name="CanceledError",Bs.prototype.c=function(){throw delete Vs[this.a],this.b};var Vs={};function Gs(t){var e={},n=e.document||document,r=At(t).toString(),i=me(document,"SCRIPT"),o={Xb:i,Ma:void 0},s=new xs(o),u=null,l=null!=e.timeout?e.timeout:5e3;return 0<l&&(u=window.setTimeout((function(){Ks(i,!0);var t=new Js(Ws,"Timeout reached for loading script "+r);Ls(s),Ps(s,!1,t)}),l),o.Ma=u),i.onload=i.onreadystatechange=function(){i.readyState&&"loaded"!=i.readyState&&"complete"!=i.readyState||(Ks(i,e.xd||!1,u),Ls(s),Ps(s,!0,null))},i.onerror=function(){Ks(i,!0,u);var t=new Js(zs,"Error while loading script "+r);Ls(s),Ps(s,!1,t)},gt(o=e.attributes||{},{type:"text/javascript",charset:"UTF-8"}),he(i,o),function(t,e){yt(t,"HTMLScriptElement"),t.src=At(e),(e=t.ownerDocument&&t.ownerDocument.defaultView)&&e!=a?e=h(e.document):(null===c&&(c=h(a.document)),e=c),e&&t.setAttribute("nonce",e)}(i,t),function(t){var e;return(e=(t||document).getElementsByTagName("HEAD"))&&0!=e.length?e[0]:t.documentElement}(n).appendChild(i),s}function Hs(){if(this&&this.Xb){var t=this.Xb;t&&"SCRIPT"==t.tagName&&Ks(t,!0,this.Ma)}}function Ks(t,e,n){null!=n&&a.clearTimeout(n),t.onload=l,t.onerror=l,t.onreadystatechange=l,e&&window.setTimeout((function(){t&&t.parentNode&&t.parentNode.removeChild(t)}),0)}var zs=0,Ws=1;function Js(t,e){var n="Jsloader error (code #"+t+")";e&&(n+=": "+e),P.call(this,n),this.code=t}function $s(t){this.f=t}function Xs(t,e,n){if(this.c=t,t=e||{},this.l=t.secureTokenEndpoint||"https://securetoken.googleapis.com/v1/token",this.m=t.secureTokenTimeout||Zs,this.g=mt(t.secureTokenHeaders||ta),this.h=t.firebaseEndpoint||"https://www.googleapis.com/identitytoolkit/v3/relyingparty/",this.i=t.identityPlatformEndpoint||"https://identitytoolkit.googleapis.com/v2/",this.v=t.firebaseTimeout||ea,this.a=mt(t.firebaseHeaders||na),n&&(this.a["X-Client-Version"]=n,this.g["X-Client-Version"]=n),n="Node"==Tr(),!(n=a.XMLHttpRequest||n&&r.Z.INTERNAL.node&&r.Z.INTERNAL.node.XMLHttpRequest)&&!Ir())throw new A("internal-error","The XMLHttpRequest compatibility library was not found.");this.f=void 0,Ir()?this.f=new ps(self):Er()?this.f=new $s(n):this.f=new Zo,this.b=null}E(Js,P),E($s,$o),$s.prototype.a=function(){return new this.f},$s.prototype.b=function(){return{}};var Qs,Ys="idToken",Zs=new Gr(3e4,6e4),ta={"Content-Type":"application/x-www-form-urlencoded"},ea=new Gr(3e4,6e4),na={"Content-Type":"application/json"};function ra(t,e){e?t.a["X-Firebase-Locale"]=e:delete t.a["X-Firebase-Locale"]}function ia(t,e){e&&(t.l=oa("https://securetoken.googleapis.com/v1/token",e),t.h=oa("https://www.googleapis.com/identitytoolkit/v3/relyingparty/",e),t.i=oa("https://identitytoolkit.googleapis.com/v2/",e))}function oa(t,e){return t=qn(t),e=qn(e.url),t.f=t.a+t.f,Ln(t,e.c),t.a=e.a,Mn(t,e.g),t.toString()}function sa(t,e){e?(t.a["X-Client-Version"]=e,t.g["X-Client-Version"]=e):(delete t.a["X-Client-Version"],delete t.g["X-Client-Version"])}function aa(t,e,n,r,i,o,s){(function(){var t=Rr();return!((t=kr(t)!=Ar?null:(t=t.match(/\sChrome\/(\d+)/i))&&2==t.length?parseInt(t[1],10):null)&&30>t||$t&&ae&&!(9<ae))})()||Ir()?t=_(t.u,t):(Qs||(Qs=new _e((function(t,e){!function(t,e){((window.gapi||{}).client||{}).request?t():(a[ca]=function(){((window.gapi||{}).client||{}).request?t():e(Error("CORS_UNSUPPORTED"))},function(t,e){Ms(t,null,e,void 0)}(Gs(kt(ua,{onload:ca})),(function(){e(Error("CORS_UNSUPPORTED"))})))}(t,e)}))),t=_(t.s,t)),t(e,n,r,i,o,s)}Xs.prototype.T=function(){return this.b},Xs.prototype.u=function(t,e,n,r,i,o){if(Ir()&&(void 0===a.fetch||void 0===a.Headers||void 0===a.Request))throw new A("operation-not-supported-in-this-environment","fetch, Headers and Request native APIs or equivalent Polyfills must be available to support HTTP requests from a Worker environment.");var s=new ws(this.f);if(o){s.g=Math.max(0,o);var u=setTimeout((function(){s.dispatchEvent("timeout")}),o)}Tn(s,"complete",(function(){u&&clearTimeout(u);var t=null;try{t=JSON.parse(function(t){try{return t.a?t.a.responseText:""}catch(e){return ds(t.b,"Can not get responseText: "+e.message),""}}(this))||null}catch(e){t=null}e&&e(t)})),En(s,"ready",(function(){u&&clearTimeout(u),ze(this)})),En(s,"timeout",(function(){u&&clearTimeout(u),ze(this),e&&e(null)})),function(t,e,n,r,i){if(t.a)throw Error("[goog.net.XhrIo] Object is active with another request="+t.l+"; newUri="+e);n=n?n.toUpperCase():"GET",t.l=e,t.h="",t.P=n,t.J=!1,t.c=!0,t.a=t.D?t.D.a():Ho.a(),t.C=t.D?Xo(t.D):Xo(Ho),t.a.onreadystatechange=_(t.Wb,t);try{ds(t.b,Ds(t,"Opening Xhr")),t.N=!0,t.a.open(n,String(e),!0),t.N=!1}catch(e){return ds(t.b,Ds(t,"Error opening Xhr: "+e.message)),void Ss(t,e)}e=r||"";var o=new Rn(t.headers);i&&function(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(d(t)||"string"==typeof t)H(t,e,void 0);else for(var n=Nn(t),r=Cn(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}(i,(function(t,e){o.set(e,t)})),i=function(t){t:{for(var e=Es,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(o.Y()),r=a.FormData&&e instanceof a.FormData,!J(Ts,n)||i||r||o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach((function(t,e){this.a.setRequestHeader(e,t)}),t),t.m&&(t.a.responseType=t.m),"withCredentials"in t.a&&t.a.withCredentials!==t.S&&(t.a.withCredentials=t.S);try{Ns(t),0<t.g&&(t.u=function(t){return $t&&se(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(t.a),ds(t.b,Ds(t,"Will abort after "+t.g+"ms if incomplete, xhr2 "+t.u)),t.u?(t.a.timeout=t.g,t.a.ontimeout=_(t.Ma,t)):t.s=An(t.Ma,t.g,t)),ds(t.b,Ds(t,"Sending request")),t.i=!0,t.a.send(e),t.i=!1}catch(e){ds(t.b,Ds(t,"Send error: "+e.message)),Ss(t,e)}}(s,t,n,r,i)};var ua=new bt(Tt,"https://apis.google.com/js/client.js?onload=%{onload}"),ca="__fcb"+Math.floor(1e6*Math.random()).toString();function ha(t){if("string"!=typeof(t=t.email)||!yr.test(t))throw new A("invalid-email")}function la(t){"email"in t&&ha(t)}function fa(t){if(!t[Ys]){if(t.mfaPendingCredential)throw new A("multi-factor-auth-required",null,mt(t));throw new A("internal-error")}}function da(t){if(t.phoneNumber||t.temporaryProof){if(!t.phoneNumber||!t.temporaryProof)throw new A("internal-error")}else{if(!t.sessionInfo)throw new A("missing-verification-id");if(!t.code)throw new A("missing-verification-code")}}Xs.prototype.s=function(t,e,n,r,i){var o=this;Qs.then((function(){window.gapi.client.setApiKey(o.c);var s=window.gapi.auth.getToken();window.gapi.auth.setToken(null),window.gapi.client.request({path:t,method:n,body:r,headers:i,authType:"none",callback:function(t){window.gapi.auth.setToken(s),e&&e(t)}})})).o((function(t){e&&e({error:{message:t&&t.message||"CORS_UNSUPPORTED"}})}))},Xs.prototype.Ab=function(){return nu(this,Ha,{})},Xs.prototype.Cb=function(t,e){return nu(this,Va,{idToken:t,email:e})},Xs.prototype.Db=function(t,e){return nu(this,Ga,{idToken:t,password:e})};var pa={displayName:"DISPLAY_NAME",photoUrl:"PHOTO_URL"};function ma(t){if(!t.phoneVerificationInfo)throw new A("internal-error");if(!t.phoneVerificationInfo.sessionInfo)throw new A("missing-verification-id");if(!t.phoneVerificationInfo.code)throw new A("missing-verification-code")}function va(t){if(!t.requestUri||!t.sessionId&&!t.postBody&&!t.pendingToken)throw new A("internal-error")}function ga(t,e){return e.oauthIdToken&&e.providerId&&0==e.providerId.indexOf("oidc.")&&!e.pendingToken&&(t.sessionId?e.nonce=t.sessionId:t.postBody&&tr(t=new Xn(t.postBody),"nonce")&&(e.nonce=t.get("nonce"))),e}function ya(t){var e=null;if(t.needConfirmation?(t.code="account-exists-with-different-credential",e=Jo(t)):"FEDERATED_USER_ID_ALREADY_LINKED"==t.errorMessage?(t.code="credential-already-in-use",e=Jo(t)):"EMAIL_EXISTS"==t.errorMessage?(t.code="email-already-in-use",e=Jo(t)):t.errorMessage&&(e=ru(t.errorMessage)),e)throw e;fa(t)}function ba(t,e){return e.returnIdpCredential=!0,nu(t,Wa,e)}function wa(t,e){return e.returnIdpCredential=!0,nu(t,$a,e)}function _a(t,e){return e.returnIdpCredential=!0,e.autoCreate=!1,nu(t,Ja,e)}function Ia(t){if(!t.oobCode)throw new A("invalid-action-code")}(t=Xs.prototype).Eb=function(t,e){var n={idToken:t},r=[];return dt(pa,(function(t,i){var o=e[i];null===o?r.push(t):i in e&&(n[i]=o)})),r.length&&(n.deleteAttribute=r),nu(this,Va,n)},t.wb=function(t,e){return gt(t={requestType:"PASSWORD_RESET",email:t},e),nu(this,ja,t)},t.xb=function(t,e){return gt(t={requestType:"EMAIL_SIGNIN",email:t},e),nu(this,Pa,t)},t.vb=function(t,e){return gt(t={requestType:"VERIFY_EMAIL",idToken:t},e),nu(this,La,t)},t.Fb=function(t,e,n){return gt(t={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:t,newEmail:e},n),nu(this,Ma,t)},t.gb=function(t){return nu(this,Ya,t)},t.ob=function(t,e){return nu(this,qa,{oobCode:t,newPassword:e})},t.Sa=function(t){return nu(this,Ea,{oobCode:t})},t.kb=function(t){return nu(this,Ta,{oobCode:t})};var Ta={endpoint:"setAccountInfo",A:Ia,Z:"email",B:!0},Ea={endpoint:"resetPassword",A:Ia,G:function(t){var e=t.requestType;if(!e||!t.email&&"EMAIL_SIGNIN"!=e&&"VERIFY_AND_CHANGE_EMAIL"!=e)throw new A("internal-error")},B:!0},Sa={endpoint:"signupNewUser",A:function(t){if(ha(t),!t.password)throw new A("weak-password")},G:fa,V:!0,B:!0},Aa={endpoint:"createAuthUri",B:!0},ka={endpoint:"deleteAccount",O:["idToken"]},Ca={endpoint:"setAccountInfo",O:["idToken","deleteProvider"],A:function(t){if(!Array.isArray(t.deleteProvider))throw new A("internal-error")}},Na={endpoint:"emailLinkSignin",O:["email","oobCode"],A:ha,G:fa,V:!0,B:!0},Ra={endpoint:"emailLinkSignin",O:["idToken","email","oobCode"],A:ha,G:fa,V:!0},Oa={endpoint:"accounts/mfaEnrollment:finalize",O:["idToken","phoneVerificationInfo"],A:ma,G:fa,B:!0,Na:!0},Da={endpoint:"accounts/mfaSignIn:finalize",O:["mfaPendingCredential","phoneVerificationInfo"],A:ma,G:fa,B:!0,Na:!0},xa={endpoint:"getAccountInfo"},Pa={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("EMAIL_SIGNIN"!=t.requestType)throw new A("internal-error");ha(t)},Z:"email",B:!0},La={endpoint:"getOobConfirmationCode",O:["idToken","requestType"],A:function(t){if("VERIFY_EMAIL"!=t.requestType)throw new A("internal-error")},Z:"email",B:!0},Ma={endpoint:"getOobConfirmationCode",O:["idToken","newEmail","requestType"],A:function(t){if("VERIFY_AND_CHANGE_EMAIL"!=t.requestType)throw new A("internal-error")},Z:"email",B:!0},ja={endpoint:"getOobConfirmationCode",O:["requestType"],A:function(t){if("PASSWORD_RESET"!=t.requestType)throw new A("internal-error");ha(t)},Z:"email",B:!0},Ua={mb:!0,endpoint:"getProjectConfig",Vb:"GET"},Fa={mb:!0,endpoint:"getRecaptchaParam",Vb:"GET",G:function(t){if(!t.recaptchaSiteKey)throw new A("internal-error")}},qa={endpoint:"resetPassword",A:Ia,Z:"email",B:!0},Ba={endpoint:"sendVerificationCode",O:["phoneNumber","recaptchaToken"],Z:"sessionInfo",B:!0},Va={endpoint:"setAccountInfo",O:["idToken"],A:la,V:!0},Ga={endpoint:"setAccountInfo",O:["idToken"],A:function(t){if(la(t),!t.password)throw new A("weak-password")},G:fa,V:!0},Ha={endpoint:"signupNewUser",G:fa,V:!0,B:!0},Ka={endpoint:"accounts/mfaEnrollment:start",O:["idToken","phoneEnrollmentInfo"],A:function(t){if(!t.phoneEnrollmentInfo)throw new A("internal-error");if(!t.phoneEnrollmentInfo.phoneNumber)throw new A("missing-phone-number");if(!t.phoneEnrollmentInfo.recaptchaToken)throw new A("missing-app-credential")},G:function(t){if(!t.phoneSessionInfo||!t.phoneSessionInfo.sessionInfo)throw new A("internal-error")},B:!0,Na:!0},za={endpoint:"accounts/mfaSignIn:start",O:["mfaPendingCredential","mfaEnrollmentId","phoneSignInInfo"],A:function(t){if(!t.phoneSignInInfo||!t.phoneSignInInfo.recaptchaToken)throw new A("missing-app-credential")},G:function(t){if(!t.phoneResponseInfo||!t.phoneResponseInfo.sessionInfo)throw new A("internal-error")},B:!0,Na:!0},Wa={endpoint:"verifyAssertion",A:va,Za:ga,G:ya,V:!0,B:!0},Ja={endpoint:"verifyAssertion",A:va,Za:ga,G:function(t){if(t.errorMessage&&"USER_NOT_FOUND"==t.errorMessage)throw new A("user-not-found");if(t.errorMessage)throw ru(t.errorMessage);fa(t)},V:!0,B:!0},$a={endpoint:"verifyAssertion",A:function(t){if(va(t),!t.idToken)throw new A("internal-error")},Za:ga,G:ya,V:!0},Xa={endpoint:"verifyCustomToken",A:function(t){if(!t.token)throw new A("invalid-custom-token")},G:fa,V:!0,B:!0},Qa={endpoint:"verifyPassword",A:function(t){if(ha(t),!t.password)throw new A("wrong-password")},G:fa,V:!0,B:!0},Ya={endpoint:"verifyPhoneNumber",A:da,G:fa,B:!0},Za={endpoint:"verifyPhoneNumber",A:function(t){if(!t.idToken)throw new A("internal-error");da(t)},G:function(t){if(t.temporaryProof)throw t.code="credential-already-in-use",Jo(t);fa(t)}},tu={Ib:{USER_NOT_FOUND:"user-not-found"},endpoint:"verifyPhoneNumber",A:da,G:fa,B:!0},eu={endpoint:"accounts/mfaEnrollment:withdraw",O:["idToken","mfaEnrollmentId"],G:function(t){if(!!t[Ys]^!!t.refreshToken)throw new A("internal-error")},B:!0,Na:!0};function nu(t,e,n){if(!function(t,e){if(!e||!e.length)return!0;if(!t)return!1;for(var n=0;n<e.length;n++){var r=t[e[n]];if(null==r||""===r)return!1}return!0}(n,e.O))return Ne(new A("internal-error"));var r,i=!!e.Na,o=e.Vb||"POST";return Ce(n).then(e.A).then((function(){return e.V&&(n.returnSecureToken=!0),e.B&&t.b&&void 0===n.tenantId&&(n.tenantId=t.b),function(t,e,n,r,i,o,s){var a=qn(e+n);Un(a,"key",t.c),s&&Un(a,"cb",Date.now().toString());var u="GET"==r;if(u)for(var c in i)i.hasOwnProperty(c)&&Un(a,c,i[c]);return new _e((function(e,n){aa(t,a.toString(),(function(t){t?t.error?n(iu(t,o||{})):e(t):n(new A("network-request-failed"))}),r,u?void 0:ir(Ur(i)),t.a,t.v.get())}))}(t,i?t.i:t.h,e.endpoint,o,n,e.Ib,e.mb||!1)})).then((function(t){return r=t,e.Za?e.Za(n,r):r})).then(e.G).then((function(){if(!e.Z)return r;if(!(e.Z in r))throw new A("internal-error");return r[e.Z]}))}function ru(t){return iu({error:{errors:[{message:t}],code:400,message:t}})}function iu(t,e){var n=(t.error&&t.error.errors&&t.error.errors[0]||{}).reason||"",r={keyInvalid:"invalid-api-key",ipRefererBlocked:"app-not-authorized"};if(n=r[n]?new A(r[n]):null)return n;for(var i in n=t.error&&t.error.message||"",gt(r={INVALID_CUSTOM_TOKEN:"invalid-custom-token",CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_EMAIL:"invalid-email",INVALID_PASSWORD:"wrong-password",USER_DISABLED:"user-disabled",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_OR_INVALID_NONCE:"missing-or-invalid-nonce",INVALID_MESSAGE_PAYLOAD:"invalid-message-payload",INVALID_RECIPIENT_EMAIL:"invalid-recipient-email",INVALID_SENDER:"invalid-sender",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",INVALID_PROVIDER_ID:"invalid-provider-id",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",CORS_UNSUPPORTED:"cors-unsupported",DYNAMIC_LINK_NOT_ACTIVATED:"dynamic-link-not-activated",INVALID_APP_ID:"invalid-app-id",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",WEAK_PASSWORD:"weak-password",OPERATION_NOT_ALLOWED:"operation-not-allowed",USER_CANCELLED:"user-cancelled",CAPTCHA_CHECK_FAILED:"captcha-check-failed",INVALID_APP_CREDENTIAL:"invalid-app-credential",INVALID_CODE:"invalid-verification-code",INVALID_PHONE_NUMBER:"invalid-phone-number",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_APP_CREDENTIAL:"missing-app-credential",MISSING_CODE:"missing-verification-code",MISSING_PHONE_NUMBER:"missing-phone-number",MISSING_SESSION_INFO:"missing-verification-id",QUOTA_EXCEEDED:"quota-exceeded",SESSION_EXPIRED:"code-expired",REJECTED_CREDENTIAL:"rejected-credential",INVALID_CONTINUE_URI:"invalid-continue-uri",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",MISSING_IOS_BUNDLE_ID:"missing-ios-bundle-id",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_DYNAMIC_LINK_DOMAIN:"invalid-dynamic-link-domain",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",INVALID_CERT_HASH:"invalid-cert-hash",UNSUPPORTED_TENANT_OPERATION:"unsupported-tenant-operation",INVALID_TENANT_ID:"invalid-tenant-id",TENANT_ID_MISMATCH:"tenant-id-mismatch",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",EMAIL_CHANGE_NEEDS_VERIFICATION:"email-change-needs-verification",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",UNSUPPORTED_FIRST_FACTOR:"unsupported-first-factor",UNVERIFIED_EMAIL:"unverified-email"},e||{}),e=(e=n.match(/^[^\s]+\s*:\s*([\s\S]*)$/))&&1<e.length?e[1]:void 0,r)if(0===n.indexOf(i))return new A(r[i],e);return!e&&t&&(e=jr(t)),new A("internal-error",e)}function ou(t){this.b=t,this.a=null,this.sb=function(t){return(cu||(cu=new _e((function(t,e){function n(){Vr(),Or("gapi.load")("gapi.iframes",{callback:t,ontimeout:function(){Vr(),e(Error("Network Error"))},timeout:au.get()})}if(Or("gapi.iframes.Iframe"))t();else if(Or("gapi.load"))n();else{var r="__iframefcb"+Math.floor(1e6*Math.random()).toString();a[r]=function(){Or("gapi.load")?n():e(Error("Network Error"))},Ce(Gs(r=kt(su,{onload:r}))).o((function(){e(Error("Network Error"))}))}})).o((function(t){throw cu=null,t})))).then((function(){return new _e((function(e,n){Or("gapi.iframes.getContext")().open({where:document.body,url:t.b,messageHandlersFilter:Or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"),attributes:{style:{position:"absolute",top:"-100px",width:"1px",height:"1px"}},dontclear:!0},(function(r){function i(){clearTimeout(o),e()}t.a=r,t.a.restyle({setHideOnLeave:!1});var o=setTimeout((function(){n(Error("Network Error"))}),uu.get());r.ping(i).then(i,(function(){n(Error("Network Error"))}))}))}))}))}(this)}var su=new bt(Tt,"https://apis.google.com/js/api.js?onload=%{onload}"),au=new Gr(3e4,6e4),uu=new Gr(5e3,15e3),cu=null;function hu(t,e,n,r){this.l=t,this.h=e,this.i=n,this.g=r,this.f=null,t=this.g?Bn((t=qn(this.g.url)).c,t.a,t.g,"/emulator/auth/iframe"):Bn("https",this.l,null,"/__/auth/iframe"),this.a=t,Un(this.a,"apiKey",this.h),Un(this.a,"appName",this.i),this.b=null,this.c=[]}function lu(t,e,n,r,i,o){this.u=t,this.s=e,this.c=n,this.m=r,this.v=o,this.i=this.g=this.l=null,this.a=i,this.h=this.f=null}function fu(t){try{return r.Z.app(t).auth().Ga()}catch(t){return[]}}function du(t,e,n,r,i,o){this.s=t,this.g=e,this.b=n,this.f=o,this.c=r||null,this.i=i||null,this.l=this.u=this.C=null,this.h=[],this.m=this.a=null}function pu(t){var e=lr();return function(t){return nu(t,Ua,{}).then((function(t){return t.authorizedDomains||[]}))}(t).then((function(t){t:{var n=qn(e),r=n.c;n=n.a;for(var i=0;i<t.length;i++){var o=t[i],s=n,a=r;if(0==o.indexOf("chrome-extension://")?s=qn(o).a==s&&"chrome-extension"==a:"http"!=a&&"https"!=a?s=!1:gr.test(o)?s=s==o:(o=o.split(".").join("\\."),s=new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)),s){t=!0;break t}}t=!1}if(!t)throw new zo(lr())}))}function mu(t){return t.m||(t.m=br().then((function(){if(!t.u){var e=t.c,n=t.i,r=fu(t.b),i=new hu(t.s,t.g,t.b,t.f);i.f=e,i.b=n,i.c=Y(r||[]),t.u=i.toString()}t.v=new ou(t.u),function(t){if(!t.v)throw Error("IfcHandler must be initialized!");!function(t,e){t.sb.then((function(){t.a.register("authEvent",e,Or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}(t.v,(function(e){var n={};if(e&&e.authEvent){var r=!1;for(e=Vo(e.authEvent),n=0;n<t.h.length;n++)r=t.h[n](e)||r;return(n={}).status=r?"ACK":"ERROR",Ce(n)}return n.status="ERROR",Ce(n)}))}(t)}))),t.m}function vu(t){return t.l||(t.C=t.c?Nr(t.c,fu(t.b)):null,t.l=new Xs(t.g,D(t.i),t.C),t.f&&ia(t.l,t.f)),t.l}function gu(t,e,n,r,i,o,s,a,u,c,h,l){return(t=new lu(t,e,n,r,i,l)).l=o,t.g=s,t.i=a,t.b=mt(u||null),t.f=c,t.zb(h).toString()}function yu(t){if(this.a=t||r.Z.INTERNAL.reactNative&&r.Z.INTERNAL.reactNative.AsyncStorage,!this.a)throw new A("internal-error","The React Native compatibility library was not found.");this.type="asyncStorage"}function bu(t){this.b=t,this.a={},this.f=_(this.c,this)}hu.prototype.toString=function(){return this.f?Un(this.a,"v",this.f):Zn(this.a.b,"v"),this.b?Un(this.a,"eid",this.b):Zn(this.a.b,"eid"),this.c.length?Un(this.a,"fw",this.c.join(",")):Zn(this.a.b,"fw"),this.a.toString()},lu.prototype.zb=function(t){return this.h=t,this},lu.prototype.toString=function(){if(this.v){var t=qn(this.v.url);t=Bn(t.c,t.a,t.g,"/emulator/auth/handler")}else t=Bn("https",this.u,null,"/__/auth/handler");if(Un(t,"apiKey",this.s),Un(t,"appName",this.c),Un(t,"authType",this.m),this.a.isOAuthProvider){var e=this.a;try{var n=r.Z.app(this.c).auth().la()}catch(t){n=null}for(var i in e.pb=n,Un(t,"providerId",this.a.providerId),e=Ur((n=this.a).Jb))e[i]=e[i].toString();i=n.Qc,e=mt(e);for(var o=0;o<i.length;o++){var s=i[o];s in e&&delete e[s]}n.qb&&n.pb&&!e[n.qb]&&(e[n.qb]=n.pb),pt(e)||Un(t,"customParameters",jr(e))}if("function"==typeof this.a.Rb&&(n=this.a.Rb()).length&&Un(t,"scopes",n.join(",")),this.l?Un(t,"redirectUrl",this.l):Zn(t.b,"redirectUrl"),this.g?Un(t,"eventId",this.g):Zn(t.b,"eventId"),this.i?Un(t,"v",this.i):Zn(t.b,"v"),this.b)for(var a in this.b)this.b.hasOwnProperty(a)&&!Fn(t,a)&&Un(t,a,this.b[a]);return this.h?Un(t,"tid",this.h):Zn(t.b,"tid"),this.f?Un(t,"eid",this.f):Zn(t.b,"eid"),(a=fu(this.c)).length&&Un(t,"fw",a.join(",")),t.toString()},(t=du.prototype).Pb=function(t,e,n){var r=new A("popup-closed-by-user"),i=new A("web-storage-unsupported"),o=this,s=!1;return this.ma().then((function(){(function(t){var e={type:"webStorageSupport"};return mu(t).then((function(){return function(t,e){return t.sb.then((function(){return new _e((function(n){t.a.send(e.type,e,n,Or("gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER"))}))}))}(t.v,e)})).then((function(t){if(t&&t.length&&void 0!==t[0].webStorageSupport)return t[0].webStorageSupport;throw Error()}))})(o).then((function(n){n||(t&&mr(t),e(i),s=!0)}))})).o((function(){})).then((function(){if(!s)return function(t){return new _e((function(e){return function n(){kn(2e3).then((function(){if(t&&!t.closed)return n();e()}))}()}))}(t)})).then((function(){if(!s)return kn(n).then((function(){e(r)}))}))},t.Yb=function(){var t=Rr();return!Mr(t)&&!Br(t)},t.Ub=function(){return!1},t.Nb=function(t,e,n,r,i,o,s,a){if(!t)return Ne(new A("popup-blocked"));if(s&&!Mr())return this.ma().o((function(e){mr(t),i(e)})),r(),Ce();this.a||(this.a=pu(vu(this)));var u=this;return this.a.then((function(){var e=u.ma().o((function(e){throw mr(t),i(e),e}));return r(),e})).then((function(){qo(n),s||fr(gu(u.s,u.g,u.b,e,n,null,o,u.c,void 0,u.i,a,u.f),t)})).o((function(t){throw"auth/network-request-failed"==t.code&&(u.a=null),t}))},t.Ob=function(t,e,n,r){this.a||(this.a=pu(vu(this)));var i=this;return this.a.then((function(){qo(e),fr(gu(i.s,i.g,i.b,t,e,lr(),n,i.c,void 0,i.i,r,i.f))})).o((function(t){throw"auth/network-request-failed"==t.code&&(i.a=null),t}))},t.ma=function(){var t=this;return mu(this).then((function(){return t.v.sb})).o((function(){throw t.a=null,new A("network-request-failed")}))},t.ac=function(){return!0},t.Ea=function(t){this.h.push(t)},t.Ta=function(t){X(this.h,(function(e){return e==t}))},(t=yu.prototype).get=function(t){return Ce(this.a.getItem(t)).then((function(t){return t&&Fr(t)}))},t.set=function(t,e){return Ce(this.a.setItem(t,jr(e)))},t.U=function(t){return Ce(this.a.removeItem(t))},t.ca=function(){},t.ia=function(){};var wu,_u=[];function Iu(t,e,n){pt(t.a)&&t.b.addEventListener("message",t.f),void 0===t.a[e]&&(t.a[e]=[]),t.a[e].push(n)}function Tu(t){this.a=t}function Eu(t){this.c=t,this.b=!1,this.a=[]}function Su(t,e,n,r){var i,o,s,a,u=n||{},c=null;if(t.b)return Ne(Error("connection_unavailable"));var h=r?800:50,l="undefined"!=typeof MessageChannel?new MessageChannel:null;return new _e((function(n,r){l?(i=Math.floor(Math.random()*Math.pow(10,20)).toString(),l.port1.start(),s=setTimeout((function(){r(Error("unsupported_event"))}),h),c={messageChannel:l,onMessage:o=function(t){t.data.eventId===i&&("ack"===t.data.status?(clearTimeout(s),a=setTimeout((function(){r(Error("timeout"))}),3e3)):"done"===t.data.status?(clearTimeout(a),void 0!==t.data.response?n(t.data.response):r(Error("unknown_error"))):(clearTimeout(s),clearTimeout(a),r(Error("invalid_response"))))}},t.a.push(c),l.port1.addEventListener("message",o),t.c.postMessage({eventType:e,eventId:i,data:u},[l.port2])):r(Error("connection_unavailable"))})).then((function(e){return Au(t,c),e})).o((function(e){throw Au(t,c),e}))}function Au(t,e){if(e){var n=e.messageChannel,r=e.onMessage;n&&(n.port1.removeEventListener("message",r),n.port1.close()),X(t.a,(function(t){return t==e}))}}function ku(){if(!Ou())throw new A("web-storage-unsupported");this.c={},this.a=[],this.b=0,this.m=a.indexedDB,this.type="indexedDB",this.g=this.v=this.f=this.l=null,this.s=!1,this.h=null;var t=this;Ir()&&self?(this.v=function(){var t=Ir()?self:null;if(H(_u,(function(n){n.b==t&&(e=n)})),!e){var e=new bu(t);_u.push(e)}return e}(),Iu(this.v,"keyChanged",(function(e,n){return Mu(t).then((function(e){return 0<e.length&&H(t.a,(function(t){t(e)})),{keyProcessed:J(e,n.key)}}))})),Iu(this.v,"ping",(function(){return Ce(["keyChanged"])}))):function(){var t=a.navigator;return t&&t.serviceWorker?Ce().then((function(){return t.serviceWorker.ready})).then((function(t){return t.active||null})).o((function(){return null})):Ce(null)}().then((function(e){(t.h=e)&&(t.g=new Eu(new Tu(e)),Su(t.g,"ping",null,!0).then((function(e){e[0].fulfilled&&J(e[0].value,"keyChanged")&&(t.s=!0)})).o((function(){})))}))}function Cu(t){return new _e((function(e,n){var r=t.m.open("firebaseLocalStorageDb",1);r.onerror=function(t){try{t.preventDefault()}catch(t){}n(Error(t.target.error))},r.onupgradeneeded=function(t){t=t.target.result;try{t.createObjectStore("firebaseLocalStorage",{keyPath:"fbase_key"})}catch(t){n(t)}},r.onsuccess=function(r){(r=r.target.result).objectStoreNames.contains("firebaseLocalStorage")?e(r):function(t){return new _e((function(e,n){var r=t.m.deleteDatabase("firebaseLocalStorageDb");r.onsuccess=function(){e()},r.onerror=function(t){n(Error(t.target.error))}}))}(t).then((function(){return Cu(t)})).then((function(t){e(t)})).o((function(t){n(t)}))}}))}function Nu(t){return t.i||(t.i=Cu(t)),t.i}function Ru(t,e){var n=0;return new _e((function r(i,o){Nu(t).then(e).then(i).o((function(e){if(!(3<++n))return Nu(t).then((function(e){return e.close(),t.i=void 0,r(i,o)})).o((function(t){o(t)}));o(e)}))}))}function Ou(){try{return!!a.indexedDB}catch(t){return!1}}function Du(t){return t.objectStore("firebaseLocalStorage")}function xu(t,e){return t.transaction(["firebaseLocalStorage"],e?"readwrite":"readonly")}function Pu(t){return new _e((function(e,n){t.onsuccess=function(t){t&&t.target?e(t.target.result):e()},t.onerror=function(t){n(t.target.error)}}))}function Lu(t,e){return t.g&&t.h&&function(){var t=a.navigator;return t&&t.serviceWorker&&t.serviceWorker.controller||null}()===t.h?Su(t.g,"keyChanged",{key:e},t.s).then((function(){})).o((function(){})):Ce()}function Mu(t){return Nu(t).then((function(t){var e=Du(xu(t,!1));return e.getAll?Pu(e.getAll()):new _e((function(t,n){var r=[],i=e.openCursor();i.onsuccess=function(e){(e=e.target.result)?(r.push(e.value),e.continue()):t(r)},i.onerror=function(t){n(t.target.error)}}))})).then((function(e){var n={},r=[];if(0==t.b){for(r=0;r<e.length;r++)n[e[r].fbase_key]=e[r].value;r=dr(t.c,n),t.c=n}return r}))}function ju(t){t.l&&t.l.cancel("STOP_EVENT"),t.f&&(clearTimeout(t.f),t.f=null)}function Uu(t){var e=this,n=null;this.a=[],this.type="indexedDB",this.c=t,this.b=Ce().then((function(){if(Ou()){var t=qr(),r="__sak"+t;return wu||(wu=new ku),(n=wu).set(r,t).then((function(){return n.get(r)})).then((function(e){if(e!==t)throw Error("indexedDB not supported!");return n.U(r)})).then((function(){return n})).o((function(){return e.c}))}return e.c})).then((function(t){return e.type=t.type,t.ca((function(t){H(e.a,(function(e){e(t)}))})),t}))}function Fu(){this.a={},this.type="inMemory"}function qu(){if(!function(){var t="Node"==Tr();if(!(t=Bu()||t&&r.Z.INTERNAL.node&&r.Z.INTERNAL.node.localStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Tr())throw new A("internal-error","The LocalStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=Bu()||r.Z.INTERNAL.node.localStorage,this.type="localStorage"}function Bu(){try{var t=a.localStorage,e=qr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Vu(){this.type="nullStorage"}function Gu(){if(!function(){var t="Node"==Tr();if(!(t=Hu()||t&&r.Z.INTERNAL.node&&r.Z.INTERNAL.node.sessionStorage))return!1;try{return t.setItem("__sak","1"),t.removeItem("__sak"),!0}catch(t){return!1}}()){if("Node"==Tr())throw new A("internal-error","The SessionStorage compatibility library was not found.");throw new A("web-storage-unsupported")}this.a=Hu()||r.Z.INTERNAL.node.sessionStorage,this.type="sessionStorage"}function Hu(){try{var t=a.sessionStorage,e=qr();return t&&(t.setItem(e,"1"),t.removeItem(e)),t}catch(t){return null}}function Ku(){var t={};t.Browser=Ju,t.Node=$u,t.ReactNative=Xu,t.Worker=Qu,this.a=t[Tr()]}bu.prototype.c=function(t){var e=t.data.eventType,n=t.data.eventId,r=this.a[e];if(r&&0<r.length){t.ports[0].postMessage({status:"ack",eventId:n,eventType:e,response:null});var i=[];H(r,(function(e){i.push(Ce().then((function(){return e(t.origin,t.data.data)})))})),Oe(i).then((function(r){var i=[];H(r,(function(t){i.push({fulfilled:t.Qb,value:t.value,reason:t.reason?t.reason.message:void 0})})),H(i,(function(t){for(var e in t)void 0===t[e]&&delete t[e]})),t.ports[0].postMessage({status:"done",eventId:n,eventType:e,response:i})}))}},Tu.prototype.postMessage=function(t,e){this.a.postMessage(t,e)},Eu.prototype.close=function(){for(;0<this.a.length;)Au(this,this.a[0]);this.b=!0},(t=ku.prototype).set=function(t,e){var n=this,r=!1;return Ru(this,(function(e){return Pu((e=Du(xu(e,!0))).get(t))})).then((function(i){return Ru(n,(function(o){if(o=Du(xu(o,!0)),i)return i.value=e,Pu(o.put(i));n.b++,r=!0;var s={};return s.fbase_key=t,s.value=e,Pu(o.add(s))}))})).then((function(){return n.c[t]=e,Lu(n,t)})).oa((function(){r&&n.b--}))},t.get=function(t){return Ru(this,(function(e){return Pu(Du(xu(e,!1)).get(t))})).then((function(t){return t&&t.value}))},t.U=function(t){var e=this,n=!1;return Ru(this,(function(r){return n=!0,e.b++,Pu(Du(xu(r,!0)).delete(t))})).then((function(){return delete e.c[t],Lu(e,t)})).oa((function(){n&&e.b--}))},t.ca=function(t){0==this.a.length&&function(t){ju(t),function e(){t.f=setTimeout((function(){t.l=Mu(t).then((function(e){0<e.length&&H(t.a,(function(t){t(e)}))})).then((function(){e()})).o((function(t){"STOP_EVENT"!=t.message&&e()}))}),800)}()}(this),this.a.push(t)},t.ia=function(t){X(this.a,(function(e){return e==t})),0==this.a.length&&ju(this)},(t=Uu.prototype).get=function(t){return this.b.then((function(e){return e.get(t)}))},t.set=function(t,e){return this.b.then((function(n){return n.set(t,e)}))},t.U=function(t){return this.b.then((function(e){return e.U(t)}))},t.ca=function(t){this.a.push(t)},t.ia=function(t){X(this.a,(function(e){return e==t}))},(t=Fu.prototype).get=function(t){return Ce(this.a[t])},t.set=function(t,e){return this.a[t]=e,Ce()},t.U=function(t){return delete this.a[t],Ce()},t.ca=function(){},t.ia=function(){},(t=qu.prototype).get=function(t){var e=this;return Ce().then((function(){return Fr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ce().then((function(){var r=jr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ce().then((function(){e.a.removeItem(t)}))},t.ca=function(t){a.window&&hn(a.window,"storage",t)},t.ia=function(t){a.window&&dn(a.window,"storage",t)},(t=Vu.prototype).get=function(){return Ce(null)},t.set=function(){return Ce()},t.U=function(){return Ce()},t.ca=function(){},t.ia=function(){},(t=Gu.prototype).get=function(t){var e=this;return Ce().then((function(){return Fr(e.a.getItem(t))}))},t.set=function(t,e){var n=this;return Ce().then((function(){var r=jr(e);null===r?n.U(t):n.a.setItem(t,r)}))},t.U=function(t){var e=this;return Ce().then((function(){e.a.removeItem(t)}))},t.ca=function(){},t.ia=function(){};var zu,Wu,Ju={F:qu,cb:Gu},$u={F:qu,cb:Gu},Xu={F:yu,cb:Vu},Qu={F:qu,cb:Vu},Yu={rd:"local",NONE:"none",td:"session"};function Zu(){var t=!(Br(Rr())||!_r()),e=Mr(),n=Dr();this.m=t,this.h=e,this.l=n,this.a={},zu||(zu=new Ku),t=zu;try{this.g=!hr()&&zr()||!a.indexedDB?new t.a.F:new Uu(Ir()?new Fu:new t.a.F)}catch(t){this.g=new Fu,this.h=!0}try{this.i=new t.a.cb}catch(t){this.i=new Fu}this.v=new Fu,this.f=_(this.Zb,this),this.b={}}function tc(){return Wu||(Wu=new Zu),Wu}function ec(t,e){switch(e){case"session":return t.i;case"none":return t.v;default:return t.g}}function nc(t,e){return"firebase:"+t.name+(e?":"+e:"")}function rc(t,e,n){return n=nc(e,n),"local"==e.F&&(t.b[n]=null),ec(t,e.F).U(n)}function ic(t){t.c&&(clearInterval(t.c),t.c=null)}function oc(t){this.a=t,this.b=tc()}(t=Zu.prototype).get=function(t,e){return ec(this,t.F).get(nc(t,e))},t.set=function(t,e,n){var r=nc(t,n),i=this,o=ec(this,t.F);return o.set(r,e).then((function(){return o.get(r)})).then((function(e){"local"==t.F&&(i.b[r]=e)}))},t.addListener=function(t,e,n){t=nc(t,e),this.l&&(this.b[t]=a.localStorage.getItem(t)),pt(this.a)&&(ec(this,"local").ca(this.f),this.h||(hr()||!zr())&&a.indexedDB||!this.l||function(t){ic(t),t.c=setInterval((function(){for(var e in t.a){var n=a.localStorage.getItem(e),r=t.b[e];n!=r&&(t.b[e]=n,n=new Ye({type:"storage",key:e,target:window,oldValue:r,newValue:n,a:!0}),t.Zb(n))}}),1e3)}(this)),this.a[t]||(this.a[t]=[]),this.a[t].push(n)},t.removeListener=function(t,e,n){t=nc(t,e),this.a[t]&&(X(this.a[t],(function(t){return t==n})),0==this.a[t].length&&delete this.a[t]),pt(this.a)&&(ec(this,"local").ia(this.f),ic(this))},t.Zb=function(t){if(t&&t.g){var e=t.a.key;if(null==e)for(var n in this.a){var r=this.b[n];void 0===r&&(r=null);var i=a.localStorage.getItem(n);i!==r&&(this.b[n]=i,this.nb(n))}else if(0==e.indexOf("firebase:")&&this.a[e]){if(void 0!==t.a.a?ec(this,"local").ia(this.f):ic(this),this.m)if(n=a.localStorage.getItem(e),(r=t.a.newValue)!==n)null!==r?a.localStorage.setItem(e,r):a.localStorage.removeItem(e);else if(this.b[e]===r&&void 0===t.a.a)return;var o=this;n=function(){void 0===t.a.a&&o.b[e]===a.localStorage.getItem(e)||(o.b[e]=a.localStorage.getItem(e),o.nb(e))},$t&&ae&&10==ae&&a.localStorage.getItem(e)!==t.a.newValue&&t.a.newValue!==t.a.oldValue?setTimeout(n,10):n()}}else H(t,_(this.nb,this))},t.nb=function(t){this.a[t]&&H(this.a[t],(function(t){t()}))};var sc,ac={name:"authEvent",F:"local"};function uc(){this.a=tc()}function cc(t,e){this.b=hc,this.f=a.Uint8Array?new Uint8Array(this.b):Array(this.b),this.g=this.c=0,this.a=[],this.i=t,this.h=e,this.l=a.Int32Array?new Int32Array(64):Array(64),void 0===sc&&(sc=a.Int32Array?new Int32Array(gc):gc),this.reset()}E(cc,(function(){this.b=-1}));for(var hc=64,lc=hc-1,fc=[],dc=0;dc<lc;dc++)fc[dc]=0;var pc=Q(128,fc);function mc(t){for(var e=t.f,n=t.l,r=0,i=0;i<e.length;)n[r++]=e[i]<<24|e[i+1]<<16|e[i+2]<<8|e[i+3],i=4*r;for(e=16;64>e;e++){i=0|n[e-15],r=0|n[e-2];var o=(0|n[e-16])+((i>>>7|i<<25)^(i>>>18|i<<14)^i>>>3)|0,s=(0|n[e-7])+((r>>>17|r<<15)^(r>>>19|r<<13)^r>>>10)|0;n[e]=o+s|0}r=0|t.a[0],i=0|t.a[1];var a=0|t.a[2],u=0|t.a[3],c=0|t.a[4],h=0|t.a[5],l=0|t.a[6];for(o=0|t.a[7],e=0;64>e;e++){var f=((r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10))+(r&i^r&a^i&a)|0;s=(o=o+((c>>>6|c<<26)^(c>>>11|c<<21)^(c>>>25|c<<7))|0)+((s=(s=c&h^~c&l)+(0|sc[e])|0)+(0|n[e])|0)|0,o=l,l=h,h=c,c=u+s|0,u=a,a=i,i=r,r=s+f|0}t.a[0]=t.a[0]+r|0,t.a[1]=t.a[1]+i|0,t.a[2]=t.a[2]+a|0,t.a[3]=t.a[3]+u|0,t.a[4]=t.a[4]+c|0,t.a[5]=t.a[5]+h|0,t.a[6]=t.a[6]+l|0,t.a[7]=t.a[7]+o|0}function vc(t,e,n){void 0===n&&(n=e.length);var r=0,i=t.c;if("string"==typeof e)for(;r<n;)t.f[i++]=e.charCodeAt(r++),i==t.b&&(mc(t),i=0);else{if(!d(e))throw Error("message must be string or array");for(;r<n;){var o=e[r++];if(!("number"==typeof o&&0<=o&&255>=o&&o==(0|o)))throw Error("message must be a byte array");t.f[i++]=o,i==t.b&&(mc(t),i=0)}}t.c=i,t.g+=n}cc.prototype.reset=function(){this.g=this.c=0,this.a=a.Int32Array?new Int32Array(this.h):Y(this.h)};var gc=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function yc(){cc.call(this,8,bc)}E(yc,cc);var bc=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];function wc(t,e,n,r,i,o){this.v=t,this.i=e,this.l=n,this.m=r||null,this.u=i||null,this.s=o,this.h=e+":"+n,this.C=new uc,this.g=new oc(this.h),this.f=null,this.b=[],this.a=this.c=null}function _c(t){return new A("invalid-cordova-configuration",t)}function Ic(t,e){for(var n=0;n<t.b.length;n++)try{t.b[n](e)}catch(t){}}function Tc(t){return t.f||(t.f=t.ma().then((function(){return new _e((function(e){t.Ea((function n(r){return e(r),t.Ta(n),!1})),function(t){function e(e){r=!0,i&&i.cancel(),Ec(t).then((function(r){var i=n;if(r&&e&&e.url){var o=null;-1!=(i=oo(e.url)).indexOf("/__/auth/callback")&&(o=(o="object"==typeof(o=Fr(Fn(o=qn(i),"firebaseError")||null))?k(o):null)?new Bo(r.c,r.b,null,null,o,null,r.T()):new Bo(r.c,r.b,i,r.f,null,null,r.T())),i=o||n}Ic(t,i)}))}var n=new Bo("unknown",null,null,null,new A("no-auth-event")),r=!1,i=kn(500).then((function(){return Ec(t).then((function(){r||Ic(t,n)}))})),o=a.handleOpenURL;a.handleOpenURL=function(t){if(0==t.toLowerCase().indexOf(Or("BuildInfo.packageName",a).toLowerCase()+"://")&&e({url:t}),"function"==typeof o)try{o(t)}catch(t){console.error(t)}},Ko||(Ko=new Go),function(t){var e=Ko;e.a.push(t),e.b||(e.b=function(t){for(var n=0;n<e.a.length;n++)e.a[n](t)},"function"==typeof(t=Or("universalLinks.subscribe",a))&&t(null,e.b))}(e)}(t)}))}))),t.f}function Ec(t){var e=null;return function(t){return t.b.get(ac,t.a).then((function(t){return Vo(t)}))}(t.g).then((function(n){return e=n,rc((n=t.g).b,ac,n.a)})).then((function(){return e}))}function Sc(t){this.a=t,this.b=tc()}(t=wc.prototype).ma=function(){return this.Ia?this.Ia:this.Ia=(wr(void 0)?br().then((function(){return new _e((function(t,e){var n=a.document,r=setTimeout((function(){e(Error("Cordova framework is not ready."))}),1e3);n.addEventListener("deviceready",(function(){clearTimeout(r),t()}),!1)}))})):Ne(Error("Cordova must run in an Android or iOS file scheme."))).then((function(){if("function"!=typeof Or("universalLinks.subscribe",a))throw _c("cordova-universal-links-plugin-fix is not installed");if(void 0===Or("BuildInfo.packageName",a))throw _c("cordova-plugin-buildinfo is not installed");if("function"!=typeof Or("cordova.plugins.browsertab.openUrl",a))throw _c("cordova-plugin-browsertab is not installed");if("function"!=typeof Or("cordova.InAppBrowser.open",a))throw _c("cordova-plugin-inappbrowser is not installed")}),(function(){throw new A("cordova-not-ready")}))},t.Pb=function(t,e){return e(new A("operation-not-supported-in-this-environment")),Ce()},t.Nb=function(){return Ne(new A("operation-not-supported-in-this-environment"))},t.ac=function(){return!1},t.Yb=function(){return!0},t.Ub=function(){return!0},t.Ob=function(t,e,n,r){if(this.c)return Ne(new A("redirect-operation-pending"));var i=this,o=a.document,s=null,u=null,c=null,h=null;return this.c=Ce().then((function(){return qo(e),Tc(i)})).then((function(){return function(t,e,n,r,i){var o=function(){for(var t=20,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}(),s=new Bo(e,r,null,o,new A("no-auth-event"),null,i),u=Or("BuildInfo.packageName",a);if("string"!=typeof u)throw new A("invalid-cordova-configuration");var c=Or("BuildInfo.displayName",a),h={};if(Rr().toLowerCase().match(/iphone|ipad|ipod/))h.ibi=u;else{if(!Rr().toLowerCase().match(/android/))return Ne(new A("operation-not-supported-in-this-environment"));h.apn=u}c&&(h.appDisplayName=c),o=function(t){var e=new yc;vc(e,t),t=[];var n=8*e.g;56>e.c?vc(e,pc,56-e.c):vc(e,pc,e.b-(e.c-56));for(var r=63;56<=r;r--)e.f[r]=255&n,n/=256;for(mc(e),r=n=0;r<e.i;r++)for(var i=24;0<=i;i-=8)t[n++]=e.a[r]>>i&255;return function(t){return z(t,(function(t){return 1<(t=t.toString(16)).length?t:"0"+t})).join("")}(t)}(o),h.sessionId=o;var l=gu(t.v,t.i,t.l,e,n,null,r,t.m,h,t.u,i,t.s);return t.ma().then((function(){var e=t.h;return t.C.a.set(ac,s.w(),e)})).then((function(){var e=Or("cordova.plugins.browsertab.isAvailable",a);if("function"!=typeof e)throw new A("invalid-cordova-configuration");var n=null;e((function(e){if(e){if("function"!=typeof(n=Or("cordova.plugins.browsertab.openUrl",a)))throw new A("invalid-cordova-configuration");n(l)}else{if("function"!=typeof(n=Or("cordova.InAppBrowser.open",a)))throw new A("invalid-cordova-configuration");e=Rr(),t.a=n(l,e.match(/(iPad|iPhone|iPod).*OS 7_\d/i)||e.match(/(iPad|iPhone|iPod).*OS 8_\d/i)?"_blank":"_system","location=yes")}}))}))}(i,t,e,n,r)})).then((function(){return new _e((function(t,e){u=function(){var e=Or("cordova.plugins.browsertab.close",a);return t(),"function"==typeof e&&e(),i.a&&"function"==typeof i.a.close&&(i.a.close(),i.a=null),!1},i.Ea(u),c=function(){s||(s=kn(2e3).then((function(){e(new A("redirect-cancelled-by-user"))})))},h=function(){Hr()&&c()},o.addEventListener("resume",c,!1),Rr().toLowerCase().match(/android/)||o.addEventListener("visibilitychange",h,!1)})).o((function(t){return Ec(i).then((function(){throw t}))}))})).oa((function(){c&&o.removeEventListener("resume",c,!1),h&&o.removeEventListener("visibilitychange",h,!1),s&&s.cancel(),u&&i.Ta(u),i.c=null}))},t.Ea=function(t){this.b.push(t),Tc(this).o((function(e){"auth/invalid-cordova-configuration"===e.code&&(e=new Bo("unknown",null,null,null,new A("no-auth-event")),t(e))}))},t.Ta=function(t){X(this.b,(function(e){return e==t}))};var Ac={name:"pendingRedirect",F:"session"};function kc(t){return rc(t.b,Ac,t.a)}function Cc(t,e,n,r){this.i={},this.u=0,this.D=t,this.v=e,this.m=n,this.J=r,this.h=[],this.f=!1,this.l=_(this.s,this),this.b=new Gc,this.C=new Jc,this.g=new Sc(Bc(this.v,this.m)),this.c={},this.c.unknown=this.b,this.c.signInViaRedirect=this.b,this.c.linkViaRedirect=this.b,this.c.reauthViaRedirect=this.b,this.c.signInViaPopup=this.C,this.c.linkViaPopup=this.C,this.c.reauthViaPopup=this.C,this.a=Nc(this.D,this.v,this.m,C,this.J)}function Nc(t,e,n,i,o){var s=r.Z.SDK_VERSION||null;return wr()?new wc(t,e,n,s,i,o):new du(t,e,n,s,i,o)}function Rc(t){t.f||(t.f=!0,t.a.Ea(t.l));var e=t.a;return t.a.ma().o((function(n){throw t.a==e&&t.reset(),n}))}function Oc(t){t.a.Yb()&&Rc(t).o((function(e){var n=new Bo("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));jc(e)&&t.s(n)})),t.a.Ub()||Hc(t.b)}function Dc(t,e){J(t.h,e)||t.h.push(e),t.f||function(t){return t.b.get(Ac,t.a).then((function(t){return"pending"==t}))}(t.g).then((function(e){e?kc(t.g).then((function(){Rc(t).o((function(e){var n=new Bo("unknown",null,null,null,new A("operation-not-supported-in-this-environment"));jc(e)&&t.s(n)}))})):Oc(t)})).o((function(){Oc(t)}))}function xc(t,e){X(t.h,(function(t){return t==e}))}Cc.prototype.reset=function(){this.f=!1,this.a.Ta(this.l),this.a=Nc(this.D,this.v,this.m,null,this.J),this.i={}},Cc.prototype.s=function(t){if(!t)throw new A("invalid-auth-event");if(6e5<=Date.now()-this.u&&(this.i={},this.u=0),t&&t.getUid()&&this.i.hasOwnProperty(t.getUid()))return!1;for(var e=!1,n=0;n<this.h.length;n++){var r=this.h[n];if(r.Gb(t.c,t.b)){(e=this.c[t.c])&&(e.h(t,r),t&&(t.f||t.b)&&(this.i[t.getUid()]=!0,this.u=Date.now())),e=!0;break}}return Hc(this.b),e};var Pc=new Gr(2e3,1e4),Lc=new Gr(3e4,6e4);function Mc(t,e,n,r,i,o,s){return t.a.Nb(e,n,r,(function(){t.f||(t.f=!0,t.a.Ea(t.l))}),(function(){t.reset()}),i,o,s)}function jc(t){return!(!t||"auth/cordova-not-ready"!=t.code)}function Uc(t,e,n,r,i){var o;return function(t){return t.b.set(Ac,"pending",t.a)}(t.g).then((function(){return t.a.Ob(e,n,r,i).o((function(e){if(jc(e))throw new A("operation-not-supported-in-this-environment");return o=e,kc(t.g).then((function(){throw o}))})).then((function(){return t.a.ac()?new _e((function(){})):kc(t.g).then((function(){return t.ra()})).then((function(){})).o((function(){}))}))}))}function Fc(t,e,n,r,i){return t.a.Pb(r,(function(t){e.na(n,null,t,i)}),Pc.get())}Cc.prototype.ra=function(){return this.b.ra()};var qc={};function Bc(t,e,n){return t=t+":"+e,n&&(t=t+":"+n.url),t}function Vc(t,e,n,r){var i=Bc(e,n,r);return qc[i]||(qc[i]=new Cc(t,e,n,r)),qc[i]}function Gc(){this.b=null,this.f=[],this.c=[],this.a=null,this.i=this.g=!1}function Hc(t){t.g||(t.g=!0,Wc(t,!1,null,null))}function Kc(t){t.g&&!t.i&&Wc(t,!1,null,null)}function zc(t,e){if(t.b=function(){return Ce(e)},t.f.length)for(var n=0;n<t.f.length;n++)t.f[n](e)}function Wc(t,e,n,r){e?r?function(t,e){if(t.b=function(){return Ne(e)},t.c.length)for(var n=0;n<t.c.length;n++)t.c[n](e)}(t,r):zc(t,n):zc(t,{user:null}),t.f=[],t.c=[]}function Jc(){}function $c(){this.jb=!1,Object.defineProperty(this,"appVerificationDisabled",{get:function(){return this.jb},set:function(t){this.jb=t},enumerable:!1})}function Xc(t,e){this.a=e,Qr(this,"verificationId",t)}function Qc(t,e,n,r){return new jo(t).gb(e,n).then((function(t){return new Xc(t,r)}))}function Yc(t){var e=Ki(t);if(!(e&&e.exp&&e.auth_time&&e.iat))throw new A("internal-error","An internal error occurred. The token obtained by Firebase appears to be malformed. Please retry the operation.");Yr(this,{token:t,expirationTime:Kr(1e3*e.exp),authTime:Kr(1e3*e.auth_time),issuedAtTime:Kr(1e3*e.iat),signInProvider:e.firebase&&e.firebase.sign_in_provider?e.firebase.sign_in_provider:null,signInSecondFactor:e.firebase&&e.firebase.sign_in_second_factor?e.firebase.sign_in_second_factor:null,claims:e})}function Zc(t,e,n){var r=e&&e[eh];if(!r)throw new A("argument-error","Internal assert: Invalid MultiFactorResolver");this.a=t,this.f=mt(e),this.g=n,this.c=new so(null,r),this.b=[];var i=this;H(e[th]||[],(function(t){(t=ni(t))&&i.b.push(t)})),Qr(this,"auth",this.a),Qr(this,"session",this.c),Qr(this,"hints",this.b)}Gc.prototype.reset=function(){this.b=null,this.a&&(this.a.cancel(),this.a=null)},Gc.prototype.h=function(t,e){if(t){this.reset(),this.g=!0;var n=t.c,r=t.b,i=t.a&&"auth/web-storage-unsupported"==t.a.code,o=t.a&&"auth/operation-not-supported-in-this-environment"==t.a.code;this.i=!(!i&&!o),"unknown"!=n||i||o?t.a?(Wc(this,!0,null,t.a),Ce()):e.Fa(n,r)?function(t,e,n){n=n.Fa(e.c,e.b);var r=e.g,i=e.f,o=e.i,s=e.T(),a=!!e.c.match(/Redirect$/);n(r,i,s,o).then((function(e){Wc(t,a,e,null)})).o((function(e){Wc(t,a,null,e)}))}(this,t,e):Ne(new A("invalid-auth-event")):(Wc(this,!1,null,null),Ce())}else Ne(new A("invalid-auth-event"))},Gc.prototype.ra=function(){var t=this;return new _e((function(e,n){t.b?t.b().then(e,n):(t.f.push(e),t.c.push(n),function(t){var e=new A("timeout");t.a&&t.a.cancel(),t.a=kn(Lc.get()).then((function(){t.b||(t.g=!0,Wc(t,!0,null,e))}))}(t))}))},Jc.prototype.h=function(t,e){if(t){var n=t.c,r=t.b;t.a?(e.na(t.c,null,t.a,t.b),Ce()):e.Fa(n,r)?function(t,e){var n=t.b,r=t.c;e.Fa(r,n)(t.g,t.f,t.T(),t.i).then((function(t){e.na(r,t,null,n)})).o((function(t){e.na(r,null,t,n)}))}(t,e):Ne(new A("invalid-auth-event"))}else Ne(new A("invalid-auth-event"))},Xc.prototype.confirm=function(t){return t=Uo(this.verificationId,t),this.a(t)};var th="mfaInfo",eh="mfaPendingCredential";function nh(t,e,n,r){A.call(this,"multi-factor-auth-required",r,e),this.b=new Zc(t,e,n),Qr(this,"resolver",this.b)}function rh(t,e,n){if(t&&m(t.serverResponse)&&"auth/multi-factor-auth-required"===t.code)try{return new nh(e,t.serverResponse,n,t.message)}catch(t){}return null}function ih(){}function oh(t){Qr(this,"factorId",t.fa),this.a=t}function sh(t){if(oh.call(this,t),this.a.fa!=jo.PROVIDER_ID)throw new A("argument-error","firebase.auth.PhoneMultiFactorAssertion requires a valid firebase.auth.PhoneAuthCredential")}function ah(t,e){for(var n in Qe.call(this,t),e)this[n]=e[n]}function uh(t,e){this.a=t,this.b=[],this.c=_(this.yc,this),hn(this.a,"userReloaded",this.c);var n=[];e&&e.multiFactor&&e.multiFactor.enrolledFactors&&H(e.multiFactor.enrolledFactors,(function(t){var e=null,r={};if(t){t.uid&&(r[oi]=t.uid),t.displayName&&(r[ri]=t.displayName),t.enrollmentTime&&(r[ii]=new Date(t.enrollmentTime).toISOString()),t.phoneNumber&&(r[si]=t.phoneNumber);try{e=new ai(r)}catch(t){}t=e}else t=null;t&&n.push(t)})),ch(this,n)}function ch(t,e){t.b=e,Qr(t,"enrolledFactors",e)}function hh(t,e,n){if(this.h=t,this.i=e,this.g=n,this.c=3e4,this.f=96e4,this.b=null,this.a=this.c,this.f<this.c)throw Error("Proactive refresh lower bound greater than upper bound!")}function lh(t,e){t.stop(),t.b=kn(function(t,e){return e?(t.a=t.c,t.g()):(e=t.a,t.a*=2,t.a>t.f&&(t.a=t.f),e)}(t,e)).then((function(){return function(){var t=a.document,e=null;return Hr()||!t?Ce():new _e((function(n){e=function(){Hr()&&(t.removeEventListener("visibilitychange",e,!1),n())},t.addEventListener("visibilitychange",e,!1)})).o((function(n){throw t.removeEventListener("visibilitychange",e,!1),n}))}()})).then((function(){return t.h()})).then((function(){lh(t,!0)})).o((function(e){t.i(e)&&lh(t,!1)}))}function fh(t){this.f=t,this.b=this.a=null,this.c=Date.now()}function dh(t,e){void 0===e&&(e=t.b?(e=t.b).a-e.g:0),t.c=Date.now()+1e3*e}function ph(t,e){t.b=Hi(e[Ys]||""),t.a=e.refreshToken,dh(t,void 0!==(e=e.expiresIn)?Number(e):void 0)}function mh(t,e){this.a=t||null,this.b=e||null,Yr(this,{lastSignInTime:Kr(e||null),creationTime:Kr(t||null)})}function vh(t,e,n,r,i,o){Yr(this,{uid:t,displayName:r||null,photoURL:i||null,email:n||null,phoneNumber:o||null,providerId:e})}function gh(t,e,n){this.N=[],this.l=t.apiKey,this.m=t.appName,this.s=t.authDomain||null;var i=r.Z.SDK_VERSION?Nr(r.Z.SDK_VERSION):null;this.a=new Xs(this.l,D(C),i),(this.u=t.emulatorConfig||null)&&ia(this.a,this.u),this.h=new fh(this.a),Ah(this,e[Ys]),ph(this.h,e),Qr(this,"refreshToken",this.h.a),Nh(this,n||{}),In.call(this),this.P=!1,this.s&&xr()&&(this.b=Vc(this.s,this.l,this.m,this.u)),this.W=[],this.i=null,this.D=function(t){return new hh((function(){return t.I(!0)}),(function(t){return!(!t||"auth/network-request-failed"!=t.code)}),(function(){var e=t.h.c-Date.now()-3e5;return 0<e?e:0}))}(this),this.ba=_(this.ib,this);var o=this;this.za=null,this.Pa=function(t){o.xa(t.h)},this.qa=null,this.Ba=function(t){yh(o,t.c)},this.$=null,this.aa=[],this.Oa=function(t){_h(o,t.f)},this.ja=null,this.S=new uh(this,n),Qr(this,"multiFactor",this.S)}function yh(t,e){t.u=e,ia(t.a,e),t.b&&(e=t.b,t.b=Vc(t.s,t.l,t.m,t.u),t.P&&(xc(e,t),Dc(t.b,t)))}function bh(t,e){t.qa&&dn(t.qa,"languageCodeChanged",t.Pa),(t.qa=e)&&hn(e,"languageCodeChanged",t.Pa)}function wh(t,e){t.$&&dn(t.$,"emulatorConfigChanged",t.Ba),(t.$=e)&&hn(e,"emulatorConfigChanged",t.Ba)}function _h(t,e){t.aa=e,sa(t.a,r.Z.SDK_VERSION?Nr(r.Z.SDK_VERSION,t.aa):null)}function Ih(t,e){t.ja&&dn(t.ja,"frameworkChanged",t.Oa),(t.ja=e)&&hn(e,"frameworkChanged",t.Oa)}function Th(t){try{return r.Z.app(t.m).auth()}catch(e){throw new A("internal-error","No firebase.auth.Auth instance is available for the Firebase App '"+t.m+"'!")}}function Eh(t){t.J||t.D.b||(t.D.start(),dn(t,"tokenChanged",t.ba),hn(t,"tokenChanged",t.ba))}function Sh(t){dn(t,"tokenChanged",t.ba),t.D.stop()}function Ah(t,e){t.Aa=e,Qr(t,"_lat",e)}function kh(t){for(var e=[],n=0;n<t.W.length;n++)e.push(t.W[n](t));return Oe(e).then((function(){return t}))}function Ch(t){t.b&&!t.P&&(t.P=!0,Dc(t.b,t))}function Nh(t,e){Yr(t,{uid:e.uid,displayName:e.displayName||null,photoURL:e.photoURL||null,email:e.email||null,emailVerified:e.emailVerified||!1,phoneNumber:e.phoneNumber||null,isAnonymous:e.isAnonymous||!1,tenantId:e.tenantId||null,metadata:new mh(e.createdAt,e.lastLoginAt),providerData:[]}),t.a.b=t.tenantId}function Rh(){}function Oh(t){return Ce().then((function(){if(t.J)throw new A("app-deleted")}))}function Dh(t){return z(t.providerData,(function(t){return t.providerId}))}function xh(t,e){e&&(Ph(t,e.providerId),t.providerData.push(e))}function Ph(t,e){X(t.providerData,(function(t){return t.providerId==e}))}function Lh(t,e,n){("uid"!=e||n)&&t.hasOwnProperty(e)&&Qr(t,e,n)}function Mh(t,e){t!=e&&(Yr(t,{uid:e.uid,displayName:e.displayName,photoURL:e.photoURL,email:e.email,emailVerified:e.emailVerified,phoneNumber:e.phoneNumber,isAnonymous:e.isAnonymous,tenantId:e.tenantId,providerData:[]}),e.metadata?Qr(t,"metadata",function(t){return new mh(t.a,t.b)}(e.metadata)):Qr(t,"metadata",new mh),H(e.providerData,(function(e){xh(t,e)})),function(t,e){t.b=e.b,t.a=e.a,t.c=e.c}(t.h,e.h),Qr(t,"refreshToken",t.h.a),ch(t.S,e.S.b))}function jh(t){return t.I().then((function(e){var n=t.isAnonymous;return function(t,e){return nu(t.a,xa,{idToken:e}).then(_(t.Kc,t))}(t,e).then((function(){return n||Lh(t,"isAnonymous",!1),e}))}))}function Uh(t,e){e[Ys]&&t.Aa!=e[Ys]&&(ph(t.h,e),t.dispatchEvent(new ah("tokenChanged")),Ah(t,e[Ys]),Lh(t,"refreshToken",t.h.a))}function Fh(t,e){return jh(t).then((function(){if(J(Dh(t),e))return kh(t).then((function(){throw new A("provider-already-linked")}))}))}function qh(t,e,n){return Zr({user:t,credential:Fo(e),additionalUserInfo:e=Xi(e),operationType:n})}function Bh(t,e){return Uh(t,e),t.reload().then((function(){return t}))}function Vh(t,e,n,i,o){if(!xr())return Ne(new A("operation-not-supported-in-this-environment"));if(t.i&&!o)return Ne(t.i);var s=$i(n.providerId),a=qr(t.uid+":::"),u=null;(!Mr()||_r())&&t.s&&n.isOAuthProvider&&(u=gu(t.s,t.l,t.m,e,n,null,a,r.Z.SDK_VERSION||null,null,null,t.tenantId,t.u));var c=vr(u,s&&s.va,s&&s.ua);return i=i().then((function(){if(Hh(t),!o)return t.I().then((function(){}))})).then((function(){return Mc(t.b,c,e,n,a,!!u,t.tenantId)})).then((function(){return new _e((function(n,r){t.na(e,null,new A("cancelled-popup-request"),t.g||null),t.f=n,t.C=r,t.g=a,t.c=Fc(t.b,t,e,c,a)}))})).then((function(t){return c&&mr(c),t?Zr(t):null})).o((function(t){throw c&&mr(c),t})),Kh(t,i,o)}function Gh(t,e,n,r,i){if(!xr())return Ne(new A("operation-not-supported-in-this-environment"));if(t.i&&!i)return Ne(t.i);var o=null,s=qr(t.uid+":::");return r=r().then((function(){if(Hh(t),!i)return t.I().then((function(){}))})).then((function(){return t.ga=s,kh(t)})).then((function(e){return t.ha&&(e=(e=t.ha).b.set(Jh,t.w(),e.a)),e})).then((function(){return Uc(t.b,e,n,s,t.tenantId)})).o((function(e){if(o=e,t.ha)return $h(t.ha);throw o})).then((function(){if(o)throw o})),Kh(t,r,i)}function Hh(t){if(!t.b||!t.P){if(t.b&&!t.P)throw new A("internal-error");throw new A("auth-domain-config-required")}}function Kh(t,e,n){var r=function(t,e,n){return t.i&&!n?(e.cancel(),Ne(t.i)):e.o((function(e){throw!e||"auth/user-disabled"!=e.code&&"auth/user-token-expired"!=e.code||(t.i||t.dispatchEvent(new ah("userInvalidated")),t.i=e),e}))}(t,e,n);return t.N.push(r),r.oa((function(){$(t.N,r)})),r.o((function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=rh(e.w(),Th(t),_(t.jc,t))),n||e}))}function zh(t){if(!t.apiKey)return null;var e={apiKey:t.apiKey,authDomain:t.authDomain,appName:t.appName,emulatorConfig:t.emulatorConfig},n={};if(!t.stsTokenManager||!t.stsTokenManager.accessToken)return null;n[Ys]=t.stsTokenManager.accessToken,n.refreshToken=t.stsTokenManager.refreshToken||null;var r=t.stsTokenManager.expirationTime;r&&(n.expiresIn=(r-Date.now())/1e3);var i=new gh(e,n,t);return t.providerData&&H(t.providerData,(function(t){t&&xh(i,Zr(t))})),t.redirectEventId&&(i.ga=t.redirectEventId),i}function Wh(t){this.a=t,this.b=tc()}Zc.prototype.Rc=function(t){var e=this;return t.tb(this.a.a,this.c).then((function(t){var n=mt(e.f);return delete n[th],delete n[eh],gt(n,t),e.g(n)}))},E(nh,A),ih.prototype.tb=function(t,e,n){return e.type==ao?function(t,e,n,r){return n.Ha().then((function(n){return n={idToken:n},void 0!==r&&(n.displayName=r),gt(n,{phoneVerificationInfo:Mo(t.a)}),nu(e,Oa,n)}))}(this,t,e,n):function(t,e,n){return n.Ha().then((function(n){return gt(n={mfaPendingCredential:n},{phoneVerificationInfo:Mo(t.a)}),nu(e,Da,n)}))}(this,t,e)},E(oh,ih),E(sh,oh),E(ah,Qe),(t=uh.prototype).yc=function(t){ch(this,function(t){var e=[];return H(t.mfaInfo||[],(function(t){(t=ni(t))&&e.push(t)})),e}(t.hd))},t.Sb=function(){return this.a.I().then((function(t){return new so(t,null)}))},t.fc=function(t,e){var n=this,r=this.a.a;return this.Sb().then((function(n){return t.tb(r,n,e)})).then((function(t){return Uh(n.a,t),n.a.reload()}))},t.bd=function(t){var e=this,n="string"==typeof t?t:t.uid,r=this.a.a;return this.a.I().then((function(t){return nu(r,eu,{idToken:t,mfaEnrollmentId:n})})).then((function(t){var r=K(e.b,(function(t){return t.uid!=n}));return ch(e,r),Uh(e.a,t),e.a.reload().o((function(t){if("auth/user-token-expired"!=t.code)throw t}))}))},t.w=function(){return{multiFactor:{enrolledFactors:z(this.b,(function(t){return t.w()}))}}},hh.prototype.start=function(){this.a=this.c,lh(this,!0)},hh.prototype.stop=function(){this.b&&(this.b.cancel(),this.b=null)},fh.prototype.w=function(){return{apiKey:this.f.c,refreshToken:this.a,accessToken:this.b&&this.b.toString(),expirationTime:this.c}},fh.prototype.getToken=function(t){return t=!!t,this.b&&!this.a?Ne(new A("user-token-expired")):t||!this.b||Date.now()>this.c-3e4?this.a?function(t,e){return function(t,e){return new _e((function(n,r){"refresh_token"==e.grant_type&&e.refresh_token||"authorization_code"==e.grant_type&&e.code?aa(t,t.l+"?key="+encodeURIComponent(t.c),(function(t){t?t.error?r(iu(t)):t.access_token&&t.refresh_token?n(t):r(new A("internal-error")):r(new A("network-request-failed"))}),"POST",Yn(e).toString(),t.g,t.m.get()):r(new A("internal-error"))}))}(t.f,e).then((function(e){return t.b=Hi(e.access_token),t.a=e.refresh_token,dh(t,e.expires_in),{accessToken:t.b.toString(),refreshToken:t.a}})).o((function(e){throw"auth/user-token-expired"==e.code&&(t.a=null),e}))}(this,{grant_type:"refresh_token",refresh_token:this.a}):Ce(null):Ce({accessToken:this.b.toString(),refreshToken:this.a})},mh.prototype.w=function(){return{lastLoginAt:this.b,createdAt:this.a}},E(gh,In),gh.prototype.xa=function(t){this.za=t,ra(this.a,t)},gh.prototype.la=function(){return this.za},gh.prototype.Ga=function(){return Y(this.aa)},gh.prototype.ib=function(){this.D.b&&(this.D.stop(),this.D.start())},Qr(gh.prototype,"providerId","firebase"),(t=gh.prototype).reload=function(){var t=this;return Kh(this,Oh(this).then((function(){return jh(t).then((function(){return kh(t)})).then(Rh)})))},t.oc=function(t){return this.I(t).then((function(t){return new Yc(t)}))},t.I=function(t){var e=this;return Kh(this,Oh(this).then((function(){return e.h.getToken(t)})).then((function(t){if(!t)throw new A("internal-error");return t.accessToken!=e.Aa&&(Ah(e,t.accessToken),e.dispatchEvent(new ah("tokenChanged"))),Lh(e,"refreshToken",t.refreshToken),t.accessToken})))},t.Kc=function(t){if(!(t=t.users)||!t.length)throw new A("internal-error");Nh(this,{uid:(t=t[0]).localId,displayName:t.displayName,photoURL:t.photoUrl,email:t.email,emailVerified:!!t.emailVerified,phoneNumber:t.phoneNumber,lastLoginAt:t.lastLoginAt,createdAt:t.createdAt,tenantId:t.tenantId});for(var e=function(t){return(t=t.providerUserInfo)&&t.length?z(t,(function(t){return new vh(t.rawId,t.providerId,t.email,t.displayName,t.photoUrl,t.phoneNumber)})):[]}(t),n=0;n<e.length;n++)xh(this,e[n]);Lh(this,"isAnonymous",!(this.email&&t.passwordHash||this.providerData&&this.providerData.length)),this.dispatchEvent(new ah("userReloaded",{hd:t}))},t.Lc=function(t){return $r("firebase.User.prototype.reauthenticateAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.reauthenticateWithCredential instead."),this.ub(t)},t.ub=function(t){var e=this,n=null;return Kh(this,t.c(this.a,this.uid).then((function(t){return Uh(e,t),n=qh(e,t,"reauthenticate"),e.i=null,e.reload()})).then((function(){return n})),!0)},t.Cc=function(t){return $r("firebase.User.prototype.linkAndRetrieveDataWithCredential is deprecated. Please use firebase.User.prototype.linkWithCredential instead."),this.rb(t)},t.rb=function(t){var e=this,n=null;return Kh(this,Fh(this,t.providerId).then((function(){return e.I()})).then((function(n){return t.b(e.a,n)})).then((function(t){return n=qh(e,t,"link"),Bh(e,t)})).then((function(){return n})))},t.Dc=function(t,e){var n=this;return Kh(this,Fh(this,"phone").then((function(){return Qc(Th(n),t,e,_(n.rb,n))})))},t.Mc=function(t,e){var n=this;return Kh(this,Ce().then((function(){return Qc(Th(n),t,e,_(n.ub,n))})),!0)},t.Cb=function(t){var e=this;return Kh(this,this.I().then((function(n){return e.a.Cb(n,t)})).then((function(t){return Uh(e,t),e.reload()})))},t.ed=function(t){var e=this;return Kh(this,this.I().then((function(n){return t.b(e.a,n)})).then((function(t){return Uh(e,t),e.reload()})))},t.Db=function(t){var e=this;return Kh(this,this.I().then((function(n){return e.a.Db(n,t)})).then((function(t){return Uh(e,t),e.reload()})))},t.Eb=function(t){if(void 0===t.displayName&&void 0===t.photoURL)return Oh(this);var e=this;return Kh(this,this.I().then((function(n){return e.a.Eb(n,{displayName:t.displayName,photoUrl:t.photoURL})})).then((function(t){return Uh(e,t),Lh(e,"displayName",t.displayName||null),Lh(e,"photoURL",t.photoUrl||null),H(e.providerData,(function(t){"password"===t.providerId&&(Qr(t,"displayName",e.displayName),Qr(t,"photoURL",e.photoURL))})),kh(e)})).then(Rh))},t.cd=function(t){var e=this;return Kh(this,jh(this).then((function(n){return J(Dh(e),t)?function(t,e,n){return nu(t,Ca,{idToken:e,deleteProvider:n})}(e.a,n,[t]).then((function(t){var n={};return H(t.providerUserInfo||[],(function(t){n[t.providerId]=!0})),H(Dh(e),(function(t){n[t]||Ph(e,t)})),n[jo.PROVIDER_ID]||Qr(e,"phoneNumber",null),kh(e)})):kh(e).then((function(){throw new A("no-such-provider")}))})))},t.delete=function(){var t=this;return Kh(this,this.I().then((function(e){return nu(t.a,ka,{idToken:e})})).then((function(){t.dispatchEvent(new ah("userDeleted"))}))).then((function(){for(var e=0;e<t.N.length;e++)t.N[e].cancel("app-deleted");bh(t,null),wh(t,null),Ih(t,null),t.N=[],t.J=!0,Sh(t),Qr(t,"refreshToken",null),t.b&&xc(t.b,t)}))},t.Gb=function(t,e){return!!("linkViaPopup"==t&&(this.g||null)==e&&this.f||"reauthViaPopup"==t&&(this.g||null)==e&&this.f||"linkViaRedirect"==t&&(this.ga||null)==e||"reauthViaRedirect"==t&&(this.ga||null)==e)},t.na=function(t,e,n,r){"linkViaPopup"!=t&&"reauthViaPopup"!=t||r!=(this.g||null)||(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"linkViaPopup"==t&&e==(this.g||null)?_(this.Lb,this):"reauthViaPopup"==t&&e==(this.g||null)?_(this.Mb,this):"linkViaRedirect"==t&&(this.ga||null)==e?_(this.Lb,this):"reauthViaRedirect"==t&&(this.ga||null)==e?_(this.Mb,this):null},t.Ec=function(t){var e=this;return Vh(this,"linkViaPopup",t,(function(){return Fh(e,t.providerId).then((function(){return kh(e)}))}),!1)},t.Nc=function(t){return Vh(this,"reauthViaPopup",t,(function(){return Ce()}),!0)},t.Fc=function(t){var e=this;return Gh(this,"linkViaRedirect",t,(function(){return Fh(e,t.providerId)}),!1)},t.Oc=function(t){return Gh(this,"reauthViaRedirect",t,(function(){return Ce()}),!0)},t.Lb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Kh(this,this.I().then((function(n){return wa(i.a,{requestUri:t,postBody:r,sessionId:e,idToken:n})})).then((function(t){return o=qh(i,t,"link"),Bh(i,t)})).then((function(){return o})))},t.Mb=function(t,e,n,r){var i=this;this.c&&(this.c.cancel(),this.c=null);var o=null;return Kh(this,Ce().then((function(){return ho(_a(i.a,{requestUri:t,sessionId:e,postBody:r,tenantId:n}),i.uid)})).then((function(t){return o=qh(i,t,"reauthenticate"),Uh(i,t),i.i=null,i.reload()})).then((function(){return o})),!0)},t.vb=function(t){var e=this,n=null;return Kh(this,this.I().then((function(e){return n=e,void 0===t||pt(t)?{}:Bi(new Oi(t))})).then((function(t){return e.a.vb(n,t)})).then((function(t){if(e.email!=t)return e.reload()})).then((function(){})))},t.Fb=function(t,e){var n=this,r=null;return Kh(this,this.I().then((function(t){return r=t,void 0===e||pt(e)?{}:Bi(new Oi(e))})).then((function(e){return n.a.Fb(r,t,e)})).then((function(t){if(n.email!=t)return n.reload()})).then((function(){})))},t.jc=function(t){var e=null,n=this;return Kh(this,t=ho(Ce(t),n.uid).then((function(t){return e=qh(n,t,"reauthenticate"),Uh(n,t),n.i=null,n.reload()})).then((function(){return e})),!0)},t.toJSON=function(){return this.w()},t.w=function(){var t={uid:this.uid,displayName:this.displayName,photoURL:this.photoURL,email:this.email,emailVerified:this.emailVerified,phoneNumber:this.phoneNumber,isAnonymous:this.isAnonymous,tenantId:this.tenantId,providerData:[],apiKey:this.l,appName:this.m,authDomain:this.s,stsTokenManager:this.h.w(),redirectEventId:this.ga||null};return this.metadata&&gt(t,this.metadata.w()),H(this.providerData,(function(e){t.providerData.push(function(t){var e,n={};for(e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n}(e))})),gt(t,this.S.w()),t};var Jh={name:"redirectUser",F:"session"};function $h(t){return rc(t.b,Jh,t.a)}function Xh(t){this.a=t,this.b=tc(),this.c=null,this.f=function(t){var e=Zh("local"),n=Zh("session"),r=Zh("none");return function(t,e,n){var r=nc(e,n),i=ec(t,e.F);return t.get(e,n).then((function(o){var s=null;try{s=Fr(a.localStorage.getItem(r))}catch(t){}if(s&&!o)return a.localStorage.removeItem(r),t.set(e,s,n);s&&o&&"localStorage"!=i.type&&a.localStorage.removeItem(r)}))}(t.b,e,t.a).then((function(){return t.b.get(n,t.a)})).then((function(i){return i?n:t.b.get(r,t.a).then((function(n){return n?r:t.b.get(e,t.a).then((function(n){return n?e:t.b.get(Yh,t.a).then((function(t){return t?Zh(t):e}))}))}))})).then((function(e){return t.c=e,Qh(t,e.F)})).o((function(){t.c||(t.c=e)}))}(this),this.b.addListener(Zh("local"),this.a,_(this.g,this))}function Qh(t,e){var n,r=[];for(n in Yu)Yu[n]!==e&&r.push(rc(t.b,Zh(Yu[n]),t.a));return r.push(rc(t.b,Yh,t.a)),function(t){return new _e((function(e,n){var r=t.length,i=[];if(r)for(var o=function(t,n){r--,i[t]=n,0==r&&e(i)},s=function(t){n(t)},a=0;a<t.length;a++)Re(t[a],I(o,a),s);else e(i)}))}(r)}Xh.prototype.g=function(){var t=this,e=Zh("local");rl(this,(function(){return Ce().then((function(){return t.c&&"local"!=t.c.F?t.b.get(e,t.a):null})).then((function(n){if(n)return Qh(t,"local").then((function(){t.c=e}))}))}))};var Yh={name:"persistence",F:"session"};function Zh(t){return{name:"authUser",F:t}}function tl(t,e){return rl(t,(function(){return t.b.set(t.c,e.w(),t.a)}))}function el(t){return rl(t,(function(){return rc(t.b,t.c,t.a)}))}function nl(t,e,n){return rl(t,(function(){return t.b.get(t.c,t.a).then((function(t){return t&&e&&(t.authDomain=e),t&&n&&(t.emulatorConfig=n),zh(t||{})}))}))}function rl(t,e){return t.f=t.f.then(e,e),t.f}function il(t){if(this.l=!1,Qr(this,"settings",new $c),Qr(this,"app",t),!fl(this).options||!fl(this).options.apiKey)throw new A("invalid-api-key");t=r.Z.SDK_VERSION?Nr(r.Z.SDK_VERSION):null,this.a=new Xs(fl(this).options&&fl(this).options.apiKey,D(C),t),this.P=[],this.s=[],this.N=[],this.Pa=r.Z.INTERNAL.createSubscribe(_(this.zc,this)),this.W=void 0,this.ib=r.Z.INTERNAL.createSubscribe(_(this.Ac,this)),hl(this,null),this.i=new Xh(fl(this).options.apiKey+":"+fl(this).name),this.D=new Wh(fl(this).options.apiKey+":"+fl(this).name),this.$=vl(this,function(t){var e=fl(t).options.authDomain,n=function(t){var e=function(t,e){return t.b.get(Jh,t.a).then((function(t){return t&&e&&(t.authDomain=e),zh(t||{})}))}(t.D,fl(t).options.authDomain).then((function(e){return(t.m=e)&&(e.ha=t.D),$h(t.D)}));return vl(t,e)}(t).then((function(){return nl(t.i,e,t.R)})).then((function(e){return e?(e.ha=t.D,t.m&&(t.m.ga||null)==(e.ga||null)?e:e.reload().then((function(){return tl(t.i,e).then((function(){return e}))})).o((function(n){return"auth/network-request-failed"==n.code?e:el(t.i)}))):null})).then((function(e){hl(t,e||null)}));return vl(t,n)}(this)),this.h=vl(this,function(t){return t.$.then((function(){return cl(t)})).o((function(){})).then((function(){if(!t.l)return t.ja()})).o((function(){})).then((function(){if(!t.l){t.ba=!0;var e=t.i;e.b.addListener(Zh("local"),e.a,t.ja)}}))}(this)),this.ba=!1,this.ja=_(this.Zc,this),this.Ba=_(this.da,this),this.qa=_(this.mc,this),this.za=_(this.wc,this),this.Aa=_(this.xc,this),this.b=null,function(t){var e=fl(t).options.authDomain,n=fl(t).options.apiKey;e&&xr()&&(t.Oa=t.$.then((function(){if(!t.l){if(t.b=Vc(e,n,fl(t).name,t.R),Dc(t.b,t),dl(t)&&Ch(dl(t)),t.m){Ch(t.m);var r=t.m;r.xa(t.la()),bh(r,t),_h(r=t.m,t.J),Ih(r,t),yh(r=t.m,t.R),wh(r,t),t.m=null}return t.b}})))}(this),this.INTERNAL={},this.INTERNAL.delete=_(this.delete,this),this.INTERNAL.logFramework=_(this.Gc,this),this.u=0,In.call(this),function(t){Object.defineProperty(t,"lc",{get:function(){return this.la()},set:function(t){this.xa(t)},enumerable:!1}),t.aa=null,Object.defineProperty(t,"ti",{get:function(){return this.T()},set:function(t){this.zb(t)},enumerable:!1}),t.S=null,Object.defineProperty(t,"emulatorConfig",{get:function(){if(this.R){var t=qn(this.R.url);t=Zr({protocol:t.c,host:t.a,port:t.g,options:Zr({disableWarnings:this.R.ec})})}else t=null;return t},enumerable:!1})}(this),this.J=[],this.R=null}function ol(t){Qe.call(this,"languageCodeChanged"),this.h=t}function sl(t){Qe.call(this,"emulatorConfigChanged"),this.c=t}function al(t){Qe.call(this,"frameworkChanged"),this.f=t}function ul(t){return t.Oa||Ne(new A("auth-domain-config-required"))}function cl(t){if(!xr())return Ne(new A("operation-not-supported-in-this-environment"));var e=ul(t).then((function(){return t.b.ra()})).then((function(t){return t?Zr(t):null}));return vl(t,e)}function hl(t,e){dl(t)&&(function(t,e){X(t.W,(function(t){return t==e}))}(dl(t),t.Ba),dn(dl(t),"tokenChanged",t.qa),dn(dl(t),"userDeleted",t.za),dn(dl(t),"userInvalidated",t.Aa),Sh(dl(t))),e&&(e.W.push(t.Ba),hn(e,"tokenChanged",t.qa),hn(e,"userDeleted",t.za),hn(e,"userInvalidated",t.Aa),0<t.u&&Eh(e)),Qr(t,"currentUser",e),e&&(e.xa(t.la()),bh(e,t),_h(e,t.J),Ih(e,t),yh(e,t.R),wh(e,t))}function ll(t,e){var n=null,r=null;return vl(t,e.then((function(e){return n=Fo(e),r=Xi(e),function(t,e){var n={};return n.apiKey=fl(t).options.apiKey,n.authDomain=fl(t).options.authDomain,n.appName=fl(t).name,t.R&&(n.emulatorConfig=t.R),t.$.then((function(){return function(t,e,n,r){var i=new gh(t,e);return n&&(i.ha=n),r&&_h(i,r),i.reload().then((function(){return i}))}(n,e,t.D,t.Ga())})).then((function(e){return dl(t)&&e.uid==dl(t).uid?(Mh(dl(t),e),t.da(e)):(hl(t,e),Ch(e),t.da(e))})).then((function(){ml(t)}))}(t,e)}),(function(e){var n=null;throw e&&"auth/multi-factor-auth-required"===e.code&&(n=rh(e.w(),t,_(t.kc,t))),n||e})).then((function(){return Zr({user:dl(t),credential:n,additionalUserInfo:r,operationType:"signIn"})})))}function fl(t){return t.app}function dl(t){return t.currentUser}function pl(t){return dl(t)&&dl(t)._lat||null}function ml(t){if(t.ba){for(var e=0;e<t.s.length;e++)t.s[e]&&t.s[e](pl(t));if(t.W!==t.getUid()&&t.N.length)for(t.W=t.getUid(),e=0;e<t.N.length;e++)t.N[e]&&t.N[e](pl(t))}}function vl(t,e){return t.P.push(e),e.oa((function(){$(t.P,e)})),e}function gl(){}function yl(){this.a={},this.b=1e12}Xh.prototype.yb=function(t){var e=null,n=this;return function(t){var e=new A("invalid-persistence-type"),n=new A("unsupported-persistence-type");t:{for(r in Yu)if(Yu[r]==t){var r=!0;break t}r=!1}if(!r||"string"!=typeof t)throw e;switch(Tr()){case"ReactNative":if("session"===t)throw n;break;case"Node":if("none"!==t)throw n;break;case"Worker":if("session"===t||!Ou()&&"none"!==t)throw n;break;default:if(!Dr()&&"none"!==t)throw n}}(t),rl(this,(function(){return t!=n.c.F?n.b.get(n.c,n.a).then((function(r){return e=r,Qh(n,t)})).then((function(){if(n.c=Zh(t),e)return n.b.set(n.c,e,n.a)})):Ce()}))},E(il,In),E(ol,Qe),E(sl,Qe),E(al,Qe),(t=il.prototype).yb=function(t){return vl(this,t=this.i.yb(t))},t.xa=function(t){this.aa===t||this.l||(this.aa=t,ra(this.a,this.aa),this.dispatchEvent(new ol(this.la())))},t.la=function(){return this.aa},t.fd=function(){var t=a.navigator;this.xa(t&&(t.languages&&t.languages[0]||t.language||t.userLanguage)||null)},t.gd=function(t,e){if(!this.R){if(!/^https?:\/\//.test(t))throw new A("argument-error","Emulator URL must start with a valid scheme (http:// or https://).");(function(t){"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),a.document&&!t&&br().then((function(){var t=a.document.createElement("div");t.innerText="Running in emulator mode. Do not use with production credentials.",t.style.position="fixed",t.style.width="100%",t.style.backgroundColor="#ffffff",t.style.border=".1em solid #000000",t.style.color="#b50000",t.style.bottom="0px",t.style.left="0px",t.style.margin="0px",t.style.zIndex=1e4,t.style.textAlign="center",t.classList.add("firebase-emulator-warning"),a.document.body.appendChild(t)}))})(e=!!e&&!!e.disableWarnings),this.R={url:t,ec:e},this.settings.jb=!0,ia(this.a,this.R),this.dispatchEvent(new sl(this.R))}},t.Gc=function(t){this.J.push(t),sa(this.a,r.Z.SDK_VERSION?Nr(r.Z.SDK_VERSION,this.J):null),this.dispatchEvent(new al(this.J))},t.Ga=function(){return Y(this.J)},t.zb=function(t){this.S===t||this.l||(this.S=t,this.a.b=this.S)},t.T=function(){return this.S},t.toJSON=function(){return{apiKey:fl(this).options.apiKey,authDomain:fl(this).options.authDomain,appName:fl(this).name,currentUser:dl(this)&&dl(this).w()}},t.Gb=function(t,e){switch(t){case"unknown":case"signInViaRedirect":return!0;case"signInViaPopup":return this.g==e&&!!this.f;default:return!1}},t.na=function(t,e,n,r){"signInViaPopup"==t&&this.g==r&&(n&&this.C?this.C(n):e&&!n&&this.f&&this.f(e),this.c&&(this.c.cancel(),this.c=null),delete this.f,delete this.C)},t.Fa=function(t,e){return"signInViaRedirect"==t||"signInViaPopup"==t&&this.g==e&&this.f?_(this.ic,this):null},t.ic=function(t,e,n,r){var i=this,o={requestUri:t,postBody:r,sessionId:e,tenantId:n};return this.c&&(this.c.cancel(),this.c=null),i.$.then((function(){return ll(i,ba(i.a,o))}))},t.Xc=function(t){if(!xr())return Ne(new A("operation-not-supported-in-this-environment"));var e=this,n=$i(t.providerId),i=qr(),o=null;(!Mr()||_r())&&fl(this).options.authDomain&&t.isOAuthProvider&&(o=gu(fl(this).options.authDomain,fl(this).options.apiKey,fl(this).name,"signInViaPopup",t,null,i,r.Z.SDK_VERSION||null,null,null,this.T(),this.R));var s=vr(o,n&&n.va,n&&n.ua);return vl(this,n=ul(this).then((function(n){return Mc(n,s,"signInViaPopup",t,i,!!o,e.T())})).then((function(){return new _e((function(t,n){e.na("signInViaPopup",null,new A("cancelled-popup-request"),e.g),e.f=t,e.C=n,e.g=i,e.c=Fc(e.b,e,"signInViaPopup",s,i)}))})).then((function(t){return s&&mr(s),t?Zr(t):null})).o((function(t){throw s&&mr(s),t})))},t.Yc=function(t){if(!xr())return Ne(new A("operation-not-supported-in-this-environment"));var e=this;return vl(this,ul(this).then((function(){return function(t){return rl(t,(function(){return t.b.set(Yh,t.c.F,t.a)}))}(e.i)})).then((function(){return Uc(e.b,"signInViaRedirect",t,void 0,e.T())})))},t.ra=function(){var t=this;return cl(this).then((function(e){return t.b&&Kc(t.b.b),e})).o((function(e){throw t.b&&Kc(t.b.b),e}))},t.dd=function(t){if(!t)return Ne(new A("null-user"));if(this.S!=t.tenantId)return Ne(new A("tenant-id-mismatch"));var e=this,n={};n.apiKey=fl(this).options.apiKey,n.authDomain=fl(this).options.authDomain,n.appName=fl(this).name;var r=function(t,e,n,r){var i=t.h,o={};return o[Ys]=i.b&&i.b.toString(),o.refreshToken=i.a,e=new gh(e||{apiKey:t.l,authDomain:t.s,appName:t.m},o),n&&(e.ha=n),r&&_h(e,r),Mh(e,t),e}(t,n,e.D,e.Ga());return vl(this,this.h.then((function(){if(fl(e).options.apiKey!=t.l)return r.reload()})).then((function(){return dl(e)&&t.uid==dl(e).uid?(Mh(dl(e),t),e.da(t)):(hl(e,r),Ch(r),e.da(r))})).then((function(){ml(e)})))},t.Bb=function(){var t=this;return vl(this,this.h.then((function(){return t.b&&Kc(t.b.b),dl(t)?(hl(t,null),el(t.i).then((function(){ml(t)}))):Ce()})))},t.Zc=function(){var t=this;return nl(this.i,fl(this).options.authDomain).then((function(e){if(!t.l){var n;if(n=dl(t)&&e){n=dl(t).uid;var r=e.uid;n=null!=n&&""!==n&&null!=r&&""!==r&&n==r}if(n)return Mh(dl(t),e),dl(t).I();(dl(t)||e)&&(hl(t,e),e&&(Ch(e),e.ha=t.D),t.b&&Dc(t.b,t),ml(t))}}))},t.da=function(t){return tl(this.i,t)},t.mc=function(){ml(this),this.da(dl(this))},t.wc=function(){this.Bb()},t.xc=function(){this.Bb()},t.kc=function(t){var e=this;return this.h.then((function(){return ll(e,Ce(t))}))},t.zc=function(t){var e=this;this.addAuthTokenListener((function(){t.next(dl(e))}))},t.Ac=function(t){var e=this;!function(t,e){t.N.push(e),vl(t,t.h.then((function(){!t.l&&J(t.N,e)&&t.W!==t.getUid()&&(t.W=t.getUid(),e(pl(t)))})))}(this,(function(){t.next(dl(e))}))},t.Ic=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){"function"==typeof t?t(dl(r)):"function"==typeof t.next&&t.next(dl(r))})),this.Pa(t,e,n)},t.Hc=function(t,e,n){var r=this;return this.ba&&Promise.resolve().then((function(){r.W=r.getUid(),"function"==typeof t?t(dl(r)):"function"==typeof t.next&&t.next(dl(r))})),this.ib(t,e,n)},t.nc=function(t){var e=this;return vl(this,this.h.then((function(){return dl(e)?dl(e).I(t).then((function(t){return{accessToken:t}})):null})))},t.Tc=function(t){var e=this;return this.h.then((function(){return ll(e,nu(e.a,Xa,{token:t}))})).then((function(t){var n=t.user;return Lh(n,"isAnonymous",!1),e.da(n),t}))},t.Uc=function(t,e){var n=this;return this.h.then((function(){return ll(n,nu(n.a,Qa,{email:t,password:e}))}))},t.dc=function(t,e){var n=this;return this.h.then((function(){return ll(n,nu(n.a,Sa,{email:t,password:e}))}))},t.ab=function(t){var e=this;return this.h.then((function(){return ll(e,t.ka(e.a))}))},t.Sc=function(t){return $r("firebase.auth.Auth.prototype.signInAndRetrieveDataWithCredential is deprecated. Please use firebase.auth.Auth.prototype.signInWithCredential instead."),this.ab(t)},t.Ab=function(){var t=this;return this.h.then((function(){var e=dl(t);if(e&&e.isAnonymous){var n=Zr({providerId:null,isNewUser:!1});return Zr({user:e,credential:null,additionalUserInfo:n,operationType:"signIn"})}return ll(t,t.a.Ab()).then((function(e){var n=e.user;return Lh(n,"isAnonymous",!0),t.da(n),e}))}))},t.getUid=function(){return dl(this)&&dl(this).uid||null},t.cc=function(t){this.addAuthTokenListener(t),this.u++,0<this.u&&dl(this)&&Eh(dl(this))},t.Pc=function(t){var e=this;H(this.s,(function(n){n==t&&e.u--})),0>this.u&&(this.u=0),0==this.u&&dl(this)&&Sh(dl(this)),this.removeAuthTokenListener(t)},t.addAuthTokenListener=function(t){var e=this;this.s.push(t),vl(this,this.h.then((function(){e.l||J(e.s,t)&&t(pl(e))})))},t.removeAuthTokenListener=function(t){X(this.s,(function(e){return e==t}))},t.delete=function(){this.l=!0;for(var t=0;t<this.P.length;t++)this.P[t].cancel("app-deleted");return this.P=[],this.i&&(t=this.i).b.removeListener(Zh("local"),t.a,this.ja),this.b&&(xc(this.b,this),Kc(this.b.b)),Promise.resolve()},t.hc=function(t){return vl(this,function(t,e){return nu(t,Aa,{identifier:e,continueUri:Pr()?lr():"http://localhost"}).then((function(t){return t.signinMethods||[]}))}(this.a,t))},t.Bc=function(t){return!!xo(t)},t.xb=function(t,e){var n=this;return vl(this,Ce().then((function(){var t=new Oi(e);if(!t.c)throw new A("argument-error",Pi+" must be true when sending sign in link to email");return Bi(t)})).then((function(e){return n.a.xb(t,e)})).then((function(){})))},t.jd=function(t){return this.Sa(t).then((function(t){return t.data.email}))},t.ob=function(t,e){return vl(this,this.a.ob(t,e).then((function(){})))},t.Sa=function(t){return vl(this,this.a.Sa(t).then((function(t){return new ui(t)})))},t.kb=function(t){return vl(this,this.a.kb(t).then((function(){})))},t.wb=function(t,e){var n=this;return vl(this,Ce().then((function(){return void 0===e||pt(e)?{}:Bi(new Oi(e))})).then((function(e){return n.a.wb(t,e)})).then((function(){})))},t.Wc=function(t,e){return vl(this,Qc(this,t,e,_(this.ab,this)))},t.Vc=function(t,e){var n=this;return vl(this,Ce().then((function(){var r=e||lr(),i=Do(t,r);if(!(r=xo(r)))throw new A("argument-error","Invalid email link!");if(r.tenantId!==n.T())throw new A("tenant-id-mismatch");return n.ab(i)})))},gl.prototype.render=function(){},gl.prototype.reset=function(){},gl.prototype.getResponse=function(){},gl.prototype.execute=function(){};var bl=null;function wl(t,e){return(e=_l(e))&&t.a[e]||null}function _l(t){return(t=void 0===t?1e12:t)?t.toString():null}function Il(t,e){this.g=!1,this.c=e,this.a=this.b=null,this.h="invisible"!==this.c.size,this.f=ce(t);var n=this;this.i=function(){n.execute()},this.h?this.execute():hn(this.f,"click",this.i)}function Tl(t){if(t.g)throw Error("reCAPTCHA mock was already deleted!")}function El(){}function Sl(){}yl.prototype.render=function(t,e){return this.a[this.b.toString()]=new Il(t,e),this.b++},yl.prototype.reset=function(t){var e=wl(this,t);t=_l(t),e&&t&&(e.delete(),delete this.a[t])},yl.prototype.getResponse=function(t){return(t=wl(this,t))?t.getResponse():null},yl.prototype.execute=function(t){(t=wl(this,t))&&t.execute()},Il.prototype.getResponse=function(){return Tl(this),this.b},Il.prototype.execute=function(){Tl(this);var t=this;this.a||(this.a=setTimeout((function(){t.b=function(){for(var t=50,e=[];0<t;)e.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(Math.floor(62*Math.random()))),t--;return e.join("")}();var e=t.c.callback,n=t.c["expired-callback"];if(e)try{e(t.b)}catch(t){}t.a=setTimeout((function(){if(t.a=null,t.b=null,n)try{n()}catch(t){}t.h&&t.execute()}),6e4)}),500))},Il.prototype.delete=function(){Tl(this),this.g=!0,clearTimeout(this.a),this.a=null,dn(this.f,"click",this.i)},Qr(El,"FACTOR_ID","phone"),Sl.prototype.g=function(){return bl||(bl=new yl),Ce(bl)},Sl.prototype.c=function(){};var Al=null;function kl(){this.b=a.grecaptcha?1/0:0,this.f=null,this.a="__rcb"+Math.floor(1e6*Math.random()).toString()}var Cl=new bt(Tt,"https://www.google.com/recaptcha/api.js?onload=%{onload}&render=explicit&hl=%{hl}"),Nl=new Gr(3e4,6e4);kl.prototype.g=function(t){var e=this;return new _e((function(n,r){var i=setTimeout((function(){r(new A("network-request-failed"))}),Nl.get());!a.grecaptcha||t!==e.f&&!e.b?(a[e.a]=function(){if(a.grecaptcha){e.f=t;var o=a.grecaptcha.render;a.grecaptcha.render=function(t,n){return t=o(t,n),e.b++,t},clearTimeout(i),n(a.grecaptcha)}else clearTimeout(i),r(new A("internal-error"));delete a[e.a]},Ce(Gs(kt(Cl,{onload:e.a,hl:t||""}))).o((function(){clearTimeout(i),r(new A("internal-error","Unable to load external reCAPTCHA dependencies!"))}))):(clearTimeout(i),n(a.grecaptcha))}))},kl.prototype.c=function(){this.b--};var Rl=null;function Ol(t,e,n,r,i,o,s){if(Qr(this,"type","recaptcha"),this.c=this.f=null,this.J=!1,this.v=e,this.g=null,s?(Al||(Al=new Sl),s=Al):(Rl||(Rl=new kl),s=Rl),this.m=s,this.a=n||{theme:"light",type:"image"},this.h=[],this.a[Pl])throw new A("argument-error","sitekey should not be provided for reCAPTCHA as one is automatically provisioned for the current project.");if(this.i="invisible"===this.a[Ll],!a.document)throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment with DOM support.");if(!ce(e)||!this.i&&ce(e).hasChildNodes())throw new A("argument-error","reCAPTCHA container is either not found or already contains inner elements!");this.s=new Xs(t,o||null,i||null),this.u=r||function(){return null};var u=this;this.l=[];var c=this.a[Dl];this.a[Dl]=function(t){if(Ml(u,t),"function"==typeof c)c(t);else if("string"==typeof c){var e=Or(c,a);"function"==typeof e&&e(t)}};var h=this.a[xl];this.a[xl]=function(){if(Ml(u,null),"function"==typeof h)h();else if("string"==typeof h){var t=Or(h,a);"function"==typeof t&&t()}}}var Dl="callback",xl="expired-callback",Pl="sitekey",Ll="size";function Ml(t,e){for(var n=0;n<t.l.length;n++)try{t.l[n](e)}catch(t){}}function jl(t,e){return t.h.push(e),e.oa((function(){$(t.h,e)})),e}function Ul(t){if(t.J)throw new A("internal-error","RecaptchaVerifier instance has been destroyed.")}function Fl(t,e,n){var i=!1;try{this.b=n||r.Z.app()}catch(t){throw new A("argument-error","No firebase.app.App instance is currently initialized.")}if(!this.b.options||!this.b.options.apiKey)throw new A("invalid-api-key");n=this.b.options.apiKey;var o=this,s=null;try{s=this.b.auth().Ga()}catch(t){}try{i=this.b.auth().settings.appVerificationDisabledForTesting}catch(t){}s=r.Z.SDK_VERSION?Nr(r.Z.SDK_VERSION,s):null,Ol.call(this,n,t,e,(function(){try{var t=o.b.auth().la()}catch(e){t=null}return t}),s,D(C),i)}function ql(t,e,n,r){t:{n=Array.prototype.slice.call(n);for(var i=0,o=!1,s=0;s<e.length;s++)if(e[s].optional)o=!0;else{if(o)throw new A("internal-error","Argument validator encountered a required argument after an optional argument.");i++}if(o=e.length,n.length<i||o<n.length)r="Expected "+(i==o?1==i?"1 argument":i+" arguments":i+"-"+o+" arguments")+" but got "+n.length+".";else{for(i=0;i<n.length;i++)if(o=e[i].optional&&void 0===n[i],!e[i].M(n[i])&&!o){if(e=e[i],0>i||i>=Bl.length)throw new A("internal-error","Argument validator received an unsupported number of arguments.");n=Bl[i],r=(r?"":n+" argument ")+(e.name?'"'+e.name+'" ':"")+"must be "+e.K+".";break t}r=null}}if(r)throw new A("argument-error",t+" failed: "+r)}(t=Ol.prototype).Ia=function(){var t=this;return this.f?this.f:this.f=jl(this,Ce().then((function(){if(Pr()&&!Ir())return br();throw new A("operation-not-supported-in-this-environment","RecaptchaVerifier is only supported in a browser HTTP/HTTPS environment.")})).then((function(){return t.m.g(t.u())})).then((function(e){return t.g=e,nu(t.s,Fa,{})})).then((function(e){t.a[Pl]=e.recaptchaSiteKey})).o((function(e){throw t.f=null,e})))},t.render=function(){Ul(this);var t=this;return jl(this,this.Ia().then((function(){if(null===t.c){var e=t.v;if(!t.i){var n=ce(e);e=function(t,e,n){var r=arguments,i=document,o=String(r[0]),s=r[1];if(!ue&&s&&(s.name||s.type)){if(o=["<",o],s.name&&o.push(' name="',Ht(s.name),'"'),s.type){o.push(' type="',Ht(s.type),'"');var a={};gt(a,s),delete a.type,s=a}o.push(">"),o=o.join("")}return o=me(i,o),s&&("string"==typeof s?o.className=s:Array.isArray(s)?o.className=s.join(" "):he(o,s)),2<r.length&&pe(i,o,r),o}("DIV"),n.appendChild(e)}t.c=t.g.render(e,t.a)}return t.c})))},t.verify=function(){Ul(this);var t=this;return jl(this,this.render().then((function(e){return new _e((function(n){var r=t.g.getResponse(e);if(r)n(r);else{var i=function(e){e&&(function(t,e){X(t.l,(function(t){return t==e}))}(t,i),n(e))};t.l.push(i),t.i&&t.g.execute(t.c)}}))})))},t.reset=function(){Ul(this),null!==this.c&&this.g.reset(this.c)},t.clear=function(){Ul(this),this.J=!0,this.m.c();for(var t=0;t<this.h.length;t++)this.h[t].cancel("RecaptchaVerifier instance has been destroyed.");if(!this.i){t=ce(this.v);for(var e;e=t.firstChild;)t.removeChild(e)}},E(Fl,Ol);var Bl="First Second Third Fourth Fifth Sixth Seventh Eighth Ninth".split(" ");function Vl(t,e){return{name:t||"",K:"a valid string",optional:!!e,M:function(t){return"string"==typeof t}}}function Gl(t,e){return{name:t||"",K:"a boolean",optional:!!e,M:function(t){return"boolean"==typeof t}}}function Hl(t,e){return{name:t||"",K:"a valid object",optional:!!e,M:m}}function Kl(t,e){return{name:t||"",K:"a function",optional:!!e,M:function(t){return"function"==typeof t}}}function zl(t,e){return{name:t||"",K:"null",optional:!!e,M:function(t){return null===t}}}function Wl(t){return{name:t?t+"Credential":"credential",K:t?"a valid "+t+" credential":"a valid credential",optional:!1,M:function(e){if(!e)return!1;var n=!t||e.providerId===t;return!(!e.ka||!n)}}}function Jl(t,e){return m(t)&&"string"==typeof t.type&&t.type===e&&"function"==typeof t.Ha}function $l(t){return m(t)&&"string"==typeof t.uid}function Xl(t,e,n,r){return{name:n||"",K:t.K+" or "+e.K,optional:!!r,M:function(n){return t.M(n)||e.M(n)}}}function Ql(t,e){for(var n in e){var r=e[n].name;t[r]=tf(r,t[n],e[n].j)}}function Yl(t,e){for(var n in e){var r=e[n].name;r!==n&&Object.defineProperty(t,r,{get:I((function(t){return this[t]}),n),set:I((function(t,e,n,r){ql(t,[n],[r],!0),this[e]=r}),r,n,e[n].lb),enumerable:!0})}}function Zl(t,e,n,r){t[e]=tf(e,n,r)}function tf(t,e,n){function r(){var t=Array.prototype.slice.call(arguments);return ql(o,n,t),e.apply(this,t)}if(!n)return e;var i,o=function(t){return(t=t.split("."))[t.length-1]}(t);for(i in e)r[i]=e[i];for(i in e.prototype)r.prototype[i]=e.prototype[i];return r}Ql(il.prototype,{kb:{name:"applyActionCode",j:[Vl("code")]},Sa:{name:"checkActionCode",j:[Vl("code")]},ob:{name:"confirmPasswordReset",j:[Vl("code"),Vl("newPassword")]},dc:{name:"createUserWithEmailAndPassword",j:[Vl("email"),Vl("password")]},hc:{name:"fetchSignInMethodsForEmail",j:[Vl("email")]},ra:{name:"getRedirectResult",j:[]},Bc:{name:"isSignInWithEmailLink",j:[Vl("emailLink")]},Hc:{name:"onAuthStateChanged",j:[Xl(Hl(),Kl(),"nextOrObserver"),Kl("opt_error",!0),Kl("opt_completed",!0)]},Ic:{name:"onIdTokenChanged",j:[Xl(Hl(),Kl(),"nextOrObserver"),Kl("opt_error",!0),Kl("opt_completed",!0)]},wb:{name:"sendPasswordResetEmail",j:[Vl("email"),Xl(Hl("opt_actionCodeSettings",!0),zl(null,!0),"opt_actionCodeSettings",!0)]},xb:{name:"sendSignInLinkToEmail",j:[Vl("email"),Hl("actionCodeSettings")]},yb:{name:"setPersistence",j:[Vl("persistence")]},Sc:{name:"signInAndRetrieveDataWithCredential",j:[Wl()]},Ab:{name:"signInAnonymously",j:[]},ab:{name:"signInWithCredential",j:[Wl()]},Tc:{name:"signInWithCustomToken",j:[Vl("token")]},Uc:{name:"signInWithEmailAndPassword",j:[Vl("email"),Vl("password")]},Vc:{name:"signInWithEmailLink",j:[Vl("email"),Vl("emailLink",!0)]},Wc:{name:"signInWithPhoneNumber",j:[Vl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Xc:{name:"signInWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Yc:{name:"signInWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},dd:{name:"updateCurrentUser",j:[Xl({name:"user",K:"an instance of Firebase User",optional:!1,M:function(t){return!!(t&&t instanceof gh)}},zl(),"user")]},Bb:{name:"signOut",j:[]},toJSON:{name:"toJSON",j:[Vl(null,!0)]},fd:{name:"useDeviceLanguage",j:[]},gd:{name:"useEmulator",j:[Vl("url"),Hl("options",!0)]},jd:{name:"verifyPasswordResetCode",j:[Vl("code")]}}),Yl(il.prototype,{lc:{name:"languageCode",lb:Xl(Vl(),zl(),"languageCode")},ti:{name:"tenantId",lb:Xl(Vl(),zl(),"tenantId")}}),il.Persistence=Yu,il.Persistence.LOCAL="local",il.Persistence.SESSION="session",il.Persistence.NONE="none",Ql(gh.prototype,{delete:{name:"delete",j:[]},oc:{name:"getIdTokenResult",j:[Gl("opt_forceRefresh",!0)]},I:{name:"getIdToken",j:[Gl("opt_forceRefresh",!0)]},Cc:{name:"linkAndRetrieveDataWithCredential",j:[Wl()]},rb:{name:"linkWithCredential",j:[Wl()]},Dc:{name:"linkWithPhoneNumber",j:[Vl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Ec:{name:"linkWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Fc:{name:"linkWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Lc:{name:"reauthenticateAndRetrieveDataWithCredential",j:[Wl()]},ub:{name:"reauthenticateWithCredential",j:[Wl()]},Mc:{name:"reauthenticateWithPhoneNumber",j:[Vl("phoneNumber"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]},Nc:{name:"reauthenticateWithPopup",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},Oc:{name:"reauthenticateWithRedirect",j:[{name:"authProvider",K:"a valid Auth provider",optional:!1,M:function(t){return!!(t&&t.providerId&&t.hasOwnProperty&&t.hasOwnProperty("isOAuthProvider"))}}]},reload:{name:"reload",j:[]},vb:{name:"sendEmailVerification",j:[Xl(Hl("opt_actionCodeSettings",!0),zl(null,!0),"opt_actionCodeSettings",!0)]},toJSON:{name:"toJSON",j:[Vl(null,!0)]},cd:{name:"unlink",j:[Vl("provider")]},Cb:{name:"updateEmail",j:[Vl("email")]},Db:{name:"updatePassword",j:[Vl("password")]},ed:{name:"updatePhoneNumber",j:[Wl("phone")]},Eb:{name:"updateProfile",j:[Hl("profile")]},Fb:{name:"verifyBeforeUpdateEmail",j:[Vl("email"),Xl(Hl("opt_actionCodeSettings",!0),zl(null,!0),"opt_actionCodeSettings",!0)]}}),Ql(yl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Ql(gl.prototype,{execute:{name:"execute"},render:{name:"render"},reset:{name:"reset"},getResponse:{name:"getResponse"}}),Ql(_e.prototype,{oa:{name:"finally"},o:{name:"catch"},then:{name:"then"}}),Yl($c.prototype,{appVerificationDisabled:{name:"appVerificationDisabledForTesting",lb:Gl("appVerificationDisabledForTesting")}}),Ql(Xc.prototype,{confirm:{name:"confirm",j:[Vl("verificationCode")]}}),Zl(co,"fromJSON",(function(t){t="string"==typeof t?JSON.parse(t):t;for(var e,n=[go,Ro,Lo,po],r=0;r<n.length;r++)if(e=n[r](t))return e;return null}),[Xl(Vl(),Hl(),"json")]),Zl(Oo,"credential",(function(t,e){return new No(t,e)}),[Vl("email"),Vl("password")]),Ql(No.prototype,{w:{name:"toJSON",j:[Vl(null,!0)]}}),Ql(_o.prototype,{Ca:{name:"addScope",j:[Vl("scope")]},Ka:{name:"setCustomParameters",j:[Hl("customOAuthParameters")]}}),Zl(_o,"credential",Io,[Xl(Vl(),Hl(),"token")]),Zl(Oo,"credentialWithLink",Do,[Vl("email"),Vl("emailLink")]),Ql(To.prototype,{Ca:{name:"addScope",j:[Vl("scope")]},Ka:{name:"setCustomParameters",j:[Hl("customOAuthParameters")]}}),Zl(To,"credential",Eo,[Xl(Vl(),Hl(),"token")]),Ql(So.prototype,{Ca:{name:"addScope",j:[Vl("scope")]},Ka:{name:"setCustomParameters",j:[Hl("customOAuthParameters")]}}),Zl(So,"credential",Ao,[Xl(Vl(),Xl(Hl(),zl()),"idToken"),Xl(Vl(),zl(),"accessToken",!0)]),Ql(ko.prototype,{Ka:{name:"setCustomParameters",j:[Hl("customOAuthParameters")]}}),Zl(ko,"credential",Co,[Xl(Vl(),Hl(),"token"),Vl("secret",!0)]),Ql(wo.prototype,{Ca:{name:"addScope",j:[Vl("scope")]},credential:{name:"credential",j:[Xl(Vl(),Xl(Hl(),zl()),"optionsOrIdToken"),Xl(Vl(),zl(),"accessToken",!0)]},Ka:{name:"setCustomParameters",j:[Hl("customOAuthParameters")]}}),Ql(mo.prototype,{w:{name:"toJSON",j:[Vl(null,!0)]}}),Ql(lo.prototype,{w:{name:"toJSON",j:[Vl(null,!0)]}}),Zl(jo,"credential",Uo,[Vl("verificationId"),Vl("verificationCode")]),Ql(jo.prototype,{gb:{name:"verifyPhoneNumber",j:[Xl(Vl(),{name:"phoneInfoOptions",K:"valid phone info options",optional:!1,M:function(t){return!!t&&(t.session&&t.phoneNumber?Jl(t.session,ao)&&"string"==typeof t.phoneNumber:t.session&&t.multiFactorHint?Jl(t.session,uo)&&$l(t.multiFactorHint):t.session&&t.multiFactorUid?Jl(t.session,uo)&&"string"==typeof t.multiFactorUid:!!t.phoneNumber&&"string"==typeof t.phoneNumber)}},"phoneInfoOptions"),{name:"applicationVerifier",K:"an implementation of firebase.auth.ApplicationVerifier",optional:!1,M:function(t){return!(!t||"string"!=typeof t.type||"function"!=typeof t.verify)}}]}}),Ql(Po.prototype,{w:{name:"toJSON",j:[Vl(null,!0)]}}),Ql(A.prototype,{toJSON:{name:"toJSON",j:[Vl(null,!0)]}}),Ql(Wo.prototype,{toJSON:{name:"toJSON",j:[Vl(null,!0)]}}),Ql(zo.prototype,{toJSON:{name:"toJSON",j:[Vl(null,!0)]}}),Ql(nh.prototype,{toJSON:{name:"toJSON",j:[Vl(null,!0)]}}),Ql(Zc.prototype,{Rc:{name:"resolveSignIn",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}}]}}),Ql(uh.prototype,{Sb:{name:"getSession",j:[]},fc:{name:"enroll",j:[{name:"multiFactorAssertion",K:"a valid multiFactorAssertion",optional:!1,M:function(t){return!!t&&!!t.tb}},Vl("displayName",!0)]},bd:{name:"unenroll",j:[Xl({name:"multiFactorInfo",K:"a valid multiFactorInfo",optional:!1,M:$l},Vl(),"multiFactorInfoIdentifier")]}}),Ql(Fl.prototype,{clear:{name:"clear",j:[]},render:{name:"render",j:[]},verify:{name:"verify",j:[]}}),Zl(Ii,"parseLink",Ri,[Vl("link")]),Zl(El,"assertion",(function(t){return new sh(t)}),[Wl("phone")]),function(){if(void 0===r.Z||!r.Z.INTERNAL||!r.Z.INTERNAL.registerComponent)throw Error("Cannot find the firebase namespace; be sure to include firebase-app.js before this library.");var t={ActionCodeInfo:{Operation:{EMAIL_SIGNIN:hi,PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:ci,VERIFY_AND_CHANGE_EMAIL:li,VERIFY_EMAIL:"VERIFY_EMAIL"}},Auth:il,AuthCredential:co,Error:A};Zl(t,"EmailAuthProvider",Oo,[]),Zl(t,"FacebookAuthProvider",_o,[]),Zl(t,"GithubAuthProvider",To,[]),Zl(t,"GoogleAuthProvider",So,[]),Zl(t,"TwitterAuthProvider",ko,[]),Zl(t,"OAuthProvider",wo,[Vl("providerId")]),Zl(t,"SAMLAuthProvider",bo,[Vl("providerId")]),Zl(t,"PhoneAuthProvider",jo,[{name:"auth",K:"an instance of Firebase Auth",optional:!0,M:function(t){return!!(t&&t instanceof il)}}]),Zl(t,"RecaptchaVerifier",Fl,[Xl(Vl(),{name:"",K:"an HTML element",optional:!1,M:function(t){return!!(t&&t instanceof Element)}},"recaptchaContainer"),Hl("recaptchaParameters",!0),{name:"app",K:"an instance of Firebase App",optional:!0,M:function(t){return!!(t&&t instanceof r.Z.app.App)}}]),Zl(t,"ActionCodeURL",Ii,[]),Zl(t,"PhoneMultiFactorGenerator",El,[]),r.Z.INTERNAL.registerComponent({name:"auth",instanceFactory:function(t){return new il(t=t.getProvider("app").getImmediate())},multipleInstances:!1,serviceProps:t,instantiationMode:"LAZY",type:"PUBLIC",onInstanceCreated:function(t){t.getProvider("auth-internal").initialize()}}),r.Z.INTERNAL.registerComponent({name:"auth-internal",instanceFactory:function(t){return{getUid:_((t=t.getProvider("auth").getImmediate()).getUid,t),getToken:_(t.nc,t),addAuthTokenListener:_(t.cc,t),removeAuthTokenListener:_(t.Pc,t)}},multipleInstances:!1,instantiationMode:"LAZY",type:"PRIVATE"}),r.Z.registerVersion("@firebase/auth","0.16.8"),r.Z.INTERNAL.extendNamespace({User:gh})}()}).apply("undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},9433:(t,e,n)=>{"use strict";n.r(e);var r=n(6099),i=n(655),o=n(4589),s=n(4594),a=function(t,e){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var c,h="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},l=l||{},f=h||self;function d(){}function p(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function m(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var v="closure_uid_"+(1e9*Math.random()>>>0),g=0;function y(t,e,n){return t.call.apply(t.bind,arguments)}function b(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function w(t,e,n){return(w=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?y:b).apply(null,arguments)}function _(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function I(t,e){function n(){}n.prototype=e.prototype,t.Z=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Vb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function T(){this.s=this.s,this.o=this.o}var E={};T.prototype.s=!1,T.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var t=function(t){return Object.prototype.hasOwnProperty.call(t,v)&&t[v]||(t[v]=++g)}(this);delete E[t]}},T.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};var S=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},A=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function k(t){return Array.prototype.concat.apply([],arguments)}function C(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function N(t){return/^[\s\xa0]*$/.test(t)}var R,O=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function D(t,e){return-1!=t.indexOf(e)}function x(t,e){return t<e?-1:t>e?1:0}t:{var P=f.navigator;if(P){var L=P.userAgent;if(L){R=L;break t}}R=""}function M(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function j(t){var e={};for(var n in t)e[n]=t[n];return e}var U="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function F(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<U.length;o++)n=U[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function q(t){return q[" "](t),t}q[" "]=d;var B,V,G=D(R,"Opera"),H=D(R,"Trident")||D(R,"MSIE"),K=D(R,"Edge"),z=K||H,W=D(R,"Gecko")&&!(D(R.toLowerCase(),"webkit")&&!D(R,"Edge"))&&!(D(R,"Trident")||D(R,"MSIE"))&&!D(R,"Edge"),J=D(R.toLowerCase(),"webkit")&&!D(R,"Edge");function $(){var t=f.document;return t?t.documentMode:void 0}t:{var X="",Q=(V=R,W?/rv:([^\);]+)(\)|;)/.exec(V):K?/Edge\/([\d\.]+)/.exec(V):H?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(V):J?/WebKit\/(\S+)/.exec(V):G?/(?:Version)[ \/]?(\S+)/.exec(V):void 0);if(Q&&(X=Q?Q[1]:""),H){var Y=$();if(null!=Y&&Y>parseFloat(X)){B=String(Y);break t}}B=X}var Z,tt={};function et(){return t=tt,Object.prototype.hasOwnProperty.call(t,9)?t[9]:t[9]=function(){for(var t=0,e=O(String(B)).split("."),n=O("9").split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=x(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||x(0==o[2].length,0==s[2].length)||x(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t}();var t}f.document&&H?Z=$()||parseInt(B,10)||void 0:Z=void 0;var nt=Z,rt=function(){if(!f.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{f.addEventListener("test",d,e),f.removeEventListener("test",d,e)}catch(t){}return t}();function it(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}function ot(t,e){if(it.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(W){t:{try{q(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:st[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&ot.Z.h.call(this)}}it.prototype.h=function(){this.defaultPrevented=!0},I(ot,it);var st={2:"touch",3:"pen",4:"mouse"};ot.prototype.h=function(){ot.Z.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var at="closure_listenable_"+(1e6*Math.random()|0),ut=0;function ct(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ia=i,this.key=++ut,this.ca=this.fa=!1}function ht(t){t.ca=!0,t.listener=null,t.proxy=null,t.src=null,t.ia=null}function lt(t){this.src=t,this.g={},this.h=0}function ft(t,e){var n=e.type;if(n in t.g){var r,i=t.g[n],o=S(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(ht(e),0==t.g[n].length&&(delete t.g[n],t.h--))}}function dt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.ca&&o.listener==e&&o.capture==!!n&&o.ia==r)return i}return-1}lt.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.g[o])||(t=this.g[o]=[],this.h++);var s=dt(t,e,r,i);return-1<s?(e=t[s],n||(e.fa=!1)):((e=new ct(e,this.src,o,!!r,i)).fa=n,t.push(e)),e};var pt="closure_lm_"+(1e6*Math.random()|0),mt={};function vt(t,e,n,r,i){if(r&&r.once)return yt(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)vt(t,e[o],n,r,i);return null}return n=St(n),t&&t[at]?t.N(e,n,m(r)?!!r.capture:!!r,i):gt(t,e,n,!1,r,i)}function gt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=m(i)?!!i.capture:!!i,a=Tt(t);if(a||(t[pt]=a=new lt(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=It;return function e(n){return t.call(e.src,e.listener,n)}}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)rt||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(_t(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function yt(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)yt(t,e[o],n,r,i);return null}return n=St(n),t&&t[at]?t.O(e,n,m(r)?!!r.capture:!!r,i):gt(t,e,n,!0,r,i)}function bt(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)bt(t,e[o],n,r,i);else r=m(r)?!!r.capture:!!r,n=St(n),t&&t[at]?(t=t.i,(e=String(e).toString())in t.g&&-1<(n=dt(o=t.g[e],n,r,i))&&(ht(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.g[e],t.h--))):t&&(t=Tt(t))&&(e=t.g[e.toString()],t=-1,e&&(t=dt(e,n,r,i)),(n=-1<t?e[t]:null)&&wt(n))}function wt(t){if("number"!=typeof t&&t&&!t.ca){var e=t.src;if(e&&e[at])ft(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(_t(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Tt(e))?(ft(n,t),0==n.h&&(n.src=null,e[pt]=null)):ht(t)}}}function _t(t){return t in mt?mt[t]:mt[t]="on"+t}function It(t,e){if(t.ca)t=!0;else{e=new ot(e,this);var n=t.listener,r=t.ia||t.src;t.fa&&wt(t),t=n.call(r,e)}return t}function Tt(t){return(t=t[pt])instanceof lt?t:null}var Et="__closure_events_fn_"+(1e9*Math.random()>>>0);function St(t){return"function"==typeof t?t:(t[Et]||(t[Et]=function(e){return t.handleEvent(e)}),t[Et])}function At(){T.call(this),this.i=new lt(this),this.P=this,this.I=null}function kt(t,e){var n,r=t.I;if(r)for(n=[];r;r=r.I)n.push(r);if(t=t.P,r=e.type||e,"string"==typeof e)e=new it(e,t);else if(e instanceof it)e.target=e.target||t;else{var i=e;F(e=new it(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=Ct(s,r,!0,e)&&i}if(i=Ct(s=e.g=t,r,!0,e)&&i,i=Ct(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=Ct(s=e.g=n[o],r,!1,e)&&i}function Ct(t,e,n,r){if(!(e=t.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.ca&&s.capture==n){var a=s.listener,u=s.ia||s.src;s.fa&&ft(t.i,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}I(At,T),At.prototype[at]=!0,At.prototype.removeEventListener=function(t,e,n,r){bt(this,t,e,n,r)},At.prototype.M=function(){if(At.Z.M.call(this),this.i){var t,e=this.i;for(t in e.g){for(var n=e.g[t],r=0;r<n.length;r++)ht(n[r]);delete e.g[t],e.h--}}this.I=null},At.prototype.N=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)},At.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};var Nt=f.JSON.stringify;function Rt(){var t=Ut,e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}var Ot,Dt=function(){function t(){this.h=this.g=null}return t.prototype.add=function(t,e){var n=xt.get();n.set(t,e),this.h?this.h.next=n:this.g=n,this.h=n},t}(),xt=new(function(){function t(t,e){this.i=t,this.j=e,this.h=0,this.g=null}return t.prototype.get=function(){var t;return 0<this.h?(this.h--,t=this.g,this.g=t.next,t.next=null):t=this.i(),t},t}())((function(){return new Pt}),(function(t){return t.reset()})),Pt=function(){function t(){this.next=this.g=this.h=null}return t.prototype.set=function(t,e){this.h=t,this.g=e,this.next=null},t.prototype.reset=function(){this.next=this.g=this.h=null},t}();function Lt(t){f.setTimeout((function(){throw t}),0)}function Mt(t,e){Ot||function(){var t=f.Promise.resolve(void 0);Ot=function(){t.then(Ft)}}(),jt||(Ot(),jt=!0),Ut.add(t,e)}var jt=!1,Ut=new Dt;function Ft(){for(var t;t=Rt();){try{t.h.call(t.g)}catch(t){Lt(t)}var e=xt;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}jt=!1}function qt(t,e){At.call(this),this.h=t||1,this.g=e||f,this.j=w(this.kb,this),this.l=Date.now()}function Bt(t){t.da=!1,t.S&&(t.g.clearTimeout(t.S),t.S=null)}function Vt(t,e,n){if("function"==typeof t)n&&(t=w(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=w(t.handleEvent,t)}return 2147483647<Number(e)?-1:f.setTimeout(t,e||0)}function Gt(t){t.g=Vt((function(){t.g=null,t.i&&(t.i=!1,Gt(t))}),t.j);var e=t.h;t.h=null,t.m.apply(null,e)}I(qt,At),(c=qt.prototype).da=!1,c.S=null,c.kb=function(){if(this.da){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-t):(this.S&&(this.g.clearTimeout(this.S),this.S=null),kt(this,"tick"),this.da&&(Bt(this),this.start()))}},c.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},c.M=function(){qt.Z.M.call(this),Bt(this),delete this.g};var Ht=function(t){function e(e,n){var r=t.call(this)||this;return r.m=e,r.j=n,r.h=null,r.i=!1,r.g=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}a(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.l=function(t){this.h=arguments,this.g?this.i=!0:Gt(this)},e.prototype.M=function(){t.prototype.M.call(this),this.g&&(f.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)},e}(T);function Kt(t){T.call(this),this.h=t,this.g={}}I(Kt,T);var zt=[];function Wt(t,e,n,r){Array.isArray(n)||(n&&(zt[0]=n.toString()),n=zt);for(var i=0;i<n.length;i++){var o=vt(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function Jt(t){M(t.g,(function(t,e){this.g.hasOwnProperty(e)&&wt(t)}),t),t.g={}}function $t(){this.g=!0}function Xt(t,e,n,r){t.info((function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Nt(n)}catch(t){return e}}(t,n)+(r?" "+r:"")}))}Kt.prototype.M=function(){Kt.Z.M.call(this),Jt(this)},Kt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},$t.prototype.Aa=function(){this.g=!1},$t.prototype.info=function(){};var Qt={},Yt=null;function Zt(){return Yt=Yt||new At}function te(t){it.call(this,Qt.Ma,t)}function ee(t){var e=Zt();kt(e,new te(e,t))}function ne(t,e){it.call(this,Qt.STAT_EVENT,t),this.stat=e}function re(t){var e=Zt();kt(e,new ne(e,t))}function ie(t,e){it.call(this,Qt.Na,t),this.size=e}function oe(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return f.setTimeout((function(){t()}),e)}Qt.Ma="serverreachability",I(te,it),Qt.STAT_EVENT="statevent",I(ne,it),Qt.Na="timingevent",I(ie,it);var se={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},ae={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function ue(){}function ce(t){return t.h||(t.h=t.i())}function he(){}ue.prototype.h=null;var le,fe={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function de(){it.call(this,"d")}function pe(){it.call(this,"c")}function me(){}function ve(t,e,n,r){this.l=t,this.j=e,this.m=n,this.X=r||1,this.V=new Kt(this),this.P=ye,t=z?125:void 0,this.W=new qt(t),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ge}function ge(){this.i=null,this.g="",this.h=!1}I(de,it),I(pe,it),I(me,ue),me.prototype.g=function(){return new XMLHttpRequest},me.prototype.i=function(){return{}},le=new me;var ye=45e3,be={},we={};function _e(t,e,n){t.K=1,t.v=He(Ue(e)),t.s=n,t.U=!0,Ie(t,null)}function Ie(t,e){t.F=Date.now(),Ae(t),t.A=Ue(t.v);var n=t.A,r=t.X;Array.isArray(r)||(r=[String(r)]),rn(n.h,"t",r),t.C=0,n=t.l.H,t.h=new ge,t.g=or(t.l,n?e:null,!t.s),0<t.O&&(t.L=new Ht(w(t.Ia,t,t.g),t.O)),Wt(t.V,t.g,"readystatechange",t.gb),e=t.H?j(t.H):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ea(t.A,t.u,t.s,e)):(t.u="GET",t.g.ea(t.A,t.u,null,e)),ee(1),function(t,e,n,r,i,o){t.info((function(){if(t.g)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var h=c[0];c=c[1];var l=h.split("_");s=2<=l.length&&"type"==l[1]?s+(h+"=")+c+"&":s+(h+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s}))}(t.j,t.u,t.A,t.m,t.X,t.s)}function Te(t){return!!t.g&&"GET"==t.u&&2!=t.K&&t.l.Ba}function Ee(t,e,n){for(var r,i=!0;!t.I&&t.C<n.length;){if((r=Se(t,n))==we){4==e&&(t.o=4,re(14),i=!1),Xt(t.j,t.m,null,"[Incomplete Response]");break}if(r==be){t.o=4,re(15),Xt(t.j,t.m,n,"[Invalid Chunk]"),i=!1;break}Xt(t.j,t.m,r,null),Oe(t,r)}Te(t)&&r!=we&&r!=be&&(t.h.g="",t.C=0),4!=e||0!=n.length||t.h.h||(t.o=1,re(16),i=!1),t.i=t.i&&i,i?0<n.length&&!t.aa&&(t.aa=!0,(e=t.l).g==t&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Qn(e),e.L=!0,re(11))):(Xt(t.j,t.m,n,"[Invalid Chunked Response]"),Re(t),Ne(t))}function Se(t,e){var n=t.C,r=e.indexOf("\n",n);return-1==r?we:(n=Number(e.substring(n,r)),isNaN(n)?be:(r+=1)+n>e.length?we:(e=e.substr(r,n),t.C=r+n,e))}function Ae(t){t.Y=Date.now()+t.P,ke(t,t.P)}function ke(t,e){if(null!=t.B)throw Error("WatchDog timer not null");t.B=oe(w(t.eb,t),e)}function Ce(t){t.B&&(f.clearTimeout(t.B),t.B=null)}function Ne(t){0==t.l.G||t.I||tr(t.l,t)}function Re(t){Ce(t);var e=t.L;e&&"function"==typeof e.na&&e.na(),t.L=null,Bt(t.W),Jt(t.V),t.g&&(e=t.g,t.g=null,e.abort(),e.na())}function Oe(t,e){try{var n=t.l;if(0!=n.G&&(n.g==t||ln(n.i,t)))if(n.I=t.N,!t.J&&ln(n.i,t)&&3==n.G){try{var r=n.Ca.g.parse(e)}catch(o){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.u){if(n.g){if(!(n.g.F+3e3<t.F))break t;Zn(n),Vn(n)}Xn(n),re(18)}}else n.ta=i[1],0<n.ta-n.U&&37500>i[2]&&n.N&&0==n.A&&!n.v&&(n.v=oe(w(n.ab,n),6e3));if(1>=hn(n.i)&&n.ka){try{n.ka()}catch(o){}n.ka=void 0}}else nr(n,11)}else if((t.J||n.g==t)&&Zn(n),!N(e))for(i=n.Ca.g.parse(e),e=0;e<i.length;e++){var o=i[e];if(n.U=o[0],o=o[1],2==n.G)if("c"==o[0]){n.J=o[1],n.la=o[2];var s=o[3];null!=s&&(n.ma=s,n.h.info("VER="+n.ma));var a=o[4];null!=a&&(n.za=a,n.h.info("SVER="+n.za));var u=o[5];null!=u&&"number"==typeof u&&0<u&&(r=1.5*u,n.K=r,n.h.info("backChannelRequestTimeoutMs_="+r)),r=n;var c=t.g;if(c){var h=c.g?c.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(h){var l=r.i;!l.g&&(D(h,"spdy")||D(h,"quic")||D(h,"h2"))&&(l.j=l.l,l.g=new Set,l.h&&(fn(l,l.h),l.h=null))}if(r.D){var f=c.g?c.g.getResponseHeader("X-HTTP-Session-Id"):null;f&&(r.sa=f,Ge(r.F,r.D,f))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-t.F,n.h.info("Handshake RTT: "+n.O+"ms"));var d=t;if((r=n).oa=ir(r,r.H?r.la:null,r.W),d.J){dn(r.i,d);var p=d,m=r.K;m&&p.setTimeout(m),p.B&&(Ce(p),Ae(p)),r.g=d}else $n(r);0<n.l.length&&Kn(n)}else"stop"!=o[0]&&"close"!=o[0]||nr(n,7);else 3==n.G&&("stop"==o[0]||"close"==o[0]?"stop"==o[0]?nr(n,7):Bn(n):"noop"!=o[0]&&n.j&&n.j.wa(o),n.A=0)}ee(4)}catch(o){}}function De(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(p(t)||"string"==typeof t)A(t,e,void 0);else{if(t.T&&"function"==typeof t.T)var n=t.T();else if(t.R&&"function"==typeof t.R)n=void 0;else if(p(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.R&&"function"==typeof t.R)return t.R();if("string"==typeof t)return t.split("");if(p(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function xe(t,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof xe)for(n=t.T(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Pe(t){if(t.i!=t.g.length){for(var e=0,n=0;e<t.g.length;){var r=t.g[e];Le(t.h,r)&&(t.g[n++]=r),e++}t.g.length=n}if(t.i!=t.g.length){var i={};for(n=e=0;e<t.g.length;)Le(i,r=t.g[e])||(t.g[n++]=r,i[r]=1),e++;t.g.length=n}}function Le(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(c=ve.prototype).setTimeout=function(t){this.P=t},c.gb=function(t){t=t.target;var e=this.L;e&&3==Mn(t)?e.l():this.Ia(t)},c.Ia=function(t){try{if(t==this.g)t:{var e=Mn(this.g),n=this.g.Da(),r=this.g.ba();if(!(3>e)&&(3!=e||z||this.g&&(this.h.h||this.g.ga()||jn(this.g)))){this.I||4!=e||7==n||ee(8==n||0>=r?3:2),Ce(this);var i=this.g.ba();this.N=i;e:if(Te(this)){var o=jn(this.g);t="";var s=o.length,a=4==Mn(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){Re(this),Ne(this);var u="";break e}this.h.i=new f.TextDecoder}for(n=0;n<s;n++)this.h.h=!0,t+=this.h.i.decode(o[n],{stream:a&&n==s-1});o.splice(0,s),this.h.g+=t,this.C=0,u=this.h.g}else u=this.g.ga();if(this.i=200==i,function(t,e,n,r,i,o,s){t.info((function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s}))}(this.j,this.u,this.A,this.m,this.X,e,i),this.i){if(this.$&&!this.J){e:{if(this.g){var c,h=this.g;if((c=h.g?h.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!N(c)){var l=c;break e}}l=null}if(!(i=l)){this.i=!1,this.o=3,re(12),Re(this),Ne(this);break t}Xt(this.j,this.m,i,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,Oe(this,i)}this.U?(Ee(this,e,u),z&&this.i&&3==e&&(Wt(this.V,this.W,"tick",this.fb),this.W.start())):(Xt(this.j,this.m,u,null),Oe(this,u)),4==e&&Re(this),this.i&&!this.I&&(4==e?tr(this.l,this):(this.i=!1,Ae(this)))}else 400==i&&0<u.indexOf("Unknown SID")?(this.o=3,re(12)):(this.o=0,re(13)),Re(this),Ne(this)}}}catch(e){}},c.fb=function(){if(this.g){var t=Mn(this.g),e=this.g.ga();this.C<e.length&&(Ce(this),Ee(this,t,e),this.i&&4!=t&&Ae(this))}},c.cancel=function(){this.I=!0,Re(this)},c.eb=function(){this.B=null;var t=Date.now();0<=t-this.Y?(function(t,e){t.info((function(){return"TIMEOUT: "+e}))}(this.j,this.A),2!=this.K&&(ee(3),re(17)),Re(this),this.o=2,Ne(this)):ke(this,this.Y-t)},(c=xe.prototype).R=function(){Pe(this);for(var t=[],e=0;e<this.g.length;e++)t.push(this.h[this.g[e]]);return t},c.T=function(){return Pe(this),this.g.concat()},c.get=function(t,e){return Le(this.h,t)?this.h[t]:e},c.set=function(t,e){Le(this.h,t)||(this.i++,this.g.push(t)),this.h[t]=e},c.forEach=function(t,e){for(var n=this.T(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Me=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function je(t,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,t instanceof je){this.g=void 0!==e?e:t.g,Fe(this,t.j),this.s=t.s,qe(this,t.i),Be(this,t.m),this.l=t.l,e=t.h;var n=new Ze;n.i=e.i,e.g&&(n.g=new xe(e.g),n.h=e.h),Ve(this,n),this.o=t.o}else t&&(n=String(t).match(Me))?(this.g=!!e,Fe(this,n[1]||"",!0),this.s=Ke(n[2]||""),qe(this,n[3]||"",!0),Be(this,n[4]),this.l=Ke(n[5]||"",!0),Ve(this,n[6]||"",!0),this.o=Ke(n[7]||"")):(this.g=!!e,this.h=new Ze(null,this.g))}function Ue(t){return new je(t)}function Fe(t,e,n){t.j=n?Ke(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function qe(t,e,n){t.i=n?Ke(e,!0):e}function Be(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Ve(t,e,n){e instanceof Ze?(t.h=e,function(t,e){e&&!t.j&&(tn(t),t.i=null,t.g.forEach((function(t,e){var n=e.toLowerCase();e!=n&&(en(this,e),rn(this,n,t))}),t)),t.j=e}(t.h,t.g)):(n||(e=ze(e,Qe)),t.h=new Ze(e,t.g))}function Ge(t,e,n){t.h.set(e,n)}function He(t){return Ge(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function Ke(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ze(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,We),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function We(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}je.prototype.toString=function(){var t=[],e=this.j;e&&t.push(ze(e,Je,!0),":");var n=this.i;return(n||"file"==e)&&(t.push("//"),(e=this.s)&&t.push(ze(e,Je,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&t.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&t.push("/"),t.push(ze(n,"/"==n.charAt(0)?Xe:$e,!0))),(n=this.h.toString())&&t.push("?",n),(n=this.o)&&t.push("#",ze(n,Ye)),t.join("")};var Je=/[#\/\?@]/g,$e=/[#\?:]/g,Xe=/[#\?]/g,Qe=/[#\?@]/g,Ye=/#/g;function Ze(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function tn(t){t.g||(t.g=new xe,t.h=0,t.i&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.i,(function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)})))}function en(t,e){tn(t),e=on(t,e),Le(t.g.h,e)&&(t.i=null,t.h-=t.g.get(e).length,Le((t=t.g).h,e)&&(delete t.h[e],t.i--,t.g.length>2*t.i&&Pe(t)))}function nn(t,e){return tn(t),e=on(t,e),Le(t.g.h,e)}function rn(t,e,n){en(t,e),0<n.length&&(t.i=null,t.g.set(on(t,e),C(n)),t.h+=n.length)}function on(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}(c=Ze.prototype).add=function(t,e){tn(this),this.i=null,t=on(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this},c.forEach=function(t,e){tn(this),this.g.forEach((function(n,r){A(n,(function(n){t.call(e,n,r,this)}),this)}),this)},c.T=function(){tn(this);for(var t=this.g.R(),e=this.g.T(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},c.R=function(t){tn(this);var e=[];if("string"==typeof t)nn(this,t)&&(e=k(e,this.g.get(on(this,t))));else{t=this.g.R();for(var n=0;n<t.length;n++)e=k(e,t[n])}return e},c.set=function(t,e){return tn(this),this.i=null,nn(this,t=on(this,t))&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this},c.get=function(t,e){return t&&0<(t=this.R(t)).length?String(t[0]):e},c.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var t=[],e=this.g.T(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.R(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.i=t.join("&")};var sn=function(t,e){this.h=t,this.g=e};function an(t){this.l=t||un,t=f.PerformanceNavigationTiming?0<(t=f.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(f.g&&f.g.Ea&&f.g.Ea()&&f.g.Ea().Zb),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var un=10;function cn(t){return!!t.h||!!t.g&&t.g.size>=t.j}function hn(t){return t.h?1:t.g?t.g.size:0}function ln(t,e){return t.h?t.h==e:!!t.g&&t.g.has(e)}function fn(t,e){t.g?t.g.add(e):t.h=e}function dn(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}function pn(t){var e,n;if(null!=t.h)return t.i.concat(t.h.D);if(null!=t.g&&0!==t.g.size){var r=t.i;try{for(var i=u(t.g.values()),o=i.next();!o.done;o=i.next()){var s=o.value;r=r.concat(s.D)}}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return C(t.i)}function mn(){}function vn(){this.g=new mn}function gn(t,e,n){var r=n||"";try{De(t,(function(t,n){var i=t;m(t)&&(i=Nt(t)),e.push(r+n+"="+encodeURIComponent(i))}))}catch(t){throw e.push(r+"type="+encodeURIComponent("_badmap")),t}}function yn(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}function bn(t){this.l=t.$b||null,this.j=t.ib||!1}function wn(t,e){At.call(this),this.D=t,this.u=e,this.m=void 0,this.readyState=_n,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}an.prototype.cancel=function(){var t,e;if(this.i=pn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){try{for(var n=u(this.g.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.g.clear()}},mn.prototype.stringify=function(t){return f.JSON.stringify(t,void 0)},mn.prototype.parse=function(t){return f.JSON.parse(t,void 0)},I(bn,ue),bn.prototype.g=function(){return new wn(this.l,this.j)},bn.prototype.i=function(t){return function(){return t}}({}),I(wn,At);var _n=0;function In(t){t.j.read().then(t.Sa.bind(t)).catch(t.ha.bind(t))}function Tn(t){t.readyState=4,t.l=null,t.j=null,t.A=null,En(t)}function En(t){t.onreadystatechange&&t.onreadystatechange.call(t)}(c=wn.prototype).open=function(t,e){if(this.readyState!=_n)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,En(this)},c.send=function(t){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;var e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.D||f).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},c.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Tn(this)),this.readyState=_n},c.Va=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,En(this)),this.g&&(this.readyState=3,En(this),this.g)))if("arraybuffer"===this.responseType)t.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==f.ReadableStream&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;In(this)}else t.text().then(this.Ua.bind(this),this.ha.bind(this))},c.Sa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Tn(this):En(this),3==this.readyState&&In(this)}},c.Ua=function(t){this.g&&(this.response=this.responseText=t,Tn(this))},c.Ta=function(t){this.g&&(this.response=t,Tn(this))},c.ha=function(){this.g&&Tn(this)},c.setRequestHeader=function(t,e){this.v.append(t,e)},c.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""},c.getAllResponseHeaders=function(){if(!this.h)return"";for(var t=[],e=this.h.entries(),n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join("\r\n")},Object.defineProperty(wn.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(t){this.m=t?"include":"same-origin"}});var Sn=f.JSON.parse;function An(t){At.call(this),this.headers=new xe,this.u=t||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=kn,this.K=this.L=!1}I(An,At);var kn="",Cn=/^https?$/i,Nn=["POST","PUT"];function Rn(t){return"content-type"==t.toLowerCase()}function On(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Dn(t),Pn(t)}function Dn(t){t.D||(t.D=!0,kt(t,"complete"),kt(t,"error"))}function xn(t){if(t.h&&void 0!==l&&(!t.C[1]||4!=Mn(t)||2!=t.ba()))if(t.v&&4==Mn(t))Vt(t.Fa,0,t);else if(kt(t,"readystatechange"),4==Mn(t)){t.h=!1;try{var e,n=t.ba();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.H).match(Me)[1]||null;if(!o&&f.self&&f.self.location){var s=f.self.location.protocol;o=s.substr(0,s.length-1)}i=!Cn.test(o?o.toLowerCase():"")}e=i}if(e)kt(t,"complete"),kt(t,"success");else{t.m=6;try{var a=2<Mn(t)?t.g.statusText:""}catch(t){a=""}t.j=a+" ["+t.ba()+"]",Dn(t)}}finally{Pn(t)}}}function Pn(t,e){if(t.g){Ln(t);var n=t.g,r=t.C[0]?d:null;t.g=null,t.C=null,e||kt(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function Ln(t){t.g&&t.K&&(t.g.ontimeout=null),t.A&&(f.clearTimeout(t.A),t.A=null)}function Mn(t){return t.g?t.g.readyState:0}function jn(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.J){case kn:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch(t){return null}}function Un(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return M(t,(function(t,n){e+=n,e+=":",e+=t,e+="\r\n"})),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):Ge(t,e,n))}function Fn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function qn(t){this.za=0,this.l=[],this.h=new $t,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=Fn("failFast",!1,t),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=Fn("baseRetryDelayMs",5e3,t),this.$a=Fn("retryDelaySeedMs",1e4,t),this.Ya=Fn("forwardChannelMaxRetries",2,t),this.ra=Fn("forwardChannelRequestTimeoutMs",2e4,t),this.qa=t&&t.xmlHttpFactory||void 0,this.Ba=t&&t.Yb||!1,this.K=void 0,this.H=t&&t.supportsCrossDomainXhr||!1,this.J="",this.i=new an(t&&t.concurrentRequestLimit),this.Ca=new vn,this.ja=t&&t.fastHandshake||!1,this.Ra=t&&t.Wb||!1,t&&t.Aa&&this.h.Aa(),t&&t.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&t&&t.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!t||!1!==t.Xb}function Bn(t){if(Gn(t),3==t.G){var e=t.V++,n=Ue(t.F);Ge(n,"SID",t.J),Ge(n,"RID",e),Ge(n,"TYPE","terminate"),Wn(t,n),(e=new ve(t,t.h,e,void 0)).K=2,e.v=He(Ue(n)),n=!1,f.navigator&&f.navigator.sendBeacon&&(n=f.navigator.sendBeacon(e.v.toString(),"")),!n&&f.Image&&((new Image).src=e.v,n=!0),n||(e.g=or(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ae(e)}rr(t)}function Vn(t){t.g&&(Qn(t),t.g.cancel(),t.g=null)}function Gn(t){Vn(t),t.u&&(f.clearTimeout(t.u),t.u=null),Zn(t),t.i.cancel(),t.m&&("number"==typeof t.m&&f.clearTimeout(t.m),t.m=null)}function Hn(t,e){t.l.push(new sn(t.Za++,e)),3==t.G&&Kn(t)}function Kn(t){cn(t.i)||t.m||(t.m=!0,Mt(t.Ha,t),t.C=0)}function zn(t,e){var n;n=e?e.m:t.V++;var r=Ue(t.F);Ge(r,"SID",t.J),Ge(r,"RID",n),Ge(r,"AID",t.U),Wn(t,r),t.o&&t.s&&Un(r,t.o,t.s),n=new ve(t,t.h,n,t.C+1),null===t.o&&(n.H=t.s),e&&(t.l=e.D.concat(t.l)),e=Jn(t,n,1e3),n.setTimeout(Math.round(.5*t.ra)+Math.round(.5*t.ra*Math.random())),fn(t.i,n),_e(n,r,e)}function Wn(t,e){t.j&&De({},(function(t,n){Ge(e,n,t)}))}function Jn(t,e,n){n=Math.min(t.l.length,n);var r=t.j?w(t.j.Oa,t.j,t):null;t:for(var i=t.l,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].h,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].h,h=i[u].g;if(0>(c-=o))o=Math.max(0,i[u].h-100),a=!1;else try{gn(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(a){r=s.join("&");break t}}return t=t.l.splice(0,n),e.D=t,r}function $n(t){t.g||t.u||(t.Y=1,Mt(t.Ga,t),t.A=0)}function Xn(t){return!(t.g||t.u||3<=t.A||(t.Y++,t.u=oe(w(t.Ga,t),er(t,t.A)),t.A++,0))}function Qn(t){null!=t.B&&(f.clearTimeout(t.B),t.B=null)}function Yn(t){t.g=new ve(t,t.h,"rpc",t.Y),null===t.o&&(t.g.H=t.s),t.g.O=0;var e=Ue(t.oa);Ge(e,"RID","rpc"),Ge(e,"SID",t.J),Ge(e,"CI",t.N?"0":"1"),Ge(e,"AID",t.U),Wn(t,e),Ge(e,"TYPE","xmlhttp"),t.o&&t.s&&Un(e,t.o,t.s),t.K&&t.g.setTimeout(t.K);var n=t.g;t=t.la,n.K=1,n.v=He(Ue(e)),n.s=null,n.U=!0,Ie(n,t)}function Zn(t){null!=t.v&&(f.clearTimeout(t.v),t.v=null)}function tr(t,e){var n=null;if(t.g==e){Zn(t),Qn(t),t.g=null;var r=2}else{if(!ln(t.i,e))return;n=e.D,dn(t.i,e),r=1}if(t.I=e.N,0!=t.G)if(e.i)if(1==r){n=e.s?e.s.length:0,e=Date.now()-e.F;var i=t.C;kt(r=Zt(),new ie(r,n,e,i)),Kn(t)}else $n(t);else if(3==(i=e.o)||0==i&&0<t.I||!(1==r&&function(t,e){return!(hn(t.i)>=t.i.j-(t.m?1:0)||(t.m?(t.l=e.D.concat(t.l),0):1==t.G||2==t.G||t.C>=(t.Xa?0:t.Ya)||(t.m=oe(w(t.Ha,t,e),er(t,t.C)),t.C++,0)))}(t,e)||2==r&&Xn(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:nr(t,5);break;case 4:nr(t,10);break;case 3:nr(t,6);break;default:nr(t,2)}}function er(t,e){var n=t.Pa+Math.floor(Math.random()*t.$a);return t.j||(n*=2),n*e}function nr(t,e){if(t.h.info("Error code "+e),2==e){var n=null;t.j&&(n=null);var r=w(t.jb,t);n||(n=new je("//www.google.com/images/cleardot.gif"),f.location&&"http"==f.location.protocol||Fe(n,"https"),He(n)),function(t,e){var n=new $t;if(f.Image){var r=new Image;r.onload=_(yn,n,r,"TestLoadImage: loaded",!0,e),r.onerror=_(yn,n,r,"TestLoadImage: error",!1,e),r.onabort=_(yn,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=_(yn,n,r,"TestLoadImage: timeout",!1,e),f.setTimeout((function(){r.ontimeout&&r.ontimeout()}),1e4),r.src=t}else e(!1)}(n.toString(),r)}else re(2);t.G=0,t.j&&t.j.va(e),rr(t),Gn(t)}function rr(t){t.G=0,t.I=-1,t.j&&(0==pn(t.i).length&&0==t.l.length||(t.i.i.length=0,C(t.l),t.l.length=0),t.j.ua())}function ir(t,e,n){var r=function(t){return t instanceof je?Ue(t):new je(t,void 0)}(n);if(""!=r.i)e&&qe(r,e+"."+r.i),Be(r,r.m);else{var i=f.location;r=function(t,e,n,r){var i=new je(null,void 0);return t&&Fe(i,t),e&&qe(i,e),n&&Be(i,n),r&&(i.l=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.aa&&M(t.aa,(function(t,e){Ge(r,e,t)})),e=t.D,n=t.sa,e&&n&&Ge(r,e,n),Ge(r,"VER",t.ma),Wn(t,r),r}function or(t,e,n){if(e&&!t.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=n&&t.Ba&&!t.qa?new An(new bn({ib:!0})):new An(t.qa)).L=t.H,e}function sr(){}function ar(){if(H&&!(10<=Number(nt)))throw Error("Environmental error: no available transport.")}function ur(t,e){At.call(this),this.g=new qn(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(t?t["X-WebChannel-Client-Profile"]=e.ya:t={"X-WebChannel-Client-Profile":e.ya}),this.g.P=t,(t=e&&e.httpHeadersOverwriteParam)&&!N(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!N(e)&&(this.g.D=e,null!==(t=this.h)&&e in t&&e in(t=this.h)&&delete t[e]),this.j=new lr(this)}function cr(t){de.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.i=t)&&(t=this.i,e=null!==e&&t in e?e[t]:void 0),this.data=e}else this.data=t}function hr(){pe.call(this),this.status=1}function lr(t){this.g=t}(c=An.prototype).ea=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+t);e=e?e.toUpperCase():"GET",this.H=t,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():le.g(),this.C=this.u?ce(this.u):ce(le),this.g.onreadystatechange=w(this.Fa,this);try{this.F=!0,this.g.open(e,String(t),!0),this.F=!1}catch(t){return void On(this,t)}t=n||"";var i=new xe(this.headers);r&&De(r,(function(t,e){i.set(e,t)})),r=function(t){t:{for(var e=Rn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.T()),n=f.FormData&&t instanceof f.FormData,!(0<=S(Nn,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach((function(t,e){this.g.setRequestHeader(e,t)}),this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ln(this),0<this.B&&((this.K=function(t){return H&&et()&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=w(this.pa,this)):this.A=Vt(this.pa,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(t){On(this,t)}},c.pa=function(){void 0!==l&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,kt(this,"timeout"),this.abort(8))},c.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,kt(this,"complete"),kt(this,"abort"),Pn(this))},c.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Pn(this,!0)),An.Z.M.call(this)},c.Fa=function(){this.s||(this.F||this.v||this.l?xn(this):this.cb())},c.cb=function(){xn(this)},c.ba=function(){try{return 2<Mn(this)?this.g.status:-1}catch(t){return-1}},c.ga=function(){try{return this.g?this.g.responseText:""}catch(t){return""}},c.Qa=function(t){if(this.g){var e=this.g.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Sn(e)}},c.Da=function(){return this.m},c.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(c=qn.prototype).ma=8,c.G=1,c.hb=function(t){try{this.h.info("Origin Trials invoked: "+t)}catch(t){}},c.Ha=function(t){if(this.m)if(this.m=null,1==this.G){if(!t){this.V=Math.floor(1e5*Math.random()),t=this.V++;var e=new ve(this,this.h,t,void 0),n=this.s;if(this.P&&(n?F(n=j(n),this.P):n=this.P),null===this.o&&(e.H=n),this.ja)t:{for(var r=0,i=0;i<this.l.length;i++){var o=this.l[i];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(r+=o)){r=i;break t}if(4096===r||i===this.l.length-1){r=i+1;break t}}r=1e3}else r=1e3;r=Jn(this,e,r),Ge(i=Ue(this.F),"RID",t),Ge(i,"CVER",22),this.D&&Ge(i,"X-HTTP-Session-Id",this.D),Wn(this,i),this.o&&n&&Un(i,this.o,n),fn(this.i,e),this.Ra&&Ge(i,"TYPE","init"),this.ja?(Ge(i,"$req",r),Ge(i,"SID","null"),e.$=!0,_e(e,i,null)):_e(e,i,r),this.G=2}}else 3==this.G&&(t?zn(this,t):0==this.l.length||cn(this.i)||zn(this))},c.Ga=function(){if(this.u=null,Yn(this),this.$&&!(this.L||null==this.g||0>=this.O)){var t=2*this.O;this.h.info("BP detection timer enabled: "+t),this.B=oe(w(this.bb,this),t)}},c.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,re(10),Vn(this),Yn(this))},c.ab=function(){null!=this.v&&(this.v=null,Vn(this),Xn(this),re(19))},c.jb=function(t){t?(this.h.info("Successfully pinged google.com"),re(2)):(this.h.info("Failed to ping google.com"),re(1))},(c=sr.prototype).xa=function(){},c.wa=function(){},c.va=function(){},c.ua=function(){},c.Oa=function(){},ar.prototype.g=function(t,e){return new ur(t,e)},I(ur,At),ur.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var t=this.g,e=this.l,n=this.h||void 0;t.Wa&&(t.h.info("Origin Trials enabled."),Mt(w(t.hb,t,e))),re(0),t.W=e,t.aa=n||{},t.N=t.X,t.F=ir(t,null,t.W),Kn(t)},ur.prototype.close=function(){Bn(this.g)},ur.prototype.u=function(t){if("string"==typeof t){var e={};e.__data__=t,Hn(this.g,e)}else this.v?((e={}).__data__=Nt(t),Hn(this.g,e)):Hn(this.g,t)},ur.prototype.M=function(){this.g.j=null,delete this.j,Bn(this.g),delete this.g,ur.Z.M.call(this)},I(cr,de),I(hr,pe),I(lr,sr),lr.prototype.xa=function(){kt(this.g,"a")},lr.prototype.wa=function(t){kt(this.g,new cr(t))},lr.prototype.va=function(t){kt(this.g,new hr(t))},lr.prototype.ua=function(){kt(this.g,"b")},ar.prototype.createWebChannel=ar.prototype.g,ur.prototype.send=ur.prototype.u,ur.prototype.open=ur.prototype.m,ur.prototype.close=ur.prototype.close,se.NO_ERROR=0,se.TIMEOUT=8,se.HTTP_ERROR=6,ae.COMPLETE="complete",he.EventType=fe,fe.OPEN="a",fe.CLOSE="b",fe.ERROR="c",fe.MESSAGE="d",At.prototype.listen=At.prototype.N,An.prototype.listenOnce=An.prototype.O,An.prototype.getLastError=An.prototype.La,An.prototype.getLastErrorCode=An.prototype.Da,An.prototype.getStatus=An.prototype.ba,An.prototype.getResponseJson=An.prototype.Qa,An.prototype.getResponseText=An.prototype.ga,An.prototype.send=An.prototype.ea;var fr=se,dr=ae,pr=Qt,mr=10,vr=11,gr=bn,yr=he,br=An,wr=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();wr.o=-1;var _r={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Ir=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return(0,i.ZT)(e,t),e}(Error),Tr=new s.Yd("@firebase/firestore");function Er(){return Tr.logLevel}function Sr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Tr.logLevel<=s.in.DEBUG){var r=e.map(Cr);Tr.debug.apply(Tr,(0,i.ev)(["Firestore (8.10.0): "+t],r))}}function Ar(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Tr.logLevel<=s.in.ERROR){var r=e.map(Cr);Tr.error.apply(Tr,(0,i.ev)(["Firestore (8.10.0): "+t],r))}}function kr(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(Tr.logLevel<=s.in.WARN){var r=e.map(Cr);Tr.warn.apply(Tr,(0,i.ev)(["Firestore (8.10.0): "+t],r))}}function Cr(t){if("string"==typeof t)return t;try{return e=t,JSON.stringify(e)}catch(e){return t}var e}function Nr(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.10.0) INTERNAL ASSERTION FAILED: "+t;throw Ar(e),new Error(e)}function Rr(t,e){t||Nr()}function Or(t,e){return t}function Dr(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var xr=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Dr(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Pr(t,e){return t<e?-1:t>e?1:0}function Lr(t,e,n){return t.length===e.length&&t.every((function(t,r){return n(t,e[r])}))}function Mr(t){return t+"\0"}var jr=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Ir(_r.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Ir(_r.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Ir(_r.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Ir(_r.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,Math.floor(1e6*(e-1e3*n)))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Pr(this.nanoseconds,t.nanoseconds):Pr(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}(),Ur=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new jr(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}();function Fr(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function qr(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Br(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}var Vr=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Nr(),void 0===n?n=t.length-e:n>t.length-e&&Nr(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach((function(t){n.push(t)})):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return t=void 0===t?1:t,this.construct(this.segments,this.offset+t,this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Gr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Ir(_r.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter((function(t){return t.length>0})))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Vr),Hr=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Kr=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Hr.test(t)},e.prototype.canonicalString=function(){return this.toArray().map((function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t})).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Ir(_r.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Ir(_r.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Ir(_r.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Ir(_r.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Vr),zr=function(){function t(t){this.fields=t,t.sort(Kr.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Lr(this.fields,t.fields,(function(t,e){return t.isEqual(e)}))},t}(),Wr=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return t=this.binaryString,btoa(t);var t},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Pr(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();Wr.EMPTY_BYTE_STRING=new Wr("");var Jr=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function $r(t){if(Rr(!!t),"string"==typeof t){var e=0,n=Jr.exec(t);if(Rr(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Xr(t.seconds),nanos:Xr(t.nanos)}}function Xr(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function Qr(t){return"string"==typeof t?Wr.fromBase64String(t):Wr.fromUint8Array(t)}function Yr(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Zr(t){var e=t.mapValue.fields.__previous_value__;return Yr(e)?Zr(e):e}function ti(t){var e=$r(t.mapValue.fields.__local_write_time__.timestampValue);return new jr(e.seconds,e.nanos)}function ei(t){return null==t}function ni(t){return 0===t&&1/t==-1/0}function ri(t){return"number"==typeof t&&Number.isInteger(t)&&!ni(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var ii=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Gr.fromString(e))},t.fromName=function(e){return new t(Gr.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Gr.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Gr.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Gr(e.slice()))},t}();function oi(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Yr(t)?4:10:Nr()}function si(t,e){var n=oi(t);if(n!==oi(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ti(t).isEqual(ti(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=$r(t.timestampValue),r=$r(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return Qr(t.bytesValue).isEqual(Qr(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return Xr(t.geoPointValue.latitude)===Xr(e.geoPointValue.latitude)&&Xr(t.geoPointValue.longitude)===Xr(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Xr(t.integerValue)===Xr(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=Xr(t.doubleValue),r=Xr(e.doubleValue);return n===r?ni(n)===ni(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Lr(t.arrayValue.values||[],e.arrayValue.values||[],si);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Fr(n)!==Fr(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!si(n[i],r[i])))return!1;return!0}(t,e);default:return Nr()}}function ai(t,e){return void 0!==(t.values||[]).find((function(t){return si(t,e)}))}function ui(t,e){var n=oi(t),r=oi(e);if(n!==r)return Pr(n,r);switch(n){case 0:return 0;case 1:return Pr(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=Xr(t.integerValue||t.doubleValue),r=Xr(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return ci(t.timestampValue,e.timestampValue);case 4:return ci(ti(t),ti(e));case 5:return Pr(t.stringValue,e.stringValue);case 6:return function(t,e){var n=Qr(t),r=Qr(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Pr(n[i],r[i]);if(0!==o)return o}return Pr(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Pr(Xr(t.latitude),Xr(e.latitude));return 0!==n?n:Pr(Xr(t.longitude),Xr(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=ui(n[i],r[i]);if(o)return o}return Pr(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Pr(r[s],o[s]);if(0!==a)return a;var u=ui(n[r[s]],i[o[s]]);if(0!==u)return u}return Pr(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Nr()}}function ci(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Pr(t,e);var n=$r(t),r=$r(e),i=Pr(n.seconds,r.seconds);return 0!==i?i:Pr(n.nanos,r.nanos)}function hi(t){return li(t)}function li(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=$r(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?Qr(t.bytesValue).toBase64():"referenceValue"in t?(n=t.referenceValue,ii.fromName(n).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=li(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+li(t.fields[o])}return e+"}"}(t.mapValue):Nr();var e,n}function fi(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function di(t){return!!t&&"integerValue"in t}function pi(t){return!!t&&"arrayValue"in t}function mi(t){return!!t&&"nullValue"in t}function vi(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function gi(t){return!!t&&"mapValue"in t}function yi(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&"object"==typeof t.timestampValue)return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){var e={mapValue:{fields:{}}};return qr(t.mapValue.fields,(function(t,n){return e.mapValue.fields[t]=yi(n)})),e}if(t.arrayValue){for(var n={arrayValue:{values:[]}},r=0;r<(t.arrayValue.values||[]).length;++r)n.arrayValue.values[r]=yi(t.arrayValue.values[r]);return n}return Object.assign({},t)}var bi=function(){function t(t){this.value=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.value;for(var e=this.value,n=0;n<t.length-1;++n)if(!gi(e=(e.mapValue.fields||{})[t.get(n)]))return null;return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.set=function(t,e){this.getFieldsMap(t.popLast())[t.lastSegment()]=yi(e)},t.prototype.setAll=function(t){var e=this,n=Kr.emptyPath(),r={},i=[];t.forEach((function(t,o){if(!n.isImmediateParentOf(o)){var s=e.getFieldsMap(n);e.applyChanges(s,r,i),r={},i=[],n=o.popLast()}t?r[o.lastSegment()]=yi(t):i.push(o.lastSegment())}));var o=this.getFieldsMap(n);this.applyChanges(o,r,i)},t.prototype.delete=function(t){var e=this.field(t.popLast());gi(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]},t.prototype.isEqual=function(t){return si(this.value,t.value)},t.prototype.getFieldsMap=function(t){var e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(var n=0;n<t.length;++n){var r=e.mapValue.fields[t.get(n)];gi(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields},t.prototype.applyChanges=function(t,e,n){qr(e,(function(e,n){return t[e]=n}));for(var r=0,i=n;r<i.length;r++){var o=i[r];delete t[o]}},t.prototype.clone=function(){return new t(yi(this.value))},t}();function wi(t){var e=[];return qr(t.fields,(function(t,n){var r=new Kr([t]);if(gi(n)){var i=wi(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++){var a=s[o];e.push(r.child(a))}}else e.push(r)})),new zr(e)}var _i=function(){function t(t,e,n,r,i){this.key=t,this.documentType=e,this.version=n,this.data=r,this.documentState=i}return t.newInvalidDocument=function(e){return new t(e,0,Ur.min(),bi.empty(),0)},t.newFoundDocument=function(e,n,r){return new t(e,1,n,r,0)},t.newNoDocument=function(e,n){return new t(e,2,n,bi.empty(),0)},t.newUnknownDocument=function(e,n){return new t(e,3,n,bi.empty(),2)},t.prototype.convertToFoundDocument=function(t,e){return this.version=t,this.documentType=1,this.data=e,this.documentState=0,this},t.prototype.convertToNoDocument=function(t){return this.version=t,this.documentType=2,this.data=bi.empty(),this.documentState=0,this},t.prototype.convertToUnknownDocument=function(t){return this.version=t,this.documentType=3,this.data=bi.empty(),this.documentState=2,this},t.prototype.setHasCommittedMutations=function(){return this.documentState=2,this},t.prototype.setHasLocalMutations=function(){return this.documentState=1,this},Object.defineProperty(t.prototype,"hasLocalMutations",{get:function(){return 1===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasCommittedMutations",{get:function(){return 2===this.documentState},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),t.prototype.isValidDocument=function(){return 0!==this.documentType},t.prototype.isFoundDocument=function(){return 1===this.documentType},t.prototype.isNoDocument=function(){return 2===this.documentType},t.prototype.isUnknownDocument=function(){return 3===this.documentType},t.prototype.isEqual=function(e){return e instanceof t&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)},t.prototype.clone=function(){return new t(this.key,this.documentType,this.version,this.data.clone(),this.documentState)},t.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+JSON.stringify(this.data.value)+", {documentType: "+this.documentType+"}), {documentState: "+this.documentState+"})"},t}(),Ii=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function Ti(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Ii(t,e,n,r,i,o,s)}function Ei(t){var e=Or(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((function(t){return function(t){return t.field.canonicalString()+t.op.toString()+hi(t.value)}(t)})).join(","),n+="|ob:",n+=e.orderBy.map((function(t){return function(t){return t.field.canonicalString()+t.dir}(t)})).join(","),ei(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=ji(e.startAt)),e.endAt&&(n+="|ub:",n+=ji(e.endAt)),e.h=n}return e.h}function Si(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!Fi(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if(i=t.filters[r],o=e.filters[r],i.op!==o.op||!i.field.isEqual(o.field)||!si(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Bi(t.startAt,e.startAt)&&Bi(t.endAt,e.endAt)}function Ai(t){return ii.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var ki=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return(0,i.ZT)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Ci(t,n,r):"array-contains"===n?new Di(t,r):"in"===n?new xi(t,r):"not-in"===n?new Pi(t,r):"array-contains-any"===n?new Li(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Ni(t,n):new Ri(t,n)},e.prototype.matches=function(t){var e=t.data.field(this.field);return"!="===this.op?null!==e&&this.m(ui(e,this.value)):null!==e&&oi(this.value)===oi(e)&&this.m(ui(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Nr()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}((function(){})),Ci=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=ii.fromName(r.referenceValue),i}return(0,i.ZT)(e,t),e.prototype.matches=function(t){var e=ii.comparator(t.key,this.key);return this.m(e)},e}(ki),Ni=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Oi(0,n),r}return(0,i.ZT)(e,t),e.prototype.matches=function(t){return this.keys.some((function(e){return e.isEqual(t.key)}))},e}(ki),Ri=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Oi(0,n),r}return(0,i.ZT)(e,t),e.prototype.matches=function(t){return!this.keys.some((function(e){return e.isEqual(t.key)}))},e}(ki);function Oi(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map((function(t){return ii.fromName(t.referenceValue)}))}var Di=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return(0,i.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return pi(e)&&ai(e.arrayValue,this.value)},e}(ki),xi=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return(0,i.ZT)(e,t),e.prototype.matches=function(t){var e=t.data.field(this.field);return null!==e&&ai(this.value.arrayValue,e)},e}(ki),Pi=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return(0,i.ZT)(e,t),e.prototype.matches=function(t){if(ai(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.data.field(this.field);return null!==e&&!ai(this.value.arrayValue,e)},e}(ki),Li=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return(0,i.ZT)(e,t),e.prototype.matches=function(t){var e=this,n=t.data.field(this.field);return!(!pi(n)||!n.arrayValue.values)&&n.arrayValue.values.some((function(t){return ai(e.value.arrayValue,t)}))},e}(ki),Mi=function(t,e){this.position=t,this.before=e};function ji(t){return(t.before?"b":"a")+":"+t.position.map((function(t){return hi(t)})).join(",")}var Ui=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function Fi(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function qi(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?ii.comparator(ii.fromName(s.referenceValue),n.key):ui(s,n.data.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Bi(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!si(t.position[n],e.position[n]))return!1;return!0}var Vi=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null,this.startAt,this.endAt};function Gi(t,e,n,r,i,o,s,a){return new Vi(t,e,n,r,i,o,s,a)}function Hi(t){return new Vi(t)}function Ki(t){return!ei(t.limit)&&"F"===t.limitType}function zi(t){return!ei(t.limit)&&"L"===t.limitType}function Wi(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Ji(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function $i(t){return null!==t.collectionGroup}function Xi(t){var e=Or(t);if(null===e.p){e.p=[];var n=Ji(e),r=Wi(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Ui(n)),e.p.push(new Ui(Kr.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Ui(Kr.keyField(),u))}}}return e.p}function Qi(t){var e=Or(t);if(!e.T)if("F"===e.limitType)e.T=Ti(e.path,e.collectionGroup,Xi(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Xi(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new Ui(o.field,s))}var a=e.endAt?new Mi(e.endAt.position,!e.endAt.before):null,u=e.startAt?new Mi(e.startAt.position,!e.startAt.before):null;e.T=Ti(e.path,e.collectionGroup,n,e.filters,e.limit,a,u)}return e.T}function Yi(t,e,n){return new Vi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Zi(t,e){return Si(Qi(t),Qi(e))&&t.limitType===e.limitType}function to(t){return Ei(Qi(t))+"|lt:"+t.limitType}function eo(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map((function(t){return(e=t).field.canonicalString()+" "+e.op+" "+hi(e.value);var e})).join(", ")+"]"),ei(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map((function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)})).join(", ")+"]"),t.startAt&&(e+=", startAt: "+ji(t.startAt)),t.endAt&&(e+=", endAt: "+ji(t.endAt)),"Target("+e+")"}(Qi(t))+"; limitType="+t.limitType+")"}function no(t,e){return e.isFoundDocument()&&function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):ii.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.data.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!qi(t.startAt,Xi(t),e)||t.endAt&&qi(t.endAt,Xi(t),e))}(t,e)}function ro(t){return function(e,n){for(var r=!1,i=0,o=Xi(t);i<o.length;i++){var s=o[i],a=io(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function io(t,e,n){var r=t.field.isKeyField()?ii.comparator(e.key,n.key):function(t,e,n){var r=e.data.field(t),i=n.data.field(t);return null!==r&&null!==i?ui(r,i):Nr()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Nr()}}function oo(t,e){if(t.I){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ni(e)?"-0":e}}function so(t){return{integerValue:""+t}}function ao(t,e){return ri(e)?so(e):oo(t,e)}var uo=function(){this._=void 0};function co(t,e,n){return t instanceof fo?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof po?mo(t,e):t instanceof vo?go(t,e):function(t,e){var n=lo(t,e),r=bo(n)+bo(t.A);return di(n)&&di(t.A)?so(r):oo(t.R,r)}(t,e)}function ho(t,e,n){return t instanceof po?mo(t,e):t instanceof vo?go(t,e):n}function lo(t,e){return t instanceof yo?di(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var fo=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e}(uo),po=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,i.ZT)(e,t),e}(uo);function mo(t,e){for(var n=wo(e),r=function(t){n.some((function(e){return si(e,t)}))||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var vo=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return(0,i.ZT)(e,t),e}(uo);function go(t,e){for(var n=wo(e),r=function(t){n=n.filter((function(e){return!si(e,t)}))},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var yo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).R=e,r.A=n,r}return(0,i.ZT)(e,t),e}(uo);function bo(t){return Xr(t.integerValue||t.doubleValue)}function wo(t){return pi(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var _o=function(t,e){this.field=t,this.transform=e},Io=function(t,e){this.version=t,this.transformResults=e},To=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Eo(t,e){return void 0!==t.updateTime?e.isFoundDocument()&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e.isFoundDocument()}var So=function(){};function Ao(t,e,n){t instanceof Oo?function(t,e,n){var r=t.value.clone(),i=Po(t.fieldTransforms,e,n.transformResults);r.setAll(i),e.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(t,e,n):t instanceof Do?function(t,e,n){if(Eo(t.precondition,e)){var r=Po(t.fieldTransforms,e,n.transformResults),i=e.data;i.setAll(xo(t)),i.setAll(r),e.convertToFoundDocument(n.version,i).setHasCommittedMutations()}else e.convertToUnknownDocument(n.version)}(t,e,n):function(t,e,n){e.convertToNoDocument(n.version).setHasCommittedMutations()}(0,e,n)}function ko(t,e,n){t instanceof Oo?function(t,e,n){if(Eo(t.precondition,e)){var r=t.value.clone(),i=Lo(t.fieldTransforms,n,e);r.setAll(i),e.convertToFoundDocument(Ro(e),r).setHasLocalMutations()}}(t,e,n):t instanceof Do?function(t,e,n){if(Eo(t.precondition,e)){var r=Lo(t.fieldTransforms,n,e),i=e.data;i.setAll(xo(t)),i.setAll(r),e.convertToFoundDocument(Ro(e),i).setHasLocalMutations()}}(t,e,n):function(t,e){Eo(t.precondition,e)&&e.convertToNoDocument(Ur.min())}(t,e)}function Co(t,e){for(var n=null,r=0,i=t.fieldTransforms;r<i.length;r++){var o=i[r],s=e.data.field(o.field),a=lo(o.transform,s||null);null!=a&&(null==n&&(n=bi.empty()),n.set(o.field,a))}return n||null}function No(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Lr(t,e,(function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof po&&e instanceof po||t instanceof vo&&e instanceof vo?Lr(t.elements,e.elements,si):t instanceof yo&&e instanceof yo?si(t.A,e.A):t instanceof fo&&e instanceof fo}(t.transform,e.transform)}(t,e)}))}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Ro(t){return t.isFoundDocument()?t.version:Ur.min()}var Oo=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return(0,i.ZT)(e,t),e}(So),Do=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return(0,i.ZT)(e,t),e}(So);function xo(t){var e=new Map;return t.fieldMask.fields.forEach((function(n){if(!n.isEmpty()){var r=t.data.field(n);e.set(n,r)}})),e}function Po(t,e,n){var r=new Map;Rr(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=e.data.field(o.field);r.set(o.field,ho(s,a,n[i]))}return r}function Lo(t,e,n){for(var r=new Map,i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=n.data.field(s.field);r.set(s.field,co(a,u,e))}return r}var Mo,jo,Uo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return(0,i.ZT)(e,t),e}(So),Fo=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return(0,i.ZT)(e,t),e}(So),qo=function(t){this.count=t};function Bo(t){switch(t){case _r.OK:return Nr();case _r.CANCELLED:case _r.UNKNOWN:case _r.DEADLINE_EXCEEDED:case _r.RESOURCE_EXHAUSTED:case _r.INTERNAL:case _r.UNAVAILABLE:case _r.UNAUTHENTICATED:return!1;case _r.INVALID_ARGUMENT:case _r.NOT_FOUND:case _r.ALREADY_EXISTS:case _r.PERMISSION_DENIED:case _r.FAILED_PRECONDITION:case _r.ABORTED:case _r.OUT_OF_RANGE:case _r.UNIMPLEMENTED:case _r.DATA_LOSS:return!0;default:return Nr()}}function Vo(t){if(void 0===t)return Ar("GRPC error has no .code"),_r.UNKNOWN;switch(t){case Mo.OK:return _r.OK;case Mo.CANCELLED:return _r.CANCELLED;case Mo.UNKNOWN:return _r.UNKNOWN;case Mo.DEADLINE_EXCEEDED:return _r.DEADLINE_EXCEEDED;case Mo.RESOURCE_EXHAUSTED:return _r.RESOURCE_EXHAUSTED;case Mo.INTERNAL:return _r.INTERNAL;case Mo.UNAVAILABLE:return _r.UNAVAILABLE;case Mo.UNAUTHENTICATED:return _r.UNAUTHENTICATED;case Mo.INVALID_ARGUMENT:return _r.INVALID_ARGUMENT;case Mo.NOT_FOUND:return _r.NOT_FOUND;case Mo.ALREADY_EXISTS:return _r.ALREADY_EXISTS;case Mo.PERMISSION_DENIED:return _r.PERMISSION_DENIED;case Mo.FAILED_PRECONDITION:return _r.FAILED_PRECONDITION;case Mo.ABORTED:return _r.ABORTED;case Mo.OUT_OF_RANGE:return _r.OUT_OF_RANGE;case Mo.UNIMPLEMENTED:return _r.UNIMPLEMENTED;case Mo.DATA_LOSS:return _r.DATA_LOSS;default:return Nr()}}(jo=Mo||(Mo={}))[jo.OK=0]="OK",jo[jo.CANCELLED=1]="CANCELLED",jo[jo.UNKNOWN=2]="UNKNOWN",jo[jo.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",jo[jo.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",jo[jo.NOT_FOUND=5]="NOT_FOUND",jo[jo.ALREADY_EXISTS=6]="ALREADY_EXISTS",jo[jo.PERMISSION_DENIED=7]="PERMISSION_DENIED",jo[jo.UNAUTHENTICATED=16]="UNAUTHENTICATED",jo[jo.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",jo[jo.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",jo[jo.ABORTED=10]="ABORTED",jo[jo.OUT_OF_RANGE=11]="OUT_OF_RANGE",jo[jo.UNIMPLEMENTED=12]="UNIMPLEMENTED",jo[jo.INTERNAL=13]="INTERNAL",jo[jo.UNAVAILABLE=14]="UNAVAILABLE",jo[jo.DATA_LOSS=15]="DATA_LOSS";var Go=function(){function t(t,e){this.comparator=t,this.root=e||Ko.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ko.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ko.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal((function(e,n){return t(e,n),!1}))},t.prototype.toString=function(){var t=[];return this.inorderTraversal((function(e,n){return t.push(e+":"+n),!1})),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new Ho(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new Ho(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new Ho(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new Ho(this.root,t,this.comparator,!0)},t}(),Ho=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),Ko=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Nr();if(this.right.isRed())throw Nr();var t=this.left.check();if(t!==this.right.check())throw Nr();return t+(this.isRed()?0:1)},t}();Ko.EMPTY=null,Ko.RED=!0,Ko.BLACK=!1,Ko.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Nr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Nr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Nr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Nr()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Nr()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new Ko(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var zo=function(){function t(t){this.comparator=t,this.data=new Go(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new Wo(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new Wo(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach((function(t){e=e.add(t)})),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach((function(e){t.push(e)})),t},t.prototype.toString=function(){var t=[];return this.forEach((function(e){return t.push(e)})),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),Wo=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),Jo=new Go(ii.comparator);function $o(){return Jo}var Xo=new Go(ii.comparator);function Qo(){return Xo}var Yo=new Go(ii.comparator);function Zo(){return Yo}var ts=new zo(ii.comparator);function es(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=ts,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var ns=new zo(Pr);function rs(){return ns}var is=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,os.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(Ur.min(),r,rs(),$o(),es())},t}(),os=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(Wr.EMPTY_BYTE_STRING,n,es(),es(),es())},t}(),ss=function(t,e,n,r){this.v=t,this.removedTargetIds=e,this.key=n,this.P=r},as=function(t,e){this.targetId=t,this.V=e},us=function(t,e,n,r){void 0===n&&(n=Wr.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},cs=function(){function t(){this.S=0,this.D=fs(),this.C=Wr.EMPTY_BYTE_STRING,this.N=!1,this.k=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.N},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.C},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"F",{get:function(){return 0!==this.S},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"$",{get:function(){return this.k},enumerable:!1,configurable:!0}),t.prototype.O=function(t){t.approximateByteSize()>0&&(this.k=!0,this.C=t)},t.prototype.M=function(){var t=es(),e=es(),n=es();return this.D.forEach((function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Nr()}})),new os(this.C,this.N,t,e,n)},t.prototype.L=function(){this.k=!1,this.D=fs()},t.prototype.B=function(t,e){this.k=!0,this.D=this.D.insert(t,e)},t.prototype.q=function(t){this.k=!0,this.D=this.D.remove(t)},t.prototype.U=function(){this.S+=1},t.prototype.K=function(){this.S-=1},t.prototype.j=function(){this.k=!0,this.N=!0},t}(),hs=function(){function t(t){this.W=t,this.G=new Map,this.H=$o(),this.J=ls(),this.Y=new zo(Pr)}return t.prototype.X=function(t){for(var e=0,n=t.v;e<n.length;e++){var r=n[e];t.P&&t.P.isFoundDocument()?this.Z(r,t.P):this.tt(r,t.key,t.P)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)r=o[i],this.tt(r,t.key,t.P)},t.prototype.et=function(t){var e=this;this.forEachTarget(t,(function(n){var r=e.nt(n);switch(t.state){case 0:e.st(n)&&r.O(t.resumeToken);break;case 1:r.K(),r.F||r.L(),r.O(t.resumeToken);break;case 2:r.K(),r.F||e.removeTarget(n);break;case 3:e.st(n)&&(r.j(),r.O(t.resumeToken));break;case 4:e.st(n)&&(e.it(n),r.O(t.resumeToken));break;default:Nr()}}))},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.G.forEach((function(t,r){n.st(r)&&e(r)}))},t.prototype.rt=function(t){var e=t.targetId,n=t.V.count,r=this.ot(e);if(r){var i=r.target;if(Ai(i))if(0===n){var o=new ii(i.path);this.tt(e,o,_i.newNoDocument(o,Ur.min()))}else Rr(1===n);else this.ct(e)!==n&&(this.it(e),this.Y=this.Y.add(e))}},t.prototype.ut=function(t){var e=this,n=new Map;this.G.forEach((function(r,i){var o=e.ot(i);if(o){if(r.current&&Ai(o.target)){var s=new ii(o.target.path);null!==e.H.get(s)||e.at(i,s)||e.tt(i,s,_i.newNoDocument(s,t))}r.$&&(n.set(i,r.M()),r.L())}}));var r=es();this.J.forEach((function(t,n){var i=!0;n.forEachWhile((function(t){var n=e.ot(t);return!n||2===n.purpose||(i=!1,!1)})),i&&(r=r.add(t))}));var i=new is(t,n,this.Y,this.H,r);return this.H=$o(),this.J=ls(),this.Y=new zo(Pr),i},t.prototype.Z=function(t,e){if(this.st(t)){var n=this.at(t,e.key)?2:0;this.nt(t).B(e.key,n),this.H=this.H.insert(e.key,e),this.J=this.J.insert(e.key,this.ht(e.key).add(t))}},t.prototype.tt=function(t,e,n){if(this.st(t)){var r=this.nt(t);this.at(t,e)?r.B(e,1):r.q(e),this.J=this.J.insert(e,this.ht(e).delete(t)),n&&(this.H=this.H.insert(e,n))}},t.prototype.removeTarget=function(t){this.G.delete(t)},t.prototype.ct=function(t){var e=this.nt(t).M();return this.W.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.U=function(t){this.nt(t).U()},t.prototype.nt=function(t){var e=this.G.get(t);return e||(e=new cs,this.G.set(t,e)),e},t.prototype.ht=function(t){var e=this.J.get(t);return e||(e=new zo(Pr),this.J=this.J.insert(t,e)),e},t.prototype.st=function(t){var e=null!==this.ot(t);return e||Sr("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.ot=function(t){var e=this.G.get(t);return e&&e.F?null:this.W.lt(t)},t.prototype.it=function(t){var e=this;this.G.set(t,new cs),this.W.getRemoteKeysForTarget(t).forEach((function(n){e.tt(t,n,null)}))},t.prototype.at=function(t,e){return this.W.getRemoteKeysForTarget(t).has(e)},t}();function ls(){return new Go(ii.comparator)}function fs(){return new Go(ii.comparator)}var ds={asc:"ASCENDING",desc:"DESCENDING"},ps={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},ms=function(t,e){this.databaseId=t,this.I=e};function vs(t,e){return t.I?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function gs(t,e){return t.I?e.toBase64():e.toUint8Array()}function ys(t,e){return vs(t,e.toTimestamp())}function bs(t){return Rr(!!t),Ur.fromTimestamp(function(t){var e=$r(t);return new jr(e.seconds,e.nanos)}(t))}function ws(t,e){return function(t){return new Gr(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function _s(t){var e=Gr.fromString(t);return Rr(Ks(e)),e}function Is(t,e){return ws(t.databaseId,e.path)}function Ts(t,e){var n=_s(e);if(n.get(1)!==t.databaseId.projectId)throw new Ir(_r.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ir(_r.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ii(ks(n))}function Es(t,e){return ws(t.databaseId,e)}function Ss(t){var e=_s(t);return 4===e.length?Gr.emptyPath():ks(e)}function As(t){return new Gr(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function ks(t){return Rr(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Cs(t,e,n){return{name:Is(t,e),fields:n.value.mapValue.fields}}function Ns(t,e,n){var r=Ts(t,e.name),i=bs(e.updateTime),o=new bi({mapValue:{fields:e.fields}}),s=_i.newFoundDocument(r,i,o);return n&&s.setHasCommittedMutations(),n?s.setHasCommittedMutations():s}function Rs(t,e){var n;if(e instanceof Oo)n={update:Cs(t,e.key,e.value)};else if(e instanceof Uo)n={delete:Is(t,e.key)};else if(e instanceof Do)n={update:Cs(t,e.key,e.data),updateMask:Hs(e.fieldMask)};else{if(!(e instanceof Fo))return Nr();n={verify:Is(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((function(t){return function(t,e){var n=e.transform;if(n instanceof fo)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof po)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof vo)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof yo)return{fieldPath:e.field.canonicalString(),increment:n.A};throw Nr()}(0,t)}))),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:ys(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Nr()}(t,e.precondition)),n}function Os(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?To.updateTime(bs(t.updateTime)):void 0!==t.exists?To.exists(t.exists):To.none()}(e.currentDocument):To.none(),r=e.updateTransforms?e.updateTransforms.map((function(e){return function(t,e){var n=null;if("setToServerValue"in e)Rr("REQUEST_TIME"===e.setToServerValue),n=new fo;else if("appendMissingElements"in e){var r=e.appendMissingElements.values||[];n=new po(r)}else if("removeAllFromArray"in e){var i=e.removeAllFromArray.values||[];n=new vo(i)}else"increment"in e?n=new yo(t,e.increment):Nr();var o=Kr.fromServerFormat(e.fieldPath);return new _o(o,n)}(t,e)})):[];if(e.update){e.update.name;var i=Ts(t,e.update.name),o=new bi({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){var e=t.fieldPaths||[];return new zr(e.map((function(t){return Kr.fromServerFormat(t)})))}(e.updateMask);return new Do(i,o,s,n,r)}return new Oo(i,o,n,r)}if(e.delete){var a=Ts(t,e.delete);return new Uo(a,n)}if(e.verify){var u=Ts(t,e.verify);return new Fo(u,n)}return Nr()}function Ds(t,e){return{documents:[Es(t,e.path)]}}function xs(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Es(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Es(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map((function(t){return function(t){if("=="===t.op){if(vi(t.value))return{unaryFilter:{field:qs(t.field),op:"IS_NAN"}};if(mi(t.value))return{unaryFilter:{field:qs(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(vi(t.value))return{unaryFilter:{field:qs(t.field),op:"IS_NOT_NAN"}};if(mi(t.value))return{unaryFilter:{field:qs(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:qs(t.field),op:Fs(t.op),value:t.value}}}(t)}));return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map((function(t){return function(t){return{field:qs(t.field),direction:Us(t.dir)}}(t)}))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.I||ei(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Ms(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Ms(e.endAt)),n}function Ps(t){var e=Ss(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Rr(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Ls(n.where));var a=[];n.orderBy&&(a=n.orderBy.map((function(t){return function(t){return new Ui(Bs(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)})));var u=null;n.limit&&(u=function(t){var e;return ei(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=js(n.startAt));var h=null;return n.endAt&&(h=js(n.endAt)),Gi(e,i,a,s,u,"F",c,h)}function Ls(t){return t?void 0!==t.unaryFilter?[Gs(t)]:void 0!==t.fieldFilter?[Vs(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map((function(t){return Ls(t)})).reduce((function(t,e){return t.concat(e)})):Nr():[]}function Ms(t){return{before:t.before,values:t.position}}function js(t){var e=!!t.before,n=t.values||[];return new Mi(n,e)}function Us(t){return ds[t]}function Fs(t){return ps[t]}function qs(t){return{fieldPath:t.canonicalString()}}function Bs(t){return Kr.fromServerFormat(t.fieldPath)}function Vs(t){return ki.create(Bs(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Nr()}}(t.fieldFilter.op),t.fieldFilter.value)}function Gs(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Bs(t.unaryFilter.field);return ki.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Bs(t.unaryFilter.field);return ki.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Bs(t.unaryFilter.field);return ki.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Bs(t.unaryFilter.field);return ki.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Nr()}}function Hs(t){var e=[];return t.fields.forEach((function(t){return e.push(t.canonicalString())})),{fieldPaths:e}}function Ks(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function zs(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=Js(e)),e=Ws(t.get(n),e);return Js(e)}function Ws(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="";break;case"":n+="";break;default:n+=o}}return n}function Js(t){return t+""}function $s(t){var e=t.length;if(Rr(e>=2),2===e)return Rr(""===t.charAt(0)&&""===t.charAt(1)),Gr.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("",o);switch((s<0||s>n)&&Nr(),t.charAt(s+1)){case"":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"":i+=t.substring(o,s),i+="\0";break;case"":i+=t.substring(o,s+1);break;default:Nr()}o=s+2}return new Gr(r)}var Xs=function(t,e){this.seconds=t,this.nanoseconds=e},Qs=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};Qs.store="owner",Qs.key="owner";var Ys=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Ys.store="mutationQueues",Ys.keyPath="userId";var Zs=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};Zs.store="mutations",Zs.keyPath="batchId",Zs.userMutationsIndex="userMutationsIndex",Zs.userMutationsKeyPath=["userId","batchId"];var ta=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,zs(e)]},t.key=function(t,e,n){return[t,zs(e),n]},t}();ta.store="documentMutations",ta.PLACEHOLDER=new ta;var ea=function(t,e){this.path=t,this.readTime=e},na=function(t,e){this.path=t,this.version=e},ra=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};ra.store="remoteDocuments",ra.readTimeIndex="readTimeIndex",ra.readTimeIndexPath="readTime",ra.collectionReadTimeIndex="collectionReadTimeIndex",ra.collectionReadTimeIndexPath=["parentPath","readTime"];var ia=function(t){this.byteSize=t};ia.store="remoteDocumentGlobal",ia.key="remoteDocumentGlobalKey";var oa=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};oa.store="targets",oa.keyPath="targetId",oa.queryTargetsIndexName="queryTargetsIndex",oa.queryTargetsKeyPath=["canonicalId","targetId"];var sa=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};sa.store="targetDocuments",sa.keyPath=["targetId","path"],sa.documentTargetsIndex="documentTargetsIndex",sa.documentTargetsKeyPath=["path","targetId"];var aa=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};aa.key="targetGlobalKey",aa.store="targetGlobal";var ua=function(t,e){this.collectionId=t,this.parent=e};ua.store="collectionParents",ua.keyPath=["collectionId","parent"];var ca=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};ca.store="clientMetadata",ca.keyPath="clientId";var ha=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};ha.store="bundles",ha.keyPath="bundleId";var la=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};la.store="namedQueries",la.keyPath="name";var fa=(0,i.ev)((0,i.ev)([],(0,i.ev)((0,i.ev)([],(0,i.ev)((0,i.ev)([],(0,i.ev)((0,i.ev)([],[Ys.store,Zs.store,ta.store,ra.store,oa.store,Qs.store,aa.store,sa.store]),[ca.store])),[ia.store])),[ua.store])),[ha.store,la.store]),da="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",pa=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach((function(t){return t()}))},t}(),ma=function(){var t=this;this.promise=new Promise((function(e,n){t.resolve=e,t.reject=n}))},va=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)}),(function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)}))}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Nr(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t((function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}}))},t.prototype.toPromise=function(){var t=this;return new Promise((function(e,n){t.next(e,n)}))},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction((function(){return e(n)})):t.reject(n)},t.resolve=function(e){return new t((function(t,n){t(e)}))},t.reject=function(e){return new t((function(t,n){n(e)}))},t.waitFor=function(e){return new t((function(t,n){var r=0,i=0,o=!1;e.forEach((function(e){++r,e.next((function(){++i,o&&i===r&&t()}),(function(t){return n(t)}))})),o=!0,i===r&&t()}))},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next((function(n){return n?t.resolve(n):e()}))},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach((function(t,i){r.push(e.call(n,t,i))})),this.waitFor(r)},t}(),ga=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.ft=new ma,this.transaction.oncomplete=function(){n.ft.resolve()},this.transaction.onabort=function(){e.error?n.ft.reject(new wa(t,e.error)):n.ft.resolve()},this.transaction.onerror=function(e){var r=Sa(e.target.error);n.ft.reject(new wa(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new wa(n,e)}},Object.defineProperty(t.prototype,"dt",{get:function(){return this.ft.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.ft.reject(t),this.aborted||(Sr("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Ia(e)},t}(),ya=function(){function t(e,n,r){this.name=e,this.version=n,this.wt=r,12.2===t._t((0,o.z$)())&&Ar("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return Sr("SimpleDb","Removing database:",t),Ta(window.indexedDB.deleteDatabase(t)).toPromise()},t.yt=function(){if("undefined"==typeof indexedDB)return!1;if(t.gt())return!0;var e=(0,o.z$)(),n=t._t(e),r=0<n&&n<10,i=t.Et(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)},t.gt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Tt)},t.It=function(t,e){return t.store(e)},t._t=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.Et=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.At=function(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return this.db?[3,2]:(Sr("SimpleDb","Opening database:",this.name),e=this,[4,new Promise((function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){var n=t.target.result;e(n)},i.onblocked=function(){r(new wa(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;"VersionError"===n.name?r(new Ir(_r.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):r(new wa(t,n))},i.onupgradeneeded=function(t){Sr("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;n.wt.Rt(e,i.transaction,t.oldVersion,n.version).next((function(){Sr("SimpleDb","Database upgrade to version "+n.version+" complete")}))}}))]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.bt&&(this.db.onversionchange=function(t){return n.bt(t)}),this.db)]}}))}))},t.prototype.vt=function(t){this.bt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return(0,i.mG)(this,void 0,void 0,(function(){var o,s,a,u,c;return(0,i.Jh)(this,(function(h){switch(h.label){case 0:o="readonly"===e,s=0,a=function(){var e,a,c,h,l;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:++s,i.label=1;case 1:return i.trys.push([1,4,,5]),[4,u.At(t)];case 2:return u.db=i.sent(),e=ga.open(u.db,t,o?"readonly":"readwrite",n),a=r(e).catch((function(t){return e.abort(t),va.reject(t)})).toPromise(),c={},a.catch((function(){})),[4,e.dt];case 3:return[2,(c.value=(i.sent(),a),c)];case 4:return h=i.sent(),l="FirebaseError"!==h.name&&s<3,Sr("SimpleDb","Transaction failed with error:",h.message,"Retrying:",l),u.close(),l?[3,5]:[2,{value:Promise.reject(h)}];case 5:return[2]}}))},u=this,h.label=1;case 1:return[5,a()];case 2:if("object"==typeof(c=h.sent()))return[2,c.value];h.label=3;case 3:return[3,1];case 4:return[2]}}))}))},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),ba=function(){function t(t){this.Pt=t,this.Vt=!1,this.St=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Vt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Dt",{get:function(){return this.St},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.Pt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Vt=!0},t.prototype.Ct=function(t){this.St=t},t.prototype.delete=function(){return Ta(this.Pt.delete())},t}(),wa=function(t){function e(e,n){var r=this;return(r=t.call(this,_r.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return(0,i.ZT)(e,t),e}(Ir);function _a(t){return"IndexedDbTransactionError"===t.name}var Ia=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(Sr("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(Sr("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Ta(n)},t.prototype.add=function(t){return Sr("SimpleDb","ADD",this.store.name,t,t),Ta(this.store.add(t))},t.prototype.get=function(t){var e=this;return Ta(this.store.get(t)).next((function(n){return void 0===n&&(n=null),Sr("SimpleDb","GET",e.store.name,t,n),n}))},t.prototype.delete=function(t){return Sr("SimpleDb","DELETE",this.store.name,t),Ta(this.store.delete(t))},t.prototype.count=function(){return Sr("SimpleDb","COUNT",this.store.name),Ta(this.store.count())},t.prototype.Nt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.xt(n,(function(t,e){r.push(e)})).next((function(){return r}))},t.prototype.kt=function(t,e){Sr("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Ft=!1;var r=this.cursor(n);return this.xt(r,(function(t,e,n){return n.delete()}))},t.prototype.$t=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.xt(r,e)},t.prototype.Ot=function(t){var e=this.cursor({});return new va((function(n,r){e.onerror=function(t){var e=Sa(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next((function(t){t?r.continue():n()})):n()}}))},t.prototype.xt=function(t,e){var n=[];return new va((function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new ba(i),s=e(i.primaryKey,i.value,o);if(s instanceof va){var a=s.catch((function(t){return o.done(),va.reject(t)}));n.push(a)}o.isDone?r():null===o.Dt?i.continue():i.continue(o.Dt)}else r()}})).next((function(){return va.waitFor(n)}))},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Ft?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Ta(t){return new va((function(e,n){t.onsuccess=function(t){var n=t.target.result;e(n)},t.onerror=function(t){var e=Sa(t.target.error);n(e)}}))}var Ea=!1;function Sa(t){var e=ya._t((0,o.z$)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Ir("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Ea||(Ea=!0,setTimeout((function(){throw r}),0)),r}}return t}var Aa=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Mt=e,r.currentSequenceNumber=n,r}return(0,i.ZT)(e,t),e}(pa);function ka(t,e){var n=Or(t);return ya.It(n.Mt,e)}var Ca=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e){for(var n=e.mutationResults,r=0;r<this.mutations.length;r++){var i=this.mutations[r];i.key.isEqual(t.key)&&Ao(i,t,n[r])}},t.prototype.applyToLocalView=function(t){for(var e=0,n=this.baseMutations;e<n.length;e++)(o=n[e]).key.isEqual(t.key)&&ko(o,t,this.localWriteTime);for(var r=0,i=this.mutations;r<i.length;r++){var o;(o=i[r]).key.isEqual(t.key)&&ko(o,t,this.localWriteTime)}},t.prototype.applyToLocalDocumentSet=function(t){var e=this;this.mutations.forEach((function(n){var r=t.get(n.key),i=r;e.applyToLocalView(i),r.isValidDocument()||i.convertToNoDocument(Ur.min())}))},t.prototype.keys=function(){return this.mutations.reduce((function(t,e){return t.add(e.key)}),es())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Lr(this.mutations,t.mutations,(function(t,e){return No(t,e)}))&&Lr(this.baseMutations,t.baseMutations,(function(t,e){return No(t,e)}))},t}(),Na=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Rr(e.mutations.length===r.length);for(var i=Zo(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Ra=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=Ur.min()),void 0===o&&(o=Ur.min()),void 0===s&&(s=Wr.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Oa=function(t){this.Lt=t};function Da(t,e){if(e.document)return Ns(t.Lt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=ii.fromSegments(e.noDocument.path),r=ja(e.noDocument.readTime),i=_i.newNoDocument(n,r);return e.hasCommittedMutations?i.setHasCommittedMutations():i}if(e.unknownDocument){var o=ii.fromSegments(e.unknownDocument.path);return r=ja(e.unknownDocument.version),_i.newUnknownDocument(o,r)}return Nr()}function xa(t,e,n){var r=Pa(n),i=e.key.path.popLast().toArray();if(e.isFoundDocument()){var o=function(t,e){return{name:Is(t,e.key),fields:e.data.value.mapValue.fields,updateTime:vs(t,e.version.toTimestamp())}}(t.Lt,e),s=e.hasCommittedMutations;return new ra(null,null,o,s,r,i)}if(e.isNoDocument()){var a=e.key.path.toArray(),u=Ma(e.version);return s=e.hasCommittedMutations,new ra(null,new ea(a,u),null,s,r,i)}if(e.isUnknownDocument()){var c=e.key.path.toArray(),h=Ma(e.version);return new ra(new na(c,h),null,null,!0,r,i)}return Nr()}function Pa(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function La(t){var e=new jr(t[0],t[1]);return Ur.fromTimestamp(e)}function Ma(t){var e=t.toTimestamp();return new Xs(e.seconds,e.nanoseconds)}function ja(t){var e=new jr(t.seconds,t.nanoseconds);return Ur.fromTimestamp(e)}function Ua(t,e){for(var n=(e.baseMutations||[]).map((function(e){return Os(t.Lt,e)})),r=0;r<e.mutations.length-1;++r){var i=e.mutations[r];if(r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform){var o=e.mutations[r+1];i.updateTransforms=o.transform.fieldTransforms,e.mutations.splice(r+1,1),++r}}var s=e.mutations.map((function(e){return Os(t.Lt,e)})),a=jr.fromMillis(e.localWriteTimeMs);return new Ca(e.batchId,a,n,s)}function Fa(t){var e,n,r=ja(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?ja(t.lastLimboFreeSnapshotVersion):Ur.min();return void 0!==t.query.documents?(Rr(1===(n=t.query).documents.length),e=Qi(Hi(Ss(n.documents[0])))):e=function(t){return Qi(Ps(t))}(t.query),new Ra(e,t.targetId,0,t.lastListenSequenceNumber,r,i,Wr.fromBase64String(t.resumeToken))}function qa(t,e){var n,r=Ma(e.snapshotVersion),i=Ma(e.lastLimboFreeSnapshotVersion);n=Ai(e.target)?Ds(t.Lt,e.target):xs(t.Lt,e.target);var o=e.resumeToken.toBase64();return new oa(e.targetId,Ei(e.target),r,o,e.sequenceNumber,i,n)}function Ba(t){var e=Ps({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Yi(e,e.limit,"L"):e}var Va=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return Ga(t).get(e).next((function(t){if(t)return{id:(e=t).bundleId,createTime:ja(e.createTime),version:e.version};var e}))},t.prototype.saveBundleMetadata=function(t,e){return Ga(t).put({bundleId:(n=e).id,createTime:Ma(bs(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return Ha(t).get(e).next((function(t){if(t)return{name:(e=t).name,query:Ba(e.bundledQuery),readTime:ja(e.readTime)};var e}))},t.prototype.saveNamedQuery=function(t,e){return Ha(t).put(function(t){return{name:t.name,readTime:Ma(bs(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function Ga(t){return ka(t,ha.store)}function Ha(t){return ka(t,la.store)}var Ka=function(){function t(){this.Bt=new za}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Bt.add(e),va.resolve()},t.prototype.getCollectionParents=function(t,e){return va.resolve(this.Bt.getEntries(e))},t}(),za=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new zo(Gr.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new zo(Gr.comparator)).toArray()},t}(),Wa=function(){function t(){this.qt=new za}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.qt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener((function(){n.qt.add(e)}));var o={collectionId:r,parent:zs(i)};return Ja(t).put(o)}return va.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[Mr(e),""],!1,!0);return Ja(t).Nt(r).next((function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push($s(o.parent))}return n}))},t}();function Ja(t){return ka(t,ua.store)}var $a={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Xa=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function Qa(t,e,n){var r=t.store(Zs.store),i=t.store(ta.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.$t({range:s},(function(t,e,n){return a++,n.delete()}));o.push(u.next((function(){Rr(1===a)})));for(var c=[],h=0,l=n.mutations;h<l.length;h++){var f=l[h],d=ta.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return va.waitFor(o).next((function(){return c}))}function Ya(t){if(!t)return 0;var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Nr();e=t.noDocument}return JSON.stringify(e).length}Xa.DEFAULT_COLLECTION_PERCENTILE=10,Xa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Xa.DEFAULT=new Xa(41943040,Xa.DEFAULT_COLLECTION_PERCENTILE,Xa.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Xa.DISABLED=new Xa(-1,0,0);var Za=function(){function t(t,e,n,r){this.userId=t,this.R=e,this.Ut=n,this.referenceDelegate=r,this.Kt={}}return t.Qt=function(e,n,r,i){return Rr(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return eu(t).$t({index:Zs.userMutationsIndex,range:n},(function(t,n,r){e=!1,r.done()})).next((function(){return e}))},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=nu(t),s=eu(t);return s.add({}).next((function(a){Rr("number"==typeof a);for(var u=new Ca(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map((function(e){return Rs(t.Lt,e)})),i=n.mutations.map((function(e){return Rs(t.Lt,e)}));return new Zs(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.R,i.userId,u),h=[],l=new zo((function(t,e){return Pr(t.canonicalString(),e.canonicalString())})),f=0,d=r;f<d.length;f++){var p=d[f],m=ta.key(i.userId,p.key.path,a);l=l.add(p.key.path.popLast()),h.push(s.put(c)),h.push(o.put(m,ta.PLACEHOLDER))}return l.forEach((function(e){h.push(i.Ut.addToCollectionParentIndex(t,e))})),t.addOnCommittedListener((function(){i.Kt[a]=u.keys()})),va.waitFor(h).next((function(){return u}))}))},t.prototype.lookupMutationBatch=function(t,e){var n=this;return eu(t).get(e).next((function(t){return t?(Rr(t.userId===n.userId),Ua(n.R,t)):null}))},t.prototype.jt=function(t,e){var n=this;return this.Kt[e]?va.resolve(this.Kt[e]):this.lookupMutationBatch(t,e).next((function(t){if(t){var r=t.keys();return n.Kt[e]=r,r}return null}))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return eu(t).$t({index:Zs.userMutationsIndex,range:i},(function(t,e,i){e.userId===n.userId&&(Rr(e.batchId>=r),o=Ua(n.R,e)),i.done()})).next((function(){return o}))},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return eu(t).$t({index:Zs.userMutationsIndex,range:e,reverse:!0},(function(t,e,r){n=e.batchId,r.done()})).next((function(){return n}))},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return eu(t).Nt(Zs.userMutationsIndex,n).next((function(t){return t.map((function(t){return Ua(e.R,t)}))}))},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=ta.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return nu(t).$t({range:i},(function(r,i,s){var a=r[0],u=r[1],c=r[2],h=$s(u);if(a===n.userId&&e.path.isEqual(h))return eu(t).get(c).next((function(t){if(!t)throw Nr();Rr(t.userId===n.userId),o.push(Ua(n.R,t))}));s.done()})).next((function(){return o}))},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new zo(Pr),i=[];return e.forEach((function(e){var o=ta.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=nu(t).$t({range:s},(function(t,i,o){var s=t[0],a=t[1],u=t[2],c=$s(a);s===n.userId&&e.path.isEqual(c)?r=r.add(u):o.done()}));i.push(a)})),va.waitFor(i).next((function(){return n.Wt(t,r)}))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=ta.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new zo(Pr);return nu(t).$t({range:s},(function(t,e,o){var s=t[0],u=t[1],c=t[2],h=$s(u);s===n.userId&&r.isPrefixOf(h)?h.length===i&&(a=a.add(c)):o.done()})).next((function(){return n.Wt(t,a)}))},t.prototype.Wt=function(t,e){var n=this,r=[],i=[];return e.forEach((function(e){i.push(eu(t).get(e).next((function(t){if(null===t)throw Nr();Rr(t.userId===n.userId),r.push(Ua(n.R,t))})))})),va.waitFor(i).next((function(){return r}))},t.prototype.removeMutationBatch=function(t,e){var n=this;return Qa(t.Mt,this.userId,e).next((function(r){return t.addOnCommittedListener((function(){n.Gt(e.batchId)})),va.forEach(r,(function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)}))}))},t.prototype.Gt=function(t){delete this.Kt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next((function(n){if(!n)return va.resolve();var r=IDBKeyRange.lowerBound(ta.prefixForUser(e.userId)),i=[];return nu(t).$t({range:r},(function(t,n,r){if(t[0]===e.userId){var o=$s(t[1]);i.push(o)}else r.done()})).next((function(){Rr(0===i.length)}))}))},t.prototype.containsKey=function(t,e){return tu(t,this.userId,e)},t.prototype.zt=function(t){var e=this;return ru(t).get(this.userId).next((function(t){return t||new Ys(e.userId,-1,"")}))},t}();function tu(t,e,n){var r=ta.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return nu(t).$t({range:o,Ft:!0},(function(t,n,r){var o=t[0],a=t[1];t[2],o===e&&a===i&&(s=!0),r.done()})).next((function(){return s}))}function eu(t){return ka(t,Zs.store)}function nu(t){return ka(t,ta.store)}function ru(t){return ka(t,Ys.store)}var iu=function(){function t(t){this.Ht=t}return t.prototype.next=function(){return this.Ht+=2,this.Ht},t.Jt=function(){return new t(0)},t.Yt=function(){return new t(-1)},t}(),ou=function(){function t(t,e){this.referenceDelegate=t,this.R=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.Xt(t).next((function(n){var r=new iu(n.highestTargetId);return n.highestTargetId=r.next(),e.Zt(t,n).next((function(){return n.highestTargetId}))}))},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.Xt(t).next((function(t){return Ur.fromTimestamp(new jr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))}))},t.prototype.getHighestSequenceNumber=function(t){return this.Xt(t).next((function(t){return t.highestListenSequenceNumber}))},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.Xt(t).next((function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.Zt(t,i)}))},t.prototype.addTargetData=function(t,e){var n=this;return this.te(t,e).next((function(){return n.Xt(t).next((function(r){return r.targetCount+=1,n.ee(e,r),n.Zt(t,r)}))}))},t.prototype.updateTargetData=function(t,e){return this.te(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next((function(){return su(t).delete(e.targetId)})).next((function(){return n.Xt(t)})).next((function(e){return Rr(e.targetCount>0),e.targetCount-=1,n.Zt(t,e)}))},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return su(t).$t((function(s,a){var u=Fa(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))})).next((function(){return va.waitFor(o)})).next((function(){return i}))},t.prototype.forEachTarget=function(t,e){return su(t).$t((function(t,n){var r=Fa(n);e(r)}))},t.prototype.Xt=function(t){return au(t).get(aa.key).next((function(t){return Rr(null!==t),t}))},t.prototype.Zt=function(t,e){return au(t).put(aa.key,e)},t.prototype.te=function(t,e){return su(t).put(qa(this.R,e))},t.prototype.ee=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.Xt(t).next((function(t){return t.targetCount}))},t.prototype.getTargetData=function(t,e){var n=Ei(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return su(t).$t({range:r,index:oa.queryTargetsIndexName},(function(t,n,r){var o=Fa(n);Si(e,o.target)&&(i=o,r.done())})).next((function(){return i}))},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=uu(t);return e.forEach((function(e){var s=zs(e.path);i.push(o.put(new sa(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))})),va.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=uu(t);return va.forEach(e,(function(e){var o=zs(e.path);return va.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])}))},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=uu(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=uu(t),i=es();return r.$t({range:n,Ft:!0},(function(t,e,n){var r=$s(t[1]),o=new ii(r);i=i.add(o)})).next((function(){return i}))},t.prototype.containsKey=function(t,e){var n=zs(e.path),r=IDBKeyRange.bound([n],[Mr(n)],!1,!0),i=0;return uu(t).$t({index:sa.documentTargetsIndex,Ft:!0,range:r},(function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())})).next((function(){return i>0}))},t.prototype.lt=function(t,e){return su(t).get(e).next((function(t){return t?Fa(t):null}))},t}();function su(t){return ka(t,oa.store)}function au(t){return ka(t,aa.store)}function uu(t){return ka(t,sa.store)}function cu(t){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){if(t.code!==_r.FAILED_PRECONDITION||t.message!==da)throw t;return Sr("LocalStore","Unexpectedly lost primary lease"),[2]}))}))}function hu(t,e){var n=t[0],r=t[1],i=e[0],o=e[1],s=Pr(n,i);return 0===s?Pr(r,o):s}var lu=function(){function t(t){this.ne=t,this.buffer=new zo(hu),this.se=0}return t.prototype.ie=function(){return++this.se},t.prototype.re=function(t){var e=[t,this.ie()];if(this.buffer.size<this.ne)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();hu(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),fu=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.oe=!1,this.ce=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.ue(t)},t.prototype.stop=function(){this.ce&&(this.ce.cancel(),this.ce=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.ce},enumerable:!1,configurable:!0}),t.prototype.ue=function(t){var e=this,n=this.oe?3e5:6e4;Sr("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.ce=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,(function(){return(0,i.mG)(e,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:this.ce=null,this.oe=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return _a(e=n.sent())?(Sr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,cu(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.ue(t)];case 8:return n.sent(),[2]}}))}))}))},t}(),du=function(){function t(t,e){this.ae=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.ae.he(t).next((function(t){return Math.floor(e/100*t)}))},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return va.resolve(wr.o);var r=new lu(e);return this.ae.forEachTarget(t,(function(t){return r.re(t.sequenceNumber)})).next((function(){return n.ae.le(t,(function(t){return r.re(t)}))})).next((function(){return r.maxValue}))},t.prototype.removeTargets=function(t,e,n){return this.ae.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.ae.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(Sr("LruGarbageCollector","Garbage collection skipped; disabled"),va.resolve($a)):this.getCacheSize(t).next((function(r){return r<n.params.cacheSizeCollectionThreshold?(Sr("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),$a):n.fe(t,e)}))},t.prototype.getCacheSize=function(t){return this.ae.getCacheSize(t)},t.prototype.fe=function(t,e){var n,r,i,o,a,u,c,h=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((function(e){return e>h.params.maximumSequenceNumbersToCollect?(Sr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.maximumSequenceNumbersToCollect+" from "+e),r=h.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),h.nthSequenceNumber(t,r)})).next((function(r){return n=r,a=Date.now(),h.removeTargets(t,n,e)})).next((function(e){return i=e,u=Date.now(),h.removeOrphanedDocuments(t,n)})).next((function(t){return c=Date.now(),Er()<=s.in.DEBUG&&Sr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(a-o)+"ms\n\tRemoved "+i+" targets in "+(u-a)+"ms\n\tRemoved "+t+" documents in "+(c-u)+"ms\nTotal Duration: "+(c-l)+"ms"),va.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})}))},t}(),pu=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new du(t,e)}(this,e)}return t.prototype.he=function(t){var e=this.de(t);return this.db.getTargetCache().getTargetCount(t).next((function(t){return e.next((function(e){return t+e}))}))},t.prototype.de=function(t){var e=0;return this.le(t,(function(t){e++})).next((function(){return e}))},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.le=function(t,e){return this.we(t,(function(t,n){return e(n)}))},t.prototype.addReference=function(t,e,n){return mu(t,n)},t.prototype.removeReference=function(t,e,n){return mu(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return mu(t,e)},t.prototype._e=function(t,e){return function(t,e){var n=!1;return ru(t).Ot((function(r){return tu(t,r,e).next((function(t){return t&&(n=!0),va.resolve(!t)}))})).next((function(){return n}))}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.we(t,(function(s,a){if(a<=e){var u=n._e(t,s).next((function(e){if(!e)return o++,r.getEntry(t,s).next((function(){return r.removeEntry(s),uu(t).delete([0,zs(s.path)])}))}));i.push(u)}})).next((function(){return va.waitFor(i)})).next((function(){return r.apply(t)})).next((function(){return o}))},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return mu(t,e)},t.prototype.we=function(t,e){var n,r=uu(t),i=wr.o;return r.$t({index:sa.documentTargetsIndex},(function(t,r){var o=t[0];t[1];var s=r.path,a=r.sequenceNumber;0===o?(i!==wr.o&&e(new ii($s(n)),i),i=a,n=s):i=wr.o})).next((function(){i!==wr.o&&e(new ii($s(n)),i)}))},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function mu(t,e){return uu(t).put(function(t,e){return new sa(0,zs(t.path),e)}(e,t.currentSequenceNumber))}var vu=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];if(this.equalsFn(s,t))return a}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){qr(this.inner,(function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[0],a=o[1];t(s,a)}}))},t.prototype.isEmpty=function(){return Br(this.inner)},t}(),gu=function(){function t(){this.changes=new vu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:Ur.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{document:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{document:_i.newInvalidDocument(t),readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?va.resolve(n.document):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),yu=function(){function t(t,e){this.R=t,this.Ut=e}return t.prototype.addEntry=function(t,e,n){return _u(t).put(Iu(e),n)},t.prototype.removeEntry=function(t,e){var n=_u(t),r=Iu(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next((function(r){return r.byteSize+=e,n.me(t,r)}))},t.prototype.getEntry=function(t,e){var n=this;return _u(t).get(Iu(e)).next((function(t){return n.ye(e,t)}))},t.prototype.ge=function(t,e){var n=this;return _u(t).get(Iu(e)).next((function(t){return{document:n.ye(e,t),size:Ya(t)}}))},t.prototype.getEntries=function(t,e){var n=this,r=$o();return this.pe(t,e,(function(t,e){var i=n.ye(t,e);r=r.insert(t,i)})).next((function(){return r}))},t.prototype.Ee=function(t,e){var n=this,r=$o(),i=new Go(ii.comparator);return this.pe(t,e,(function(t,e){var o=n.ye(t,e);r=r.insert(t,o),i=i.insert(t,Ya(e))})).next((function(){return{documents:r,Te:i}}))},t.prototype.pe=function(t,e,n){if(e.isEmpty())return va.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return _u(t).$t({range:r},(function(t,e,r){for(var s=ii.fromSegments(t);o&&ii.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ct(o.path.toArray()):r.done()})).next((function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=$o(),o=e.path.length+1,s={};if(n.isEqual(Ur.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Pa(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=ra.collectionReadTimeIndex}return _u(t).$t(s,(function(t,n,s){if(t.length===o){var a=Da(r.R,n);e.path.isPrefixOf(a.key.path)?no(e,a)&&(i=i.insert(a.key,a)):s.done()}})).next((function(){return i}))},t.prototype.newChangeBuffer=function(t){return new bu(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next((function(t){return t.byteSize}))},t.prototype.getMetadata=function(t){return wu(t).get(ia.key).next((function(t){return Rr(!!t),t}))},t.prototype.me=function(t,e){return wu(t).put(ia.key,e)},t.prototype.ye=function(t,e){if(e){var n=Da(this.R,e);if(!n.isNoDocument()||!n.version.isEqual(Ur.min()))return n}return _i.newInvalidDocument(t)},t}(),bu=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ie=e,r.trackRemovals=n,r.Ae=new vu((function(t){return t.toString()}),(function(t,e){return t.isEqual(e)})),r}return(0,i.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new zo((function(t,e){return Pr(t.canonicalString(),e.canonicalString())}));return this.changes.forEach((function(o,s){var a=e.Ae.get(o);if(s.document.isValidDocument()){var u=xa(e.Ie.R,s.document,e.getReadTime(o));i=i.add(o.path.popLast());var c=Ya(u);r+=c-a,n.push(e.Ie.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var h=xa(e.Ie.R,_i.newNoDocument(o,Ur.min()),e.getReadTime(o));n.push(e.Ie.addEntry(t,o,h))}else n.push(e.Ie.removeEntry(t,o))})),i.forEach((function(r){n.push(e.Ie.Ut.addToCollectionParentIndex(t,r))})),n.push(this.Ie.updateMetadata(t,r)),va.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ie.ge(t,e).next((function(t){return n.Ae.set(e,t.size),t.document}))},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ie.Ee(t,e).next((function(t){var e=t.documents;return t.Te.forEach((function(t,e){n.Ae.set(t,e)})),e}))},e}(gu);function wu(t){return ka(t,ia.store)}function _u(t){return ka(t,ra.store)}function Iu(t){return t.path.toArray()}var Tu=function(){function t(t){this.R=t}return t.prototype.Rt=function(t,e,n,r){var i=this;Rr(n<r&&n>=0&&r<=11);var o=new ga("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(Qs.store)}(t),function(t){t.createObjectStore(Ys.store,{keyPath:Ys.keyPath}),t.createObjectStore(Zs.store,{keyPath:Zs.keyPath,autoIncrement:!0}).createIndex(Zs.userMutationsIndex,Zs.userMutationsKeyPath,{unique:!0}),t.createObjectStore(ta.store)}(t),Eu(t),function(t){t.createObjectStore(ra.store)}(t));var s=va.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(sa.store),t.deleteObjectStore(oa.store),t.deleteObjectStore(aa.store)}(t),Eu(t)),s=s.next((function(){return function(t){var e=t.store(aa.store),n=new aa(0,0,Ur.min().toTimestamp(),0);return e.put(aa.key,n)}(o)}))),n<4&&r>=4&&(0!==n&&(s=s.next((function(){return function(t,e){return e.store(Zs.store).Nt().next((function(n){t.deleteObjectStore(Zs.store),t.createObjectStore(Zs.store,{keyPath:Zs.keyPath,autoIncrement:!0}).createIndex(Zs.userMutationsIndex,Zs.userMutationsKeyPath,{unique:!0});var r=e.store(Zs.store),i=n.map((function(t){return r.put(t)}));return va.waitFor(i)}))}(t,o)}))),s=s.next((function(){!function(t){t.createObjectStore(ca.store,{keyPath:ca.keyPath})}(t)}))),n<5&&r>=5&&(s=s.next((function(){return i.Re(o)}))),n<6&&r>=6&&(s=s.next((function(){return function(t){t.createObjectStore(ia.store)}(t),i.be(o)}))),n<7&&r>=7&&(s=s.next((function(){return i.ve(o)}))),n<8&&r>=8&&(s=s.next((function(){return i.Pe(t,o)}))),n<9&&r>=9&&(s=s.next((function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(ra.store);e.createIndex(ra.readTimeIndex,ra.readTimeIndexPath,{unique:!1}),e.createIndex(ra.collectionReadTimeIndex,ra.collectionReadTimeIndexPath,{unique:!1})}(e)}))),n<10&&r>=10&&(s=s.next((function(){return i.Ve(o)}))),n<11&&r>=11&&(s=s.next((function(){!function(t){t.createObjectStore(ha.store,{keyPath:ha.keyPath})}(t),function(t){t.createObjectStore(la.store,{keyPath:la.keyPath})}(t)}))),s},t.prototype.be=function(t){var e=0;return t.store(ra.store).$t((function(t,n){e+=Ya(n)})).next((function(){var n=new ia(e);return t.store(ia.store).put(ia.key,n)}))},t.prototype.Re=function(t){var e=this,n=t.store(Ys.store),r=t.store(Zs.store);return n.Nt().next((function(n){return va.forEach(n,(function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.Nt(Zs.userMutationsIndex,i).next((function(r){return va.forEach(r,(function(r){Rr(r.userId===n.userId);var i=Ua(e.R,r);return Qa(t,n.userId,i).next((function(){}))}))}))}))}))},t.prototype.ve=function(t){var e=t.store(sa.store),n=t.store(ra.store);return t.store(aa.store).get(aa.key).next((function(t){var r=[];return n.$t((function(n,i){var o=new Gr(n),s=function(t){return[0,zs(t)]}(o);r.push(e.get(s).next((function(n){return n?va.resolve():function(n){return e.put(new sa(0,zs(n),t.highestListenSequenceNumber))}(o)})))})).next((function(){return va.waitFor(r)}))}))},t.prototype.Pe=function(t,e){t.createObjectStore(ua.store,{keyPath:ua.keyPath});var n=e.store(ua.store),r=new za,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:zs(i)})}};return e.store(ra.store).$t({Ft:!0},(function(t,e){var n=new Gr(t);return i(n.popLast())})).next((function(){return e.store(ta.store).$t({Ft:!0},(function(t,e){t[0];var n=t[1];t[2];var r=$s(n);return i(r.popLast())}))}))},t.prototype.Ve=function(t){var e=this,n=t.store(oa.store);return n.$t((function(t,r){var i=Fa(r),o=qa(e.R,i);return n.put(o)}))},t}();function Eu(t){t.createObjectStore(sa.store,{keyPath:sa.keyPath}).createIndex(sa.documentTargetsIndex,sa.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(oa.store,{keyPath:oa.keyPath}).createIndex(oa.queryTargetsIndexName,oa.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(aa.store)}var Su="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Au=function(){function t(e,n,r,i,o,s,a,u,c,h){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Se=o,this.window=s,this.document=a,this.De=c,this.Ce=h,this.Ne=null,this.xe=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ke=null,this.inForeground=!1,this.Fe=null,this.$e=null,this.Oe=Number.NEGATIVE_INFINITY,this.Me=function(t){return Promise.resolve()},!t.yt())throw new Ir(_r.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new pu(this,i),this.Le=n+"main",this.R=new Oa(u),this.Be=new ya(this.Le,11,new Tu(this.R)),this.qe=new ou(this.referenceDelegate,this.R),this.Ut=new Wa,this.Ue=function(t,e){return new yu(t,e)}(this.R,this.Ut),this.Ke=new Va,this.window&&this.window.localStorage?this.Qe=this.window.localStorage:(this.Qe=null,!1===h&&Ar("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.je().then((function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Ir(_r.FAILED_PRECONDITION,Su);return t.We(),t.Ge(),t.ze(),t.runTransaction("getHighestListenSequenceNumber","readonly",(function(e){return t.qe.getHighestSequenceNumber(e)}))})).then((function(e){t.Ne=new wr(e,t.De)})).then((function(){t.xe=!0})).catch((function(e){return t.Be&&t.Be.close(),Promise.reject(e)}))},t.prototype.He=function(t){var e=this;return this.Me=function(n){return(0,i.mG)(e,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){return this.started?[2,t(n)]:[2]}))}))},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.Be.vt((function(n){return(0,i.mG)(e,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))}))}))},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Se.enqueueAndForget((function(){return(0,i.mG)(e,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return this.started?[4,this.je()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))})))},t.prototype.je=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(function(e){return Cu(e).put(new ca(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next((function(){if(t.isPrimary)return t.Je(e).next((function(e){e||(t.isPrimary=!1,t.Se.enqueueRetryable((function(){return t.Me(!1)})))}))})).next((function(){return t.Ye(e)})).next((function(n){return t.isPrimary&&!n?t.Xe(e).next((function(){return!1})):!!n&&t.Ze(e).next((function(){return!0}))}))})).catch((function(e){if(_a(e))return Sr("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return Sr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1})).then((function(e){t.isPrimary!==e&&t.Se.enqueueRetryable((function(){return t.Me(e)})),t.isPrimary=e}))},t.prototype.Je=function(t){var e=this;return ku(t).get(Qs.key).next((function(t){return va.resolve(e.tn(t))}))},t.prototype.en=function(t){return Cu(t).delete(this.clientId)},t.prototype.nn=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t,e,n,r,o=this;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return!this.isPrimary||this.sn(this.Oe,18e5)?[3,2]:(this.Oe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(function(t){var e=ka(t,ca.store);return e.Nt().next((function(t){var n=o.rn(t,18e5),r=t.filter((function(t){return-1===n.indexOf(t)}));return va.forEach(r,(function(t){return e.delete(t.clientId)})).next((function(){return r}))}))})).catch((function(){return[]}))]);case 1:if(t=i.sent(),this.Qe)for(e=0,n=t;e<n.length;e++)r=n[e],this.Qe.removeItem(this.on(r.clientId));i.label=2;case 2:return[2]}}))}))},t.prototype.ze=function(){var t=this;this.$e=this.Se.enqueueAfterDelay("client_metadata_refresh",4e3,(function(){return t.je().then((function(){return t.nn()})).then((function(){return t.ze()}))}))},t.prototype.tn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.Ye=function(t){var e=this;return this.Ce?va.resolve(!0):ku(t).get(Qs.key).next((function(n){if(null!==n&&e.sn(n.leaseTimestampMs,5e3)&&!e.cn(n.ownerId)){if(e.tn(n)&&e.networkEnabled)return!0;if(!e.tn(n)){if(!n.allowTabSynchronization)throw new Ir(_r.FAILED_PRECONDITION,Su);return!1}}return!(!e.networkEnabled||!e.inForeground)||Cu(t).Nt().next((function(t){return void 0===e.rn(t,5e3).find((function(t){if(e.clientId!==t.clientId){var n=!e.networkEnabled&&t.networkEnabled,r=!e.inForeground&&t.inForeground,i=e.networkEnabled===t.networkEnabled;if(n||r&&i)return!0}return!1}))}))})).next((function(t){return e.isPrimary!==t&&Sr("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t}))},t.prototype.shutdown=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t=this;return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return this.xe=!1,this.un(),this.$e&&(this.$e.cancel(),this.$e=null),this.an(),this.hn(),[4,this.Be.runTransaction("shutdown","readwrite",[Qs.store,ca.store],(function(e){var n=new Aa(e,wr.o);return t.Xe(n).next((function(){return t.en(n)}))}))];case 1:return e.sent(),this.Be.close(),this.ln(),[2]}}))}))},t.prototype.rn=function(t,e){var n=this;return t.filter((function(t){return n.sn(t.updateTimeMs,e)&&!n.cn(t.clientId)}))},t.prototype.fn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",(function(e){return Cu(e).Nt().next((function(e){return t.rn(e,18e5).map((function(t){return t.clientId}))}))}))},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return Za.Qt(t,this.R,this.Ut,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Sr("IndexedDbPersistence","Starting transaction:",t);var i,o="readonly"===e?"readonly":"readwrite";return this.Be.runTransaction(t,o,fa,(function(o){return i=new Aa(o,r.Ne?r.Ne.next():wr.o),"readwrite-primary"===e?r.Je(i).next((function(t){return!!t||r.Ye(i)})).next((function(e){if(!e)throw Ar("Failed to obtain primary lease for action '"+t+"'."),r.isPrimary=!1,r.Se.enqueueRetryable((function(){return r.Me(!1)})),new Ir(_r.FAILED_PRECONDITION,da);return n(i)})).next((function(t){return r.Ze(i).next((function(){return t}))})):r.dn(i).next((function(){return n(i)}))})).then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.dn=function(t){var e=this;return ku(t).get(Qs.key).next((function(t){if(null!==t&&e.sn(t.leaseTimestampMs,5e3)&&!e.cn(t.ownerId)&&!e.tn(t)&&!(e.Ce||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Ir(_r.FAILED_PRECONDITION,Su)}))},t.prototype.Ze=function(t){var e=new Qs(this.clientId,this.allowTabSynchronization,Date.now());return ku(t).put(Qs.key,e)},t.yt=function(){return ya.yt()},t.prototype.Xe=function(t){var e=this,n=ku(t);return n.get(Qs.key).next((function(t){return e.tn(t)?(Sr("IndexedDbPersistence","Releasing primary lease."),n.delete(Qs.key)):va.resolve()}))},t.prototype.sn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(Ar("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.We=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Fe=function(){t.Se.enqueueAndForget((function(){return t.inForeground="visible"===t.document.visibilityState,t.je()}))},this.document.addEventListener("visibilitychange",this.Fe),this.inForeground="visible"===this.document.visibilityState)},t.prototype.an=function(){this.Fe&&(this.document.removeEventListener("visibilitychange",this.Fe),this.Fe=null)},t.prototype.Ge=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.ke=function(){e.un(),(0,o.G6)()&&navigator.appVersion.match("Version/14")&&e.Se.enterRestrictedMode(!0),e.Se.enqueueAndForget((function(){return e.shutdown()}))},this.window.addEventListener("pagehide",this.ke))},t.prototype.hn=function(){this.ke&&(this.window.removeEventListener("pagehide",this.ke),this.ke=null)},t.prototype.cn=function(t){var e;try{var n=null!==(null===(e=this.Qe)||void 0===e?void 0:e.getItem(this.on(t)));return Sr("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return Ar("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.un=function(){if(this.Qe)try{this.Qe.setItem(this.on(this.clientId),String(Date.now()))}catch(t){Ar("Failed to set zombie client id.",t)}},t.prototype.ln=function(){if(this.Qe)try{this.Qe.removeItem(this.on(this.clientId))}catch(t){}},t.prototype.on=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function ku(t){return ka(t,Qs.store)}function Cu(t){return ka(t,ca.store)}function Nu(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Ru=function(t,e){this.progress=t,this.wn=e},Ou=function(){function t(t,e,n){this.Ue=t,this._n=e,this.Ut=n}return t.prototype.mn=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKey(t,e).next((function(r){return n.yn(t,e,r)}))},t.prototype.yn=function(t,e,n){return this.Ue.getEntry(t,e).next((function(t){for(var e=0,r=n;e<r.length;e++)r[e].applyToLocalView(t);return t}))},t.prototype.gn=function(t,e){t.forEach((function(t,n){for(var r=0,i=e;r<i.length;r++)i[r].applyToLocalView(n)}))},t.prototype.pn=function(t,e){var n=this;return this.Ue.getEntries(t,e).next((function(e){return n.En(t,e).next((function(){return e}))}))},t.prototype.En=function(t,e){var n=this;return this._n.getAllMutationBatchesAffectingDocumentKeys(t,e).next((function(t){return n.gn(e,t)}))},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return ii.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Tn(t,e.path):$i(e)?this.In(t,e,n):this.An(t,e,n)},t.prototype.Tn=function(t,e){return this.mn(t,new ii(e)).next((function(t){var e=Qo();return t.isFoundDocument()&&(e=e.insert(t.key,t)),e}))},t.prototype.In=function(t,e,n){var r=this,i=e.collectionGroup,o=Qo();return this.Ut.getCollectionParents(t,i).next((function(s){return va.forEach(s,(function(s){var a=function(t,e){return new Vi(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.An(t,a,n).next((function(t){t.forEach((function(t,e){o=o.insert(t,e)}))}))})).next((function(){return o}))}))},t.prototype.An=function(t,e,n){var r,i,o=this;return this.Ue.getDocumentsMatchingQuery(t,e,n).next((function(n){return r=n,o._n.getAllMutationBatchesAffectingQuery(t,e)})).next((function(e){return i=e,o.Rn(t,i,r).next((function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,h=r.get(c);null==h&&(h=_i.newInvalidDocument(c),r=r.insert(c,h)),ko(u,h,o.localWriteTime),h.isFoundDocument()||(r=r.remove(c))}}))})).next((function(){return r.forEach((function(t,n){no(e,n)||(r=r.remove(t))})),r}))},t.prototype.Rn=function(t,e,n){for(var r=es(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof Do&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.Ue.getEntries(t,r).next((function(t){return t.forEach((function(t,e){e.isFoundDocument()&&(c=c.insert(t,e))})),c}))},t}(),Du=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.bn=n,this.vn=r}return t.Pn=function(e,n){for(var r=es(),i=es(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),xu=function(){function t(){}return t.prototype.Vn=function(t){this.Sn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(Ur.min())?this.Dn(t,e):this.Sn.pn(t,r).next((function(o){var a=i.Cn(e,o);return(Ki(e)||zi(e))&&i.Nn(e.limitType,a,r,n)?i.Dn(t,e):(Er()<=s.in.DEBUG&&Sr("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),eo(e)),i.Sn.getDocumentsMatchingQuery(t,e,n).next((function(t){return a.forEach((function(e){t=t.insert(e.key,e)})),t})))}))},t.prototype.Cn=function(t,e){var n=new zo(ro(t));return e.forEach((function(e,r){no(t,r)&&(n=n.add(r))})),n},t.prototype.Nn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.Dn=function(t,e){return Er()<=s.in.DEBUG&&Sr("QueryEngine","Using full collection scan to execute query:",eo(e)),this.Sn.getDocumentsMatchingQuery(t,e,Ur.min())},t}(),Pu=function(){function t(t,e,n,r){this.persistence=t,this.xn=e,this.R=r,this.kn=new Go(Pr),this.Fn=new vu((function(t){return Ei(t)}),Si),this.$n=Ur.min(),this._n=t.getMutationQueue(n),this.On=t.getRemoteDocumentCache(),this.qe=t.getTargetCache(),this.Mn=new Ou(this.On,this._n,this.persistence.getIndexManager()),this.Ke=t.getBundleCache(),this.xn.Vn(this.Mn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",(function(n){return t.collect(n,e.kn)}))},t}();function Lu(t,e,n,r){return new Pu(t,e,n,r)}function Mu(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,s;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return n=Or(t),r=n._n,o=n.Mn,[4,n.persistence.runTransaction("Handle user change","readonly",(function(t){var i;return n._n.getAllMutationBatches(t).next((function(s){return i=s,r=n.persistence.getMutationQueue(e),o=new Ou(n.On,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)})).next((function(e){for(var n=[],r=[],s=es(),a=0,u=i;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var h=0,l=c.mutations;h<l.length;h++){var f=l[h];s=s.add(f.key)}}for(var d=0,p=e;d<p.length;d++){var m=p[d];r.push(m.batchId);for(var v=0,g=m.mutations;v<g.length;v++){var y=g[v];s=s.add(y.key)}}return o.pn(t,s).next((function(t){return{Ln:t,removedBatchIds:n,addedBatchIds:r}}))}))}))];case 1:return s=i.sent(),[2,(n._n=r,n.Mn=o,n.xn.Vn(n.Mn),s)]}}))}))}function ju(t,e){var n=Or(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(function(t){var r=e.batch.keys(),i=n.On.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=va.resolve();return o.forEach((function(t){s=s.next((function(){return r.getEntry(e,t)})).next((function(e){var o=n.docVersions.get(t);Rr(null!==o),e.version.compareTo(o)<0&&(i.applyToRemoteDocument(e,n),e.isValidDocument()&&r.addEntry(e,n.commitVersion))}))})),s.next((function(){return t._n.removeMutationBatch(e,i)}))}(n,t,e,i).next((function(){return i.apply(t)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}function Uu(t){var e=Or(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(function(t){return e.qe.getLastRemoteSnapshotVersion(t)}))}function Fu(t,e){var n=Or(t),r=e.snapshotVersion,i=n.kn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(function(t){var o=n.On.newChangeBuffer({trackRemovals:!0});i=n.kn;var s=[];e.targetChanges.forEach((function(e,o){var a=i.get(o);if(a){s.push(n.qe.removeMatchingKeys(t,e.removedDocuments,o).next((function(){return n.qe.addMatchingKeys(t,e.addedDocuments,o)})));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Rr(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.qe.updateTargetData(t,c))}}}));var a=$o();if(e.documentUpdates.forEach((function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))})),s.push(qu(t,o,e.documentUpdates,r,void 0).next((function(t){a=t}))),!r.isEqual(Ur.min())){var u=n.qe.getLastRemoteSnapshotVersion(t).next((function(e){return n.qe.setTargetsMetadata(t,t.currentSequenceNumber,r)}));s.push(u)}return va.waitFor(s).next((function(){return o.apply(t)})).next((function(){return n.Mn.En(t,a)})).next((function(){return a}))})).then((function(t){return n.kn=i,t}))}function qu(t,e,n,r,i){var o=es();return n.forEach((function(t){return o=o.add(t)})),e.getEntries(t,o).next((function(t){var o=$o();return n.forEach((function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s.isNoDocument()&&s.version.isEqual(Ur.min())?(e.removeEntry(n,u),o=o.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):Sr("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)})),o}))}function Bu(t,e){var n=Or(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(function(t){return void 0===e&&(e=-1),n._n.getNextMutationBatchAfterBatchId(t,e)}))}function Vu(t,e){var n=Or(t);return n.persistence.runTransaction("Allocate target","readwrite",(function(t){var r;return n.qe.getTargetData(t,e).next((function(i){return i?(r=i,va.resolve(r)):n.qe.allocateTargetId(t).next((function(i){return r=new Ra(e,i,0,t.currentSequenceNumber),n.qe.addTargetData(t,r).next((function(){return r}))}))}))})).then((function(t){var r=n.kn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.kn=n.kn.insert(t.targetId,t),n.Fn.set(e,t.targetId)),t}))}function Gu(t,e,n){return(0,i.mG)(this,void 0,void 0,(function(){var r,o,s,a;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:r=Or(t),o=r.kn.get(e),s=n?"readwrite":"readwrite-primary",i.label=1;case 1:return i.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",s,(function(t){return r.persistence.referenceDelegate.removeTarget(t,o)}))];case 2:i.sent(),i.label=3;case 3:return[3,5];case 4:if(!_a(a=i.sent()))throw a;return Sr("LocalStore","Failed to update sequence numbers for target "+e+": "+a),[3,5];case 5:return r.kn=r.kn.remove(e),r.Fn.delete(o.target),[2]}}))}))}function Hu(t,e,n){var r=Or(t),i=Ur.min(),o=es();return r.persistence.runTransaction("Execute query","readonly",(function(t){return function(t,e,n){var r=Or(t),i=r.Fn.get(n);return void 0!==i?va.resolve(r.kn.get(i)):r.qe.getTargetData(e,n)}(r,t,Qi(e)).next((function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.qe.getMatchingKeysForTargetId(t,e.targetId).next((function(t){o=t}))})).next((function(){return r.xn.getDocumentsMatchingQuery(t,e,n?i:Ur.min(),n?o:es())})).next((function(t){return{documents:t,Bn:o}}))}))}function Ku(t,e){var n=Or(t),r=Or(n.qe),i=n.kn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",(function(t){return r.lt(t,e).next((function(t){return t?t.target:null}))}))}function zu(t){var e=Or(t);return e.persistence.runTransaction("Get new document changes","readonly",(function(t){return function(t,e,n){var r=Or(t),i=$o(),o=Pa(n),s=_u(e),a=IDBKeyRange.lowerBound(o,!0);return s.$t({index:ra.readTimeIndex,range:a},(function(t,e){var n=Da(r.R,e);i=i.insert(n.key,n),o=e.readTime})).next((function(){return{wn:i,readTime:La(o)}}))}(e.On,t,e.$n)})).then((function(t){var n=t.wn,r=t.readTime;return e.$n=r,n}))}function Wu(t){return(0,i.mG)(this,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(n){return[2,(e=Or(t)).persistence.runTransaction("Synchronize last document change read time","readonly",(function(t){return function(t){var e=_u(t),n=Ur.min();return e.$t({index:ra.readTimeIndex,reverse:!0},(function(t,e,r){e.readTime&&(n=La(e.readTime)),r.done()})).next((function(){return n}))}(t)})).then((function(t){e.$n=t}))]}))}))}function Ju(t,e,n,r){return(0,i.mG)(this,void 0,void 0,(function(){var o,s,a,u,c,h,l,f,d,p;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:for(o=Or(t),s=es(),a=$o(),u=Zo(),c=0,h=n;c<h.length;c++)l=h[c],f=e.qn(l.metadata.name),l.document&&(s=s.add(f)),a=a.insert(f,e.Un(l)),u=u.insert(f,e.Kn(l.metadata.readTime));return d=o.On.newChangeBuffer({trackRemovals:!0}),[4,Vu(o,function(t){return Qi(Hi(Gr.fromString("__bundle__/docs/"+t)))}(r))];case 1:return p=i.sent(),[2,o.persistence.runTransaction("Apply bundle documents","readwrite",(function(t){return qu(t,d,a,Ur.min(),u).next((function(e){return d.apply(t),e})).next((function(e){return o.qe.removeMatchingKeysForTargetId(t,p.targetId).next((function(){return o.qe.addMatchingKeys(t,s,p.targetId)})).next((function(){return o.Mn.En(t,e)})).next((function(){return e}))}))}))]}}))}))}function $u(t,e,n){return void 0===n&&(n=es()),(0,i.mG)(this,void 0,void 0,(function(){var r,o;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,Vu(t,Qi(Ba(e.bundledQuery)))];case 1:return r=i.sent(),[2,(o=Or(t)).persistence.runTransaction("Save named query","readwrite",(function(t){var i=bs(e.readTime);if(r.snapshotVersion.compareTo(i)>=0)return o.Ke.saveNamedQuery(t,e);var s=r.withResumeToken(Wr.EMPTY_BYTE_STRING,i);return o.kn=o.kn.insert(s.targetId,s),o.qe.updateTargetData(t,s).next((function(){return o.qe.removeMatchingKeysForTargetId(t,r.targetId)})).next((function(){return o.qe.addMatchingKeys(t,n,r.targetId)})).next((function(){return o.Ke.saveNamedQuery(t,e)}))}))]}}))}))}var Xu=function(){function t(t){this.R=t,this.Qn=new Map,this.jn=new Map}return t.prototype.getBundleMetadata=function(t,e){return va.resolve(this.Qn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Qn.set(e.id,{id:(n=e).id,version:n.version,createTime:bs(n.createTime)}),va.resolve()},t.prototype.getNamedQuery=function(t,e){return va.resolve(this.jn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.jn.set(e.name,function(t){return{name:t.name,query:Ba(t.bundledQuery),readTime:bs(t.readTime)}}(e)),va.resolve()},t}(),Qu=function(){function t(){this.Wn=new zo(Yu.Gn),this.zn=new zo(Yu.Hn)}return t.prototype.isEmpty=function(){return this.Wn.isEmpty()},t.prototype.addReference=function(t,e){var n=new Yu(t,e);this.Wn=this.Wn.add(n),this.zn=this.zn.add(n)},t.prototype.Jn=function(t,e){var n=this;t.forEach((function(t){return n.addReference(t,e)}))},t.prototype.removeReference=function(t,e){this.Yn(new Yu(t,e))},t.prototype.Xn=function(t,e){var n=this;t.forEach((function(t){return n.removeReference(t,e)}))},t.prototype.Zn=function(t){var e=this,n=new ii(new Gr([])),r=new Yu(n,t),i=new Yu(n,t+1),o=[];return this.zn.forEachInRange([r,i],(function(t){e.Yn(t),o.push(t.key)})),o},t.prototype.ts=function(){var t=this;this.Wn.forEach((function(e){return t.Yn(e)}))},t.prototype.Yn=function(t){this.Wn=this.Wn.delete(t),this.zn=this.zn.delete(t)},t.prototype.es=function(t){var e=new ii(new Gr([])),n=new Yu(e,t),r=new Yu(e,t+1),i=es();return this.zn.forEachInRange([n,r],(function(t){i=i.add(t.key)})),i},t.prototype.containsKey=function(t){var e=new Yu(t,0),n=this.Wn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),Yu=function(){function t(t,e){this.key=t,this.ns=e}return t.Gn=function(t,e){return ii.comparator(t.key,e.key)||Pr(t.ns,e.ns)},t.Hn=function(t,e){return Pr(t.ns,e.ns)||ii.comparator(t.key,e.key)},t}(),Zu=function(){function t(t,e){this.Ut=t,this.referenceDelegate=e,this._n=[],this.ss=1,this.rs=new zo(Yu.Gn)}return t.prototype.checkEmpty=function(t){return va.resolve(0===this._n.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ss;this.ss++,this._n.length>0&&this._n[this._n.length-1];var o=new Ca(i,e,n,r);this._n.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.rs=this.rs.add(new Yu(u.key,i)),this.Ut.addToCollectionParentIndex(t,u.key.path.popLast())}return va.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return va.resolve(this.os(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=e+1,r=this.cs(n),i=r<0?0:r;return va.resolve(this._n.length>i?this._n[i]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return va.resolve(0===this._n.length?-1:this.ss-1)},t.prototype.getAllMutationBatches=function(t){return va.resolve(this._n.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new Yu(e,0),i=new Yu(e,Number.POSITIVE_INFINITY),o=[];return this.rs.forEachInRange([r,i],(function(t){var e=n.os(t.ns);o.push(e)})),va.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new zo(Pr);return e.forEach((function(t){var e=new Yu(t,0),i=new Yu(t,Number.POSITIVE_INFINITY);n.rs.forEachInRange([e,i],(function(t){r=r.add(t.ns)}))})),va.resolve(this.us(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;ii.isDocumentKey(i)||(i=i.child(""));var o=new Yu(new ii(i),0),s=new zo(Pr);return this.rs.forEachWhile((function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.ns)),!0)}),o),va.resolve(this.us(s))},t.prototype.us=function(t){var e=this,n=[];return t.forEach((function(t){var r=e.os(t);null!==r&&n.push(r)})),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Rr(0===this.hs(e.batchId,"removed")),this._n.shift();var r=this.rs;return va.forEach(e.mutations,(function(i){var o=new Yu(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)})).next((function(){n.rs=r}))},t.prototype.Gt=function(t){},t.prototype.containsKey=function(t,e){var n=new Yu(e,0),r=this.rs.firstAfterOrEqual(n);return va.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return this._n.length,va.resolve()},t.prototype.hs=function(t,e){return this.cs(t)},t.prototype.cs=function(t){return 0===this._n.length?0:t-this._n[0].batchId},t.prototype.os=function(t){var e=this.cs(t);return e<0||e>=this._n.length?null:this._n[e]},t}(),tc=function(){function t(t,e){this.Ut=t,this.ls=e,this.docs=new Go(ii.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.ls(e);return this.docs=this.docs.insert(r,{document:e.clone(),size:s,readTime:n}),this.size+=s-o,this.Ut.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return va.resolve(n?n.document.clone():_i.newInvalidDocument(e))},t.prototype.getEntries=function(t,e){var n=this,r=$o();return e.forEach((function(t){var e=n.docs.get(t);r=r.insert(t,e?e.document.clone():_i.newInvalidDocument(t))})),va.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=$o(),i=new ii(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.key,u=s.value,c=u.document,h=u.readTime;if(!e.path.isPrefixOf(a.path))break;h.compareTo(n)<=0||no(e,c)&&(r=r.insert(c.key,c.clone()))}return va.resolve(r)},t.prototype.fs=function(t,e){return va.forEach(this.docs,(function(t){return e(t)}))},t.prototype.newChangeBuffer=function(t){return new ec(this)},t.prototype.getSize=function(t){return va.resolve(this.size)},t}(),ec=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ie=e,n}return(0,i.ZT)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach((function(r,i){i.document.isValidDocument()?n.push(e.Ie.addEntry(t,i.document,e.getReadTime(r))):e.Ie.removeEntry(r)})),va.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ie.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ie.getEntries(t,e)},e}(gu),nc=function(){function t(t){this.persistence=t,this.ds=new vu((function(t){return Ei(t)}),Si),this.lastRemoteSnapshotVersion=Ur.min(),this.highestTargetId=0,this.ws=0,this._s=new Qu,this.targetCount=0,this.ys=iu.Jt()}return t.prototype.forEachTarget=function(t,e){return this.ds.forEach((function(t,n){return e(n)})),va.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return va.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return va.resolve(this.ws)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.ys.next(),va.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ws&&(this.ws=e),va.resolve()},t.prototype.te=function(t){this.ds.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.ys=new iu(e),this.highestTargetId=e),t.sequenceNumber>this.ws&&(this.ws=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.te(e),this.targetCount+=1,va.resolve()},t.prototype.updateTargetData=function(t,e){return this.te(e),va.resolve()},t.prototype.removeTargetData=function(t,e){return this.ds.delete(e.target),this._s.Zn(e.targetId),this.targetCount-=1,va.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.ds.forEach((function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.ds.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)})),va.waitFor(o).next((function(){return i}))},t.prototype.getTargetCount=function(t){return va.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.ds.get(e)||null;return va.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this._s.Jn(e,n),va.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this._s.Xn(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach((function(e){i.push(r.markPotentiallyOrphaned(t,e))})),va.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this._s.Zn(e),va.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this._s.es(e);return va.resolve(n)},t.prototype.containsKey=function(t,e){return va.resolve(this._s.containsKey(e))},t}(),rc=function(){function t(t,e){var n=this;this.gs={},this.Ne=new wr(0),this.xe=!1,this.xe=!0,this.referenceDelegate=t(this),this.qe=new nc(this),this.Ut=new Ka,this.Ue=function(t,e){return new tc(t,(function(t){return n.referenceDelegate.ps(t)}))}(this.Ut),this.R=new Oa(e),this.Ke=new Xu(this.R)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.xe=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.xe},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Ut},t.prototype.getMutationQueue=function(t){var e=this.gs[t.toKey()];return e||(e=new Zu(this.Ut,this.referenceDelegate),this.gs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.qe},t.prototype.getRemoteDocumentCache=function(){return this.Ue},t.prototype.getBundleCache=function(){return this.Ke},t.prototype.runTransaction=function(t,e,n){var r=this;Sr("MemoryPersistence","Starting transaction:",t);var i=new ic(this.Ne.next());return this.referenceDelegate.Es(),n(i).next((function(t){return r.referenceDelegate.Ts(i).next((function(){return t}))})).toPromise().then((function(t){return i.raiseOnCommittedEvent(),t}))},t.prototype.Is=function(t,e){return va.or(Object.values(this.gs).map((function(n){return function(){return n.containsKey(t,e)}})))},t}(),ic=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return(0,i.ZT)(e,t),e}(pa),oc=function(){function t(t){this.persistence=t,this.As=new Qu,this.Rs=null}return t.bs=function(e){return new t(e)},Object.defineProperty(t.prototype,"vs",{get:function(){if(this.Rs)return this.Rs;throw Nr()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.As.addReference(n,e),this.vs.delete(n.toString()),va.resolve()},t.prototype.removeReference=function(t,e,n){return this.As.removeReference(n,e),this.vs.add(n.toString()),va.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.vs.add(e.toString()),va.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.As.Zn(e.targetId).forEach((function(t){return n.vs.add(t.toString())}));var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next((function(t){t.forEach((function(t){return n.vs.add(t.toString())}))})).next((function(){return r.removeTargetData(t,e)}))},t.prototype.Es=function(){this.Rs=new Set},t.prototype.Ts=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return va.forEach(this.vs,(function(r){var i=ii.fromPath(r);return e.Ps(t,i).next((function(t){t||n.removeEntry(i)}))})).next((function(){return e.Rs=null,n.apply(t)}))},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ps(t,e).next((function(t){t?n.vs.delete(e.toString()):n.vs.add(e.toString())}))},t.prototype.ps=function(t){return 0},t.prototype.Ps=function(t,e){var n=this;return va.or([function(){return va.resolve(n.As.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Is(t,e)}])},t}(),sc=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function ac(t,e){return"firestore_clients_"+t+"_"+e}function uc(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function cc(t,e){return"firestore_targets_"+t+"_"+e}sc.UNAUTHENTICATED=new sc(null),sc.GOOGLE_CREDENTIALS=new sc("google-credentials-uid"),sc.FIRST_PARTY=new sc("first-party-uid"),sc.MOCK_USER=new sc("mock-user");var hc=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.Vs=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Ir(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(Ar("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),lc=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.Vs=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Ir(i.error.code,i.error.message)),o?new t(e,i.state,r):(Ar("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Ss=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),fc=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.Vs=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=rs(),s=0;i&&s<r.activeTargetIds.length;++s)i=ri(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(Ar("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),dc=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.Vs=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(Ar("SharedClientState","Failed to parse online state: "+e),null)},t}(),pc=function(){function t(){this.activeTargetIds=rs()}return t.prototype.Ds=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.Cs=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Ss=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),mc=function(){function t(t,e,n,r,i){this.window=t,this.Se=e,this.persistenceKey=n,this.Ns=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.xs=this.ks.bind(this),this.Fs=new Go(Pr),this.started=!1,this.$s=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Os=ac(this.persistenceKey,this.Ns),this.Ms=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.Fs=this.Fs.insert(this.Ns,new pc),this.Ls=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.Bs=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.qs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.Us=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Ks=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.xs)}return t.yt=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t,e,n,r,o,s,a,u,c,h,l,f=this;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,this.syncEngine.fn()];case 1:for(t=i.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ns&&(o=this.getItem(ac(this.persistenceKey,r)))&&(s=fc.Vs(r,o))&&(this.Fs=this.Fs.insert(s.clientId,s));for(this.Qs(),(a=this.storage.getItem(this.Us))&&(u=this.js(a))&&this.Ws(u),c=0,h=this.$s;c<h.length;c++)l=h[c],this.ks(l);return this.$s=[],this.window.addEventListener("pagehide",(function(){return f.shutdown()})),this.started=!0,[2]}}))}))},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ms,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Gs(this.Fs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.Fs.forEach((function(n,r){r.activeTargetIds.has(t)&&(e=!0)})),e},t.prototype.addPendingMutation=function(t){this.zs(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.zs(t,e,n),this.Hs(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(cc(this.persistenceKey,t));if(n){var r=lc.Vs(t,n);r&&(e=r.state)}}return this.Js.Ds(t),this.Qs(),e},t.prototype.removeLocalQueryTarget=function(t){this.Js.Cs(t),this.Qs()},t.prototype.isLocalQueryTarget=function(t){return this.Js.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(cc(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.Ys(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach((function(t){r.Hs(t)})),this.currentUser=t,n.forEach((function(t){r.addPendingMutation(t)}))},t.prototype.setOnlineState=function(t){this.Xs(t)},t.prototype.notifyBundleLoaded=function(){this.Zs()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.xs),this.removeItem(this.Os),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return Sr("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){Sr("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){Sr("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.ks=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(Sr("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Os)return void Ar("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Se.enqueueRetryable((function(){return(0,i.mG)(e,void 0,void 0,(function(){var t,e,r,o,s,a;return(0,i.Jh)(this,(function(i){if(this.started){if(null!==n.key)if(this.Ls.test(n.key)){if(null==n.newValue)return t=this.ti(n.key),[2,this.ei(t,null)];if(e=this.ni(n.key,n.newValue))return[2,this.ei(e.clientId,e)]}else if(this.Bs.test(n.key)){if(null!==n.newValue&&(r=this.si(n.key,n.newValue)))return[2,this.ii(r)]}else if(this.qs.test(n.key)){if(null!==n.newValue&&(o=this.ri(n.key,n.newValue)))return[2,this.oi(o)]}else if(n.key===this.Us){if(null!==n.newValue&&(s=this.js(n.newValue)))return[2,this.Ws(s)]}else if(n.key===this.Ms)(a=function(t){var e=wr.o;if(null!=t)try{var n=JSON.parse(t);Rr("number"==typeof n),e=n}catch(t){Ar("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==wr.o&&this.sequenceNumberHandler(a);else if(n.key===this.Ks)return[2,this.syncEngine.ci()]}else this.$s.push(n);return[2]}))}))}))}},Object.defineProperty(t.prototype,"Js",{get:function(){return this.Fs.get(this.Ns)},enumerable:!1,configurable:!0}),t.prototype.Qs=function(){this.setItem(this.Os,this.Js.Ss())},t.prototype.zs=function(t,e,n){var r=new hc(this.currentUser,t,e,n),i=uc(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Ss())},t.prototype.Hs=function(t){var e=uc(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.Xs=function(t){var e={clientId:this.Ns,onlineState:t};this.storage.setItem(this.Us,JSON.stringify(e))},t.prototype.Ys=function(t,e,n){var r=cc(this.persistenceKey,t),i=new lc(t,e,n);this.setItem(r,i.Ss())},t.prototype.Zs=function(){this.setItem(this.Ks,"value-not-used")},t.prototype.ti=function(t){var e=this.Ls.exec(t);return e?e[1]:null},t.prototype.ni=function(t,e){var n=this.ti(t);return fc.Vs(n,e)},t.prototype.si=function(t,e){var n=this.Bs.exec(t),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return hc.Vs(new sc(i),r,e)},t.prototype.ri=function(t,e){var n=this.qs.exec(t),r=Number(n[1]);return lc.Vs(r,e)},t.prototype.js=function(t){return dc.Vs(t)},t.prototype.ii=function(t){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.ui(t.batchId,t.state,t.error)]:(Sr("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])}))}))},t.prototype.oi=function(t){return this.syncEngine.ai(t.targetId,t.state,t.error)},t.prototype.ei=function(t,e){var n=this,r=e?this.Fs.insert(t,e):this.Fs.remove(t),i=this.Gs(this.Fs),o=this.Gs(r),s=[],a=[];return o.forEach((function(t){i.has(t)||s.push(t)})),i.forEach((function(t){o.has(t)||a.push(t)})),this.syncEngine.hi(s,a).then((function(){n.Fs=r}))},t.prototype.Ws=function(t){this.Fs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Gs=function(t){var e=rs();return t.forEach((function(t,n){e=e.unionWith(n.activeTargetIds)})),e},t}(),vc=function(){function t(){this.li=new pc,this.fi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.li.Ds(t),this.fi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.fi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.li.Cs(t)},t.prototype.isLocalQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.fi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.li.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.li.activeTargetIds.has(t)},t.prototype.start=function(){return this.li=new pc,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),gc=function(){function t(){}return t.prototype.di=function(t){},t.prototype.shutdown=function(){},t}(),yc=function(){function t(){var t=this;this.wi=function(){return t._i()},this.mi=function(){return t.yi()},this.gi=[],this.pi()}return t.prototype.di=function(t){this.gi.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.wi),window.removeEventListener("offline",this.mi)},t.prototype.pi=function(){window.addEventListener("online",this.wi),window.addEventListener("offline",this.mi)},t.prototype._i=function(){Sr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(0)},t.prototype.yi=function(){Sr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.gi;t<e.length;t++)(0,e[t])(1)},t.yt=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),bc={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},wc=function(){function t(t){this.Ei=t.Ei,this.Ti=t.Ti}return t.prototype.Ii=function(t){this.Ai=t},t.prototype.Ri=function(t){this.bi=t},t.prototype.onMessage=function(t){this.vi=t},t.prototype.close=function(){this.Ti()},t.prototype.send=function(t){this.Ei(t)},t.prototype.Pi=function(){this.Ai()},t.prototype.Vi=function(t){this.bi(t)},t.prototype.Si=function(t){this.vi(t)},t}(),_c=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n.useFetchStreams=e.useFetchStreams,n}return(0,i.ZT)(e,t),e.prototype.Fi=function(t,e,n,r){return new Promise((function(i,o){var s=new br;s.listenOnce(dr.COMPLETE,(function(){try{switch(s.getLastErrorCode()){case fr.NO_ERROR:var e=s.getResponseJson();Sr("Connection","XHR received:",JSON.stringify(e)),i(e);break;case fr.TIMEOUT:Sr("Connection",'RPC "'+t+'" timed out'),o(new Ir(_r.DEADLINE_EXCEEDED,"Request time out"));break;case fr.HTTP_ERROR:var n=s.getStatus();if(Sr("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values(_r).indexOf(e)>=0?e:_r.UNKNOWN}(r.status);o(new Ir(a,r.message))}else o(new Ir(_r.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Ir(_r.UNAVAILABLE,"Connection failed."));break;default:Nr()}}finally{Sr("Connection",'RPC "'+t+'" completed.')}}));var a=JSON.stringify(r);s.send(e,"POST",a,n,15)}))},e.prototype.Oi=function(t,e){var n=[this.Di,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new ar,i=Zt(),s={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(s.xmlHttpFactory=new gr({})),this.ki(s.initMessageHeaders,e),(0,o.uI)()||(0,o.b$)()||(0,o.d)()||(0,o.w1)()||(0,o.Mn)()||(0,o.ru)()||(s.httpHeadersOverwriteParam="$httpHeaders");var a=n.join("");Sr("Connection","Creating WebChannel: "+a,s);var u=r.createWebChannel(a,s),c=!1,h=!1,l=new wc({Ei:function(t){h?Sr("Connection","Not sending because WebChannel is closed:",t):(c||(Sr("Connection","Opening WebChannel transport."),u.open(),c=!0),Sr("Connection","WebChannel sending:",t),u.send(t))},Ti:function(){return u.close()}}),f=function(t,e,n){t.listen(e,(function(t){try{n(t)}catch(t){setTimeout((function(){throw t}),0)}}))};return f(u,yr.EventType.OPEN,(function(){h||Sr("Connection","WebChannel transport opened.")})),f(u,yr.EventType.CLOSE,(function(){h||(h=!0,Sr("Connection","WebChannel transport closed"),l.Vi())})),f(u,yr.EventType.ERROR,(function(t){h||(h=!0,kr("Connection","WebChannel transport errored:",t),l.Vi(new Ir(_r.UNAVAILABLE,"The operation could not be completed")))})),f(u,yr.EventType.MESSAGE,(function(t){var e;if(!h){var n=t.data[0];Rr(!!n);var r=n,i=r.error||(null===(e=r[0])||void 0===e?void 0:e.error);if(i){Sr("Connection","WebChannel received error:",i);var o=i.status,s=function(t){var e=Mo[t];if(void 0!==e)return Vo(e)}(o),a=i.message;void 0===s&&(s=_r.INTERNAL,a="Unknown error status: "+o+" with message "+i.message),h=!0,l.Vi(new Ir(s,a)),u.close()}else Sr("Connection","WebChannel received:",n),l.Si(n)}})),f(i,pr.STAT_EVENT,(function(t){t.stat===mr?Sr("Connection","Detected buffering proxy"):t.stat===vr&&Sr("Connection","Detected no buffering proxy")})),setTimeout((function(){l.Pi()}),0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId;var e=t.ssl?"https":"http";this.Di=e+"://"+t.host,this.Ci="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Ni=function(t,e,n,r){var i=this.xi(t,e);Sr("RestConnection","Sending: ",i,n);var o={};return this.ki(o,r),this.Fi(t,i,o,n).then((function(t){return Sr("RestConnection","Received: ",t),t}),(function(e){throw kr("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e}))},t.prototype.$i=function(t,e,n,r){return this.Ni(t,e,n,r)},t.prototype.ki=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.10.0",t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.xi=function(t,e){var n=bc[t];return this.Di+"/v1/"+e+":"+n},t}());function Ic(){return"undefined"!=typeof window?window:null}function Tc(){return"undefined"!=typeof document?document:null}function Ec(t){return new ms(t,!0)}var Sc=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Se=t,this.timerId=e,this.Mi=n,this.Li=r,this.Bi=i,this.qi=0,this.Ui=null,this.Ki=Date.now(),this.reset()}return t.prototype.reset=function(){this.qi=0},t.prototype.Qi=function(){this.qi=this.Bi},t.prototype.ji=function(t){var e=this;this.cancel();var n=Math.floor(this.qi+this.Wi()),r=Math.max(0,Date.now()-this.Ki),i=Math.max(0,n-r);i>0&&Sr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.qi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.Ui=this.Se.enqueueAfterDelay(this.timerId,i,(function(){return e.Ki=Date.now(),t()})),this.qi*=this.Li,this.qi<this.Mi&&(this.qi=this.Mi),this.qi>this.Bi&&(this.qi=this.Bi)},t.prototype.Gi=function(){null!==this.Ui&&(this.Ui.skipDelay(),this.Ui=null)},t.prototype.cancel=function(){null!==this.Ui&&(this.Ui.cancel(),this.Ui=null)},t.prototype.Wi=function(){return(Math.random()-.5)*this.qi},t}(),Ac=function(){function t(t,e,n,r,i,o){this.Se=t,this.zi=n,this.Hi=r,this.Ji=i,this.listener=o,this.state=0,this.Yi=0,this.Xi=null,this.stream=null,this.Zi=new Sc(t,e)}return t.prototype.tr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.er=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.nr()},t.prototype.stop=function(){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return this.tr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))},t.prototype.sr=function(){this.state=0,this.Zi.reset()},t.prototype.ir=function(){var t=this;this.er()&&null===this.Xi&&(this.Xi=this.Se.enqueueAfterDelay(this.zi,6e4,(function(){return t.rr()})))},t.prototype.cr=function(t){this.ur(),this.stream.send(t)},t.prototype.rr=function(){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){return this.er()?[2,this.close(0)]:[2]}))}))},t.prototype.ur=function(){this.Xi&&(this.Xi.cancel(),this.Xi=null)},t.prototype.close=function(t,e){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return this.ur(),this.Zi.cancel(),this.Yi++,3!==t?this.Zi.reset():e&&e.code===_r.RESOURCE_EXHAUSTED?(Ar(e.toString()),Ar("Using maximum backoff delay to prevent overloading the backend."),this.Zi.Qi()):e&&e.code===_r.UNAUTHENTICATED&&this.Ji.invalidateToken(),null!==this.stream&&(this.ar(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Ri(e)];case 1:return n.sent(),[2]}}))}))},t.prototype.ar=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.hr(this.Yi),n=this.Yi;this.Ji.getToken().then((function(e){t.Yi===n&&t.lr(e)}),(function(n){e((function(){var e=new Ir(_r.UNKNOWN,"Fetching auth token failed: "+n.message);return t.dr(e)}))}))},t.prototype.lr=function(t){var e=this,n=this.hr(this.Yi);this.stream=this.wr(t),this.stream.Ii((function(){n((function(){return e.state=2,e.listener.Ii()}))})),this.stream.Ri((function(t){n((function(){return e.dr(t)}))})),this.stream.onMessage((function(t){n((function(){return e.onMessage(t)}))}))},t.prototype.nr=function(){var t=this;this.state=4,this.Zi.ji((function(){return(0,i.mG)(t,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){return this.state=0,this.start(),[2]}))}))}))},t.prototype.dr=function(t){return Sr("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.hr=function(t){var e=this;return function(n){e.Se.enqueueAndForget((function(){return e.Yi===t?n():(Sr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())}))}},t}(),kc=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).R=i,s}return(0,i.ZT)(e,t),e.prototype.wr=function(t){return this.Hi.Oi("Listen",t)},e.prototype.onMessage=function(t){this.Zi.reset();var e=function(t,e){var n;if("targetChange"in e){e.targetChange;var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Nr()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.I?(Rr(void 0===e||"string"==typeof e),Wr.fromBase64String(e||"")):(Rr(void 0===e||e instanceof Uint8Array),Wr.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?_r.UNKNOWN:Vo(t.code);return new Ir(e,t.message||"")}(a);n=new us(r,i,o,s||null)}else if("documentChange"in e){e.documentChange,(r=e.documentChange).document,r.document.name,r.document.updateTime,i=Ts(t,r.document.name),o=bs(r.document.updateTime);var a=new bi({mapValue:{fields:r.document.fields}}),u=(s=_i.newFoundDocument(i,o,a),r.targetIds||[]),c=r.removedTargetIds||[];n=new ss(u,c,s.key,s)}else if("documentDelete"in e)e.documentDelete,(r=e.documentDelete).document,i=Ts(t,r.document),o=r.readTime?bs(r.readTime):Ur.min(),a=_i.newNoDocument(i,o),s=r.removedTargetIds||[],n=new ss([],s,a.key,a);else if("documentRemove"in e)e.documentRemove,(r=e.documentRemove).document,i=Ts(t,r.document),o=r.removedTargetIds||[],n=new ss([],o,i,null);else{if(!("filter"in e))return Nr();e.filter;var h=e.filter;h.targetId,r=h.count||0,i=new qo(r),o=h.targetId,n=new as(o,i)}return n}(this.R,t),n=function(t){if(!("targetChange"in t))return Ur.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?Ur.min():e.readTime?bs(e.readTime):Ur.min()}(t);return this.listener._r(e,n)},e.prototype.mr=function(t){var e={};e.database=As(this.R),e.addTarget=function(t,e){var n,r=e.target;return(n=Ai(r)?{documents:Ds(t,r)}:{query:xs(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=gs(t,e.resumeToken):e.snapshotVersion.compareTo(Ur.min())>0&&(n.readTime=vs(t,e.snapshotVersion.toTimestamp())),n}(this.R,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Nr()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(this.R,t);n&&(e.labels=n),this.cr(e)},e.prototype.yr=function(t){var e={};e.database=As(this.R),e.removeTarget=t,this.cr(e)},e}(Ac),Cc=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).R=i,s.gr=!1,s}return(0,i.ZT)(e,t),Object.defineProperty(e.prototype,"pr",{get:function(){return this.gr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.gr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.ar=function(){this.gr&&this.Er([])},e.prototype.wr=function(t){return this.Hi.Oi("Write",t)},e.prototype.onMessage=function(t){if(Rr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.gr){this.Zi.reset();var e=function(t,e){return t&&t.length>0?(Rr(void 0!==e),t.map((function(t){return function(t,e){var n=t.updateTime?bs(t.updateTime):bs(e);return n.isEqual(Ur.min())&&(n=bs(e)),new Io(n,t.transformResults||[])}(t,e)}))):[]}(t.writeResults,t.commitTime),n=bs(t.commitTime);return this.listener.Tr(n,e)}return Rr(!t.writeResults||0===t.writeResults.length),this.gr=!0,this.listener.Ir()},e.prototype.Ar=function(){var t={};t.database=As(this.R),this.cr(t)},e.prototype.Er=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map((function(t){return Rs(e.R,t)}))};this.cr(n)},e}(Ac),Nc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.Hi=n,i.R=r,i.Rr=!1,i}return(0,i.ZT)(e,t),e.prototype.br=function(){if(this.Rr)throw new Ir(_r.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Ni=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.Ni(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===_r.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Ir(_r.UNKNOWN,t.toString())}))},e.prototype.$i=function(t,e,n){var r=this;return this.br(),this.credentials.getToken().then((function(i){return r.Hi.$i(t,e,n,i)})).catch((function(t){throw"FirebaseError"===t.name?(t.code===_r.UNAUTHENTICATED&&r.credentials.invalidateToken(),t):new Ir(_r.UNKNOWN,t.toString())}))},e.prototype.terminate=function(){this.Rr=!0},e}((function(){})),Rc=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.vr=0,this.Pr=null,this.Vr=!0}return t.prototype.Sr=function(){var t=this;0===this.vr&&(this.Dr("Unknown"),this.Pr=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(function(){return t.Pr=null,t.Cr("Backend didn't respond within 10 seconds."),t.Dr("Offline"),Promise.resolve()})))},t.prototype.Nr=function(t){"Online"===this.state?this.Dr("Unknown"):(this.vr++,this.vr>=1&&(this.kr(),this.Cr("Connection failed 1 times. Most recent error: "+t.toString()),this.Dr("Offline")))},t.prototype.set=function(t){this.kr(),this.vr=0,"Online"===t&&(this.Vr=!1),this.Dr(t)},t.prototype.Dr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Cr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Vr?(Ar(e),this.Vr=!1):Sr("OnlineStateTracker",e)},t.prototype.kr=function(){null!==this.Pr&&(this.Pr.cancel(),this.Pr=null)},t}(),Oc=function(t,e,n,r,o){var s=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.Fr=[],this.$r=new Map,this.Or=new Set,this.Mr=[],this.Lr=o,this.Lr.di((function(t){n.enqueueAndForget((function(){return(0,i.mG)(s,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return qc(this)?(Sr("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return(0,i.mG)(this,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return(e=Or(t)).Or.add(4),[4,xc(e)];case 1:return n.sent(),e.Br.set("Unknown"),e.Or.delete(4),[4,Dc(e)];case 2:return n.sent(),[2]}}))}))}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}}))}))}))})),this.Br=new Rc(n,r)};function Dc(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:if(!qc(t))return[3,4];e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function xc(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:e=0,n=t.Mr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}}))}))}function Pc(t,e){var n=Or(t);n.$r.has(e.targetId)||(n.$r.set(e.targetId,e),Fc(n)?Uc(n):eh(n).er()&&Mc(n,e))}function Lc(t,e){var n=Or(t),r=eh(n);n.$r.delete(e),r.er()&&jc(n,e),0===n.$r.size&&(r.er()?r.ir():qc(n)&&n.Br.set("Unknown"))}function Mc(t,e){t.qr.U(e.targetId),eh(t).mr(e)}function jc(t,e){t.qr.U(e),eh(t).yr(e)}function Uc(t){t.qr=new hs({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},lt:function(e){return t.$r.get(e)||null}}),eh(t).start(),t.Br.Sr()}function Fc(t){return qc(t)&&!eh(t).tr()&&t.$r.size>0}function qc(t){return 0===Or(t).Or.size}function Bc(t){t.qr=void 0}function Vc(t){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){return t.$r.forEach((function(e,n){Mc(t,e)})),[2]}))}))}function Gc(t,e){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(n){return Bc(t),Fc(t)?(t.Br.Nr(e),Uc(t)):t.Br.set("Unknown"),[2]}))}))}function Hc(t,e,n){return(0,i.mG)(this,void 0,void 0,(function(){var r,o,s;return(0,i.Jh)(this,(function(a){switch(a.label){case 0:if(t.Br.set("Online"),!(e instanceof us&&2===e.state&&e.cause))return[3,6];a.label=1;case 1:return a.trys.push([1,3,,5]),[4,function(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,s;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:n=e.cause,r=0,o=e.targetIds,i.label=1;case 1:return r<o.length?(s=o[r],t.$r.has(s)?[4,t.remoteSyncer.rejectListen(s,n)]:[3,3]):[3,5];case 2:i.sent(),t.$r.delete(s),t.qr.removeTarget(s),i.label=3;case 3:i.label=4;case 4:return r++,[3,1];case 5:return[2]}}))}))}(t,e)];case 2:return a.sent(),[3,5];case 3:return r=a.sent(),Sr("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,Kc(t,r)];case 4:return a.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof ss?t.qr.X(e):e instanceof as?t.qr.rt(e):t.qr.et(e),n.isEqual(Ur.min()))return[3,13];a.label=7;case 7:return a.trys.push([7,11,,13]),[4,Uu(t.localStore)];case 8:return o=a.sent(),n.compareTo(o)>=0?[4,function(t,e){var n=t.qr.ut(e);return n.targetChanges.forEach((function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.$r.get(r);i&&t.$r.set(r,i.withResumeToken(n.resumeToken,e))}})),n.targetMismatches.forEach((function(e){var n=t.$r.get(e);if(n){t.$r.set(e,n.withResumeToken(Wr.EMPTY_BYTE_STRING,n.snapshotVersion)),jc(t,e);var r=new Ra(n.target,e,1,n.sequenceNumber);Mc(t,r)}})),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:a.sent(),a.label=10;case 10:return[3,13];case 11:return Sr("RemoteStore","Failed to raise snapshot:",s=a.sent()),[4,Kc(t,s)];case 12:return a.sent(),[3,13];case 13:return[2]}}))}))}function Kc(t,e,n){return(0,i.mG)(this,void 0,void 0,(function(){var r=this;return(0,i.Jh)(this,(function(o){switch(o.label){case 0:if(!_a(e))throw e;return t.Or.add(1),[4,xc(t)];case 1:return o.sent(),t.Br.set("Offline"),n||(n=function(){return Uu(t.localStore)}),t.asyncQueue.enqueueRetryable((function(){return(0,i.mG)(r,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return Sr("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Or.delete(1),[4,Dc(t)];case 2:return e.sent(),[2]}}))}))})),[2]}}))}))}function zc(t,e){return e().catch((function(n){return Kc(t,n,e)}))}function Wc(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n,r,o,s;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:e=Or(t),n=nh(e),r=e.Fr.length>0?e.Fr[e.Fr.length-1].batchId:-1,i.label=1;case 1:if(!function(t){return qc(t)&&t.Fr.length<10}(e))return[3,7];i.label=2;case 2:return i.trys.push([2,4,,6]),[4,Bu(e.localStore,r)];case 3:return null===(o=i.sent())?(0===e.Fr.length&&n.ir(),[3,7]):(r=o.batchId,function(t,e){t.Fr.push(e);var n=nh(t);n.er()&&n.pr&&n.Er(e.mutations)}(e,o),[3,6]);case 4:return s=i.sent(),[4,Kc(e,s)];case 5:return i.sent(),[3,6];case 6:return[3,1];case 7:return Jc(e)&&$c(e),[2]}}))}))}function Jc(t){return qc(t)&&!nh(t).tr()&&t.Fr.length>0}function $c(t){nh(t).start()}function Xc(t){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){return nh(t).Ar(),[2]}))}))}function Qc(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n,r,o;return(0,i.Jh)(this,(function(i){for(e=nh(t),n=0,r=t.Fr;n<r.length;n++)o=r[n],e.Er(o.mutations);return[2]}))}))}function Yc(t,e,n){return(0,i.mG)(this,void 0,void 0,(function(){var r,o;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return r=t.Fr.shift(),o=Na.from(r,e,n),[4,zc(t,(function(){return t.remoteSyncer.applySuccessfulWrite(o)}))];case 1:return i.sent(),[4,Wc(t)];case 2:return i.sent(),[2]}}))}))}function Zc(t,e){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return e&&nh(t).pr?[4,function(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return Bo(r=e.code)&&r!==_r.ABORTED?(n=t.Fr.shift(),nh(t).sr(),[4,zc(t,(function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)}))]):[3,3];case 1:return i.sent(),[4,Wc(t)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return Jc(t)&&$c(t),[2]}}))}))}function th(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return n=Or(t),e?(n.Or.delete(2),[4,Dc(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Or.add(2),[4,xc(n)]);case 3:r.sent(),n.Br.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}}))}))}function eh(t){var e=this;return t.Ur||(t.Ur=function(t,e,n){var r=Or(t);return r.br(),new kc(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Vc.bind(null,t),Ri:Gc.bind(null,t),_r:Hc.bind(null,t)}),t.Mr.push((function(n){return(0,i.mG)(e,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return n?(t.Ur.sr(),Fc(t)?Uc(t):t.Br.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.Ur.stop()];case 2:e.sent(),Bc(t),e.label=3;case 3:return[2]}}))}))}))),t.Ur}function nh(t){var e=this;return t.Kr||(t.Kr=function(t,e,n){var r=Or(t);return r.br(),new Cc(e,r.Hi,r.credentials,r.R,n)}(t.datastore,t.asyncQueue,{Ii:Xc.bind(null,t),Ri:Zc.bind(null,t),Ir:Qc.bind(null,t),Tr:Yc.bind(null,t)}),t.Mr.push((function(n){return(0,i.mG)(e,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return n?(t.Kr.sr(),[4,Wc(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Kr.stop()];case 3:e.sent(),t.Fr.length>0&&(Sr("RemoteStore","Stopping write stream with "+t.Fr.length+" pending writes"),t.Fr=[]),e.label=4;case 4:return[2]}}))}))}))),t.Kr}var rh=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new ma,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((function(t){}))}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout((function(){return e.handleDelayElapsed()}),t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Ir(_r.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget((function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then((function(e){return t.deferred.resolve(e)}))):Promise.resolve()}))},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function ih(t,e){if(Ar("AsyncQueue",e+": "+t),_a(t))return new Ir(_r.UNAVAILABLE,e+": "+t);throw t}var oh=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||ii.comparator(e.key,n.key)}:function(t,e){return ii.comparator(t.key,e.key)},this.keyedMap=Qo(),this.sortedSet=new Go(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal((function(e,n){return t(e),!1}))},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach((function(e){t.push(e.toString())})),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),sh=function(){function t(){this.Qr=new Go(ii.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Qr.get(e);n?0!==t.type&&3===n.type?this.Qr=this.Qr.insert(e,t):3===t.type&&1!==n.type?this.Qr=this.Qr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Qr=this.Qr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Qr=this.Qr.remove(e):1===t.type&&2===n.type?this.Qr=this.Qr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Qr=this.Qr.insert(e,{type:2,doc:t.doc}):Nr():this.Qr=this.Qr.insert(e,t)},t.prototype.jr=function(){var t=[];return this.Qr.inorderTraversal((function(e,n){t.push(n)})),t},t}(),ah=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach((function(t){o.push({type:0,doc:t})})),new t(e,n,oh.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Zi(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),uh=function(){this.Wr=void 0,this.listeners=[]},ch=function(){this.queries=new vu((function(t){return to(t)}),Zi),this.onlineState="Unknown",this.Gr=new Set};function hh(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,s,a,u,c;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:if(n=Or(t),r=e.query,o=!1,(s=n.queries.get(r))||(o=!0,s=new uh),!o)return[3,4];i.label=1;case 1:return i.trys.push([1,3,,4]),a=s,[4,n.onListen(r)];case 2:return a.Wr=i.sent(),[3,4];case 3:return u=i.sent(),c=ih(u,"Initialization of query '"+eo(e.query)+"' failed"),[2,void e.onError(c)];case 4:return n.queries.set(r,s),s.listeners.push(e),e.zr(n.onlineState),s.Wr&&e.Hr(s.Wr)&&ph(n),[2]}}))}))}function lh(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,s,a;return(0,i.Jh)(this,(function(i){return n=Or(t),r=e.query,o=!1,(s=n.queries.get(r))&&(a=s.listeners.indexOf(e))>=0&&(s.listeners.splice(a,1),o=0===s.listeners.length),o?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]}))}))}function fh(t,e){for(var n=Or(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=s.query,u=n.queries.get(a);if(u){for(var c=0,h=u.listeners;c<h.length;c++)h[c].Hr(s)&&(r=!0);u.Wr=s}}r&&ph(n)}function dh(t,e,n){var r=Or(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function ph(t){t.Gr.forEach((function(t){t.next()}))}var mh=function(){function t(t,e,n){this.query=t,this.Jr=e,this.Yr=!1,this.Xr=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.Hr=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new ah(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.Yr?this.Zr(t)&&(this.Jr.next(t),o=!0):this.eo(t,this.onlineState)&&(this.no(t),o=!0),this.Xr=t,o},t.prototype.onError=function(t){this.Jr.error(t)},t.prototype.zr=function(t){this.onlineState=t;var e=!1;return this.Xr&&!this.Yr&&this.eo(this.Xr,t)&&(this.no(this.Xr),e=!0),e},t.prototype.eo=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.so&&n||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.Zr=function(t){if(t.docChanges.length>0)return!0;var e=this.Xr&&this.Xr.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!e)&&!0===this.options.includeMetadataChanges},t.prototype.no=function(t){t=ah.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.Yr=!0,this.Jr.next(t)},t}(),vh=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.io=function(){return"metadata"in this.payload},t}(),gh=function(){function t(t){this.R=t}return t.prototype.qn=function(t){return Ts(this.R,t)},t.prototype.Un=function(t){return t.metadata.exists?Ns(this.R,t.document,!1):_i.newNoDocument(this.qn(t.metadata.name),this.Kn(t.metadata.readTime))},t.prototype.Kn=function(t){return bs(t)},t}();!function(){function t(t,e,n){this.ro=t,this.localStore=e,this.R=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.oo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.co=function(t){for(var e=new Map,n=new gh(this.R),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.qn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],h=(e.get(c)||es()).add(s);e.set(c,h)}}return e},t.prototype.complete=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t,e,n,r,o;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,Ju(this.localStore,new gh(this.R),this.documents,this.ro.id)];case 1:t=i.sent(),e=this.co(this.documents),n=0,r=this.queries,i.label=2;case 2:return n<r.length?(o=r[n],[4,$u(this.localStore,o,e.get(o.name))]):[3,5];case 3:i.sent(),i.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Ru(Object.assign({},this.progress),t))]}}))}))}}();var yh=function(t){this.key=t},bh=function(t){this.key=t},wh=function(){function t(t,e){this.query=t,this.uo=e,this.ao=null,this.current=!1,this.ho=es(),this.mutatedKeys=es(),this.lo=ro(t),this.fo=new oh(this.lo)}return Object.defineProperty(t.prototype,"wo",{get:function(){return this.uo},enumerable:!1,configurable:!0}),t.prototype._o=function(t,e){var n=this,r=e?e.mo:new sh,i=e?e.fo:this.fo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Ki(this.query)&&i.size===this.query.limit?i.last():null,c=zi(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((function(t,e){var h=i.get(t),l=no(n.query,e)?e:null,f=!!h&&n.mutatedKeys.has(h.key),d=!!l&&(l.hasLocalMutations||n.mutatedKeys.has(l.key)&&l.hasCommittedMutations),p=!1;h&&l?h.data.isEqual(l.data)?f!==d&&(r.track({type:3,doc:l}),p=!0):n.yo(h,l)||(r.track({type:2,doc:l}),p=!0,(u&&n.lo(l,u)>0||c&&n.lo(l,c)<0)&&(a=!0)):!h&&l?(r.track({type:0,doc:l}),p=!0):h&&!l&&(r.track({type:1,doc:h}),p=!0,(u||c)&&(a=!0)),p&&(l?(s=s.add(l),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))})),Ki(this.query)||zi(this.query))for(;s.size>this.query.limit;){var h=Ki(this.query)?s.last():s.first();s=s.delete(h.key),o=o.delete(h.key),r.track({type:1,doc:h})}return{fo:s,mo:r,Nn:a,mutatedKeys:o}},t.prototype.yo=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.fo;this.fo=t.fo,this.mutatedKeys=t.mutatedKeys;var o=t.mo.jr();o.sort((function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Nr()}};return n(t)-n(e)}(t.type,e.type)||r.lo(t.doc,e.doc)})),this.po(n);var s=e?this.Eo():[],a=0===this.ho.size&&this.current?1:0,u=a!==this.ao;return this.ao=a,0!==o.length||u?{snapshot:new ah(this.query,t.fo,i,o,t.mutatedKeys,0===a,u,!1),To:s}:{To:s}},t.prototype.zr=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({fo:this.fo,mo:new sh,mutatedKeys:this.mutatedKeys,Nn:!1},!1)):{To:[]}},t.prototype.Io=function(t){return!this.uo.has(t)&&!!this.fo.has(t)&&!this.fo.get(t).hasLocalMutations},t.prototype.po=function(t){var e=this;t&&(t.addedDocuments.forEach((function(t){return e.uo=e.uo.add(t)})),t.modifiedDocuments.forEach((function(t){})),t.removedDocuments.forEach((function(t){return e.uo=e.uo.delete(t)})),this.current=t.current)},t.prototype.Eo=function(){var t=this;if(!this.current)return[];var e=this.ho;this.ho=es(),this.fo.forEach((function(e){t.Io(e.key)&&(t.ho=t.ho.add(e.key))}));var n=[];return e.forEach((function(e){t.ho.has(e)||n.push(new bh(e))})),this.ho.forEach((function(t){e.has(t)||n.push(new yh(t))})),n},t.prototype.Ao=function(t){this.uo=t.Bn,this.ho=es();var e=this._o(t.documents);return this.applyChanges(e,!0)},t.prototype.Ro=function(){return ah.fromInitialDocuments(this.query,this.fo,this.mutatedKeys,0===this.ao)},t}(),_h=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Ih=function(t){this.key=t,this.bo=!1},Th=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.vo={},this.Po=new vu((function(t){return to(t)}),Zi),this.Vo=new Map,this.So=new Set,this.Do=new Go(ii.comparator),this.Co=new Map,this.No=new Qu,this.xo={},this.ko=new Map,this.Fo=iu.Yt(),this.onlineState="Unknown",this.$o=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.$o},enumerable:!1,configurable:!0}),t}();function Eh(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,s,a,u;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return n=Zh(t),(s=n.Po.get(e))?(r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),o=s.view.Ro(),[3,4]):[3,1];case 1:return[4,Vu(n.localStore,Qi(e))];case 2:return a=i.sent(),u=n.sharedClientState.addLocalQueryTarget(a.targetId),r=a.targetId,[4,Sh(n,e,r,"current"===u)];case 3:o=i.sent(),n.isPrimaryClient&&Pc(n.remoteStore,a),i.label=4;case 4:return[2,o]}}))}))}function Sh(t,e,n,r){return(0,i.mG)(this,void 0,void 0,(function(){var o,s,a,u,c,h;return(0,i.Jh)(this,(function(l){switch(l.label){case 0:return t.Oo=function(e,n,r){return function(t,e,n,r){return(0,i.mG)(this,void 0,void 0,(function(){var o,s,a;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return(o=e.view._o(n)).Nn?[4,Hu(t.localStore,e.query,!1).then((function(t){var n=t.documents;return e.view._o(n,o)}))]:[3,2];case 1:o=i.sent(),i.label=2;case 2:return s=r&&r.targetChanges.get(e.targetId),a=e.view.applyChanges(o,t.isPrimaryClient,s),[2,(Uh(t,e.targetId,a.To),a.snapshot)]}}))}))}(t,e,n,r)},[4,Hu(t.localStore,e,!0)];case 1:return o=l.sent(),s=new wh(e,o.Bn),a=s._o(o.documents),u=os.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),c=s.applyChanges(a,t.isPrimaryClient,u),Uh(t,n,c.To),h=new _h(e,n,s),[2,(t.Po.set(e,h),t.Vo.has(n)?t.Vo.get(n).push(e):t.Vo.set(n,[e]),c.snapshot)]}}))}))}function Ah(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return n=Or(t),r=n.Po.get(e),(o=n.Vo.get(r.targetId)).length>1?[2,(n.Vo.set(r.targetId,o.filter((function(t){return!Zi(t,e)}))),void n.Po.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,Gu(n.localStore,r.targetId,!1).then((function(){n.sharedClientState.clearQueryState(r.targetId),Lc(n.remoteStore,r.targetId),Mh(n,r.targetId)})).catch(cu)]):[3,3];case 1:i.sent(),i.label=2;case 2:return[3,5];case 3:return Mh(n,r.targetId),[4,Gu(n.localStore,r.targetId,!0)];case 4:i.sent(),i.label=5;case 5:return[2]}}))}))}function kh(t,e,n){return(0,i.mG)(this,void 0,void 0,(function(){var r,o,s,a;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:r=tl(t),i.label=1;case 1:return i.trys.push([1,5,,6]),[4,function(t,e){var n,r=Or(t),i=jr.now(),o=e.reduce((function(t,e){return t.add(e.key)}),es());return r.persistence.runTransaction("Locally write mutations","readwrite",(function(t){return r.Mn.pn(t,o).next((function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],h=Co(c,n.get(c.key));null!=h&&s.push(new Do(c.key,h,wi(h.value.mapValue),To.exists(!0)))}return r._n.addMutationBatch(t,i,s,e)}))})).then((function(t){return t.applyToLocalDocumentSet(n),{batchId:t.batchId,changes:n}}))}(r.localStore,e)];case 2:return o=i.sent(),r.sharedClientState.addPendingMutation(o.batchId),function(t,e,n){var r=t.xo[t.currentUser.toKey()];r||(r=new Go(Pr)),r=r.insert(e,n),t.xo[t.currentUser.toKey()]=r}(r,o.batchId,n),[4,Bh(r,o.changes)];case 3:return i.sent(),[4,Wc(r.remoteStore)];case 4:return i.sent(),[3,6];case 5:return s=i.sent(),a=ih(s,"Failed to persist write"),n.reject(a),[3,6];case 6:return[2]}}))}))}function Ch(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:n=Or(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Fu(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach((function(t,e){var r=n.Co.get(e);r&&(Rr(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.bo=!0:t.modifiedDocuments.size>0?Rr(r.bo):t.removedDocuments.size>0&&(Rr(r.bo),r.bo=!1))})),[4,Bh(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,cu(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Nh(t,e,n){var r=Or(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.Po.forEach((function(t,n){var r=n.view.zr(e);r.snapshot&&i.push(r.snapshot)})),function(t,e){var n=Or(t);n.onlineState=e;var r=!1;n.queries.forEach((function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].zr(e)&&(r=!0)})),r&&ph(n)}(r.eventManager,e),i.length&&r.vo._r(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Rh(t,e,n){return(0,i.mG)(this,void 0,void 0,(function(){var r,o,s,a,u,c;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return(r=Or(t)).sharedClientState.updateQueryState(e,"rejected",n),o=r.Co.get(e),(s=o&&o.key)?(a=(a=new Go(ii.comparator)).insert(s,_i.newNoDocument(s,Ur.min())),u=es().add(s),c=new is(Ur.min(),new Map,new zo(Pr),a,u),[4,Ch(r,c)]):[3,2];case 1:return i.sent(),r.Do=r.Do.remove(s),r.Co.delete(e),qh(r),[3,4];case 2:return[4,Gu(r.localStore,e,!1).then((function(){return Mh(r,e,n)})).catch(cu)];case 3:i.sent(),i.label=4;case 4:return[2]}}))}))}function Oh(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:n=Or(t),r=e.batch.batchId,i.label=1;case 1:return i.trys.push([1,4,,6]),[4,ju(n.localStore,e)];case 2:return o=i.sent(),Lh(n,r,null),Ph(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Bh(n,o)];case 3:return i.sent(),[3,6];case 4:return[4,cu(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function Dh(t,e,n){return(0,i.mG)(this,void 0,void 0,(function(){var r,o;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:r=Or(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,function(t,e){var n=Or(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",(function(t){var r;return n._n.lookupMutationBatch(t,e).next((function(e){return Rr(null!==e),r=e.keys(),n._n.removeMutationBatch(t,e)})).next((function(){return n._n.performConsistencyCheck(t)})).next((function(){return n.Mn.pn(t,r)}))}))}(r.localStore,e)];case 2:return o=i.sent(),Lh(r,e,n),Ph(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Bh(r,o)];case 3:return i.sent(),[3,6];case 4:return[4,cu(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}}))}))}function xh(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,s,a;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:qc((n=Or(t)).remoteStore)||Sr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,function(t){var e=Or(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",(function(t){return e._n.getHighestUnacknowledgedBatchId(t)}))}(n.localStore)];case 2:return-1===(r=i.sent())?[2,void e.resolve()]:((o=n.ko.get(r)||[]).push(e),n.ko.set(r,o),[3,4]);case 3:return s=i.sent(),a=ih(s,"Initialization of waitForPendingWrites() operation failed"),e.reject(a),[3,4];case 4:return[2]}}))}))}function Ph(t,e){(t.ko.get(e)||[]).forEach((function(t){t.resolve()})),t.ko.delete(e)}function Lh(t,e,n){var r=Or(t),i=r.xo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.xo[r.currentUser.toKey()]=i}}function Mh(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.Vo.get(e);r<i.length;r++){var o=i[r];t.Po.delete(o),n&&t.vo.Mo(o,n)}t.Vo.delete(e),t.isPrimaryClient&&t.No.Zn(e).forEach((function(e){t.No.containsKey(e)||jh(t,e)}))}function jh(t,e){t.So.delete(e.path.canonicalString());var n=t.Do.get(e);null!==n&&(Lc(t.remoteStore,n),t.Do=t.Do.remove(e),t.Co.delete(n),qh(t))}function Uh(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof yh?(t.No.addReference(o.key,e),Fh(t,o)):o instanceof bh?(Sr("SyncEngine","Document no longer in limbo: "+o.key),t.No.removeReference(o.key,e),t.No.containsKey(o.key)||jh(t,o.key)):Nr()}}function Fh(t,e){var n=e.key,r=n.path.canonicalString();t.Do.get(n)||t.So.has(r)||(Sr("SyncEngine","New document in limbo: "+n),t.So.add(r),qh(t))}function qh(t){for(;t.So.size>0&&t.Do.size<t.maxConcurrentLimboResolutions;){var e=t.So.values().next().value;t.So.delete(e);var n=new ii(Gr.fromString(e)),r=t.Fo.next();t.Co.set(r,new Ih(n)),t.Do=t.Do.insert(n,r),Pc(t.remoteStore,new Ra(Qi(Hi(n.path)),r,2,wr.o))}}function Bh(t,e,n){return(0,i.mG)(this,void 0,void 0,(function(){var r,o,s,a;return(0,i.Jh)(this,(function(u){switch(u.label){case 0:return r=Or(t),o=[],s=[],a=[],r.Po.isEmpty()?[3,3]:(r.Po.forEach((function(t,i){a.push(r.Oo(i,e,n).then((function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(i.targetId,t.fromCache?"not-current":"current"),o.push(t);var e=Du.Pn(i.targetId,t);s.push(e)}})))})),[4,Promise.all(a)]);case 1:return u.sent(),r.vo._r(o),[4,function(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,s,a,u,c,h,l;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:n=Or(t),i.label=1;case 1:return i.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",(function(t){return va.forEach(e,(function(e){return va.forEach(e.bn,(function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)})).next((function(){return va.forEach(e.vn,(function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)}))}))}))}))];case 2:return i.sent(),[3,4];case 3:if(!_a(r=i.sent()))throw r;return Sr("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(o=0,s=e;o<s.length;o++)a=s[o],u=a.targetId,a.fromCache||(c=n.kn.get(u),h=c.snapshotVersion,l=c.withLastLimboFreeSnapshotVersion(h),n.kn=n.kn.insert(u,l));return[2]}}))}))}(r.localStore,s)];case 2:u.sent(),u.label=3;case 3:return[2]}}))}))}function Vh(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return(n=Or(t)).currentUser.isEqual(e)?[3,3]:(Sr("SyncEngine","User change. New user:",e.toKey()),[4,Mu(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.ko.forEach((function(t){t.forEach((function(t){t.reject(new Ir(_r.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))}))})),t.ko.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Bh(n,r.Ln)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function Gh(t,e){var n=Or(t),r=n.Co.get(e);if(r&&r.bo)return es().add(r.key);var i=es(),o=n.Vo.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=a[s],c=n.Po.get(u);i=i.unionWith(c.view.wo)}return i}function Hh(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,Hu((n=Or(t)).localStore,e.query,!0)];case 1:return r=i.sent(),o=e.view.Ao(r),[2,(n.isPrimaryClient&&Uh(n,e.targetId,o.To),o)]}}))}))}function Kh(t){return(0,i.mG)(this,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(n){return[2,zu((e=Or(t)).localStore).then((function(t){return Bh(e,t)}))]}))}))}function zh(t,e,n,r){return(0,i.mG)(this,void 0,void 0,(function(){var o,s;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,function(t,e){var n=Or(t),r=Or(n._n);return n.persistence.runTransaction("Lookup mutation documents","readonly",(function(t){return r.jt(t,e).next((function(e){return e?n.Mn.pn(t,e):va.resolve(null)}))}))}((o=Or(t)).localStore,e)];case 1:return null===(s=i.sent())?[3,6]:"pending"!==n?[3,3]:[4,Wc(o.remoteStore)];case 2:return i.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Lh(o,e,r||null),Ph(o,e),function(t,e){Or(Or(t)._n).Gt(e)}(o.localStore,e)):Nr(),i.label=4;case 4:return[4,Bh(o,s)];case 5:return i.sent(),[3,7];case 6:Sr("SyncEngine","Cannot apply mutation batch with id: "+e),i.label=7;case 7:return[2]}}))}))}function Wh(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,s,a,u,c,h;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return Zh(n=Or(t)),tl(n),!0!==e||!0===n.$o?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,Jh(n,r.toArray())]);case 1:return o=i.sent(),n.$o=!0,[4,th(n.remoteStore,!0)];case 2:for(i.sent(),s=0,a=o;s<a.length;s++)u=a[s],Pc(n.remoteStore,u);return[3,7];case 3:return!1!==e||!1===n.$o?[3,7]:(c=[],h=Promise.resolve(),n.Vo.forEach((function(t,e){n.sharedClientState.isLocalQueryTarget(e)?c.push(e):h=h.then((function(){return Mh(n,e),Gu(n.localStore,e,!0)})),Lc(n.remoteStore,e)})),[4,h]);case 4:return i.sent(),[4,Jh(n,c)];case 5:return i.sent(),function(t){var e=Or(t);e.Co.forEach((function(t,n){Lc(e.remoteStore,n)})),e.No.ts(),e.Co=new Map,e.Do=new Go(ii.comparator)}(n),n.$o=!1,[4,th(n.remoteStore,!1)];case 6:i.sent(),i.label=7;case 7:return[2]}}))}))}function Jh(t,e,n){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,s,a,u,c,h,l,f,d,p,m,v;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:n=Or(t),r=[],o=[],s=0,a=e,i.label=1;case 1:return s<a.length?(u=a[s],c=void 0,(h=n.Vo.get(u))&&0!==h.length?[4,Vu(n.localStore,Qi(h[0]))]:[3,7]):[3,13];case 2:c=i.sent(),l=0,f=h,i.label=3;case 3:return l<f.length?(d=f[l],p=n.Po.get(d),[4,Hh(n,p)]):[3,6];case 4:(m=i.sent()).snapshot&&o.push(m.snapshot),i.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,Ku(n.localStore,u)];case 8:return v=i.sent(),[4,Vu(n.localStore,v)];case 9:return c=i.sent(),[4,Sh(n,$h(v),u,!1)];case 10:i.sent(),i.label=11;case 11:r.push(c),i.label=12;case 12:return s++,[3,1];case 13:return[2,(n.vo._r(o),r)]}}))}))}function $h(t){return Gi(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function Xh(t){var e=Or(t);return Or(Or(e.localStore).persistence).fn()}function Qh(t,e,n,r){return(0,i.mG)(this,void 0,void 0,(function(){var o,s,a;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return(o=Or(t)).$o?(Sr("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!o.Vo.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,zu(o.localStore)];case 3:return s=i.sent(),a=is.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Bh(o,s,a)];case 4:return i.sent(),[3,8];case 5:return[4,Gu(o.localStore,e,!0)];case 6:return i.sent(),Mh(o,e,r),[3,8];case 7:Nr(),i.label=8;case 8:return[2]}}))}))}function Yh(t,e,n){return(0,i.mG)(this,void 0,void 0,(function(){var r,o,s,a,u,c,h,l,f,d;return(0,i.Jh)(this,(function(p){switch(p.label){case 0:if(!(r=Zh(t)).$o)return[3,10];o=0,s=e,p.label=1;case 1:return o<s.length?(a=s[o],r.Vo.has(a)?(Sr("SyncEngine","Adding an already active target "+a),[3,5]):[4,Ku(r.localStore,a)]):[3,6];case 2:return u=p.sent(),[4,Vu(r.localStore,u)];case 3:return c=p.sent(),[4,Sh(r,$h(u),c.targetId,!1)];case 4:p.sent(),Pc(r.remoteStore,c),p.label=5;case 5:return o++,[3,1];case 6:h=function(t){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return r.Vo.has(t)?[4,Gu(r.localStore,t,!1).then((function(){Lc(r.remoteStore,t),Mh(r,t)})).catch(cu)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}}))},l=0,f=n,p.label=7;case 7:return l<f.length?(d=f[l],[5,h(d)]):[3,10];case 8:p.sent(),p.label=9;case 9:return l++,[3,7];case 10:return[2]}}))}))}function Zh(t){var e=Or(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ch.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Gh.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Rh.bind(null,e),e.vo._r=fh.bind(null,e.eventManager),e.vo.Mo=dh.bind(null,e.eventManager),e}function tl(t){var e=Or(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Oh.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Dh.bind(null,e),e}var el=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return this.R=Ec(t.databaseInfo.databaseId),this.sharedClientState=this.Bo(t),this.persistence=this.qo(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.Uo(t),this.localStore=this.Ko(t),[2]}}))}))},t.prototype.Uo=function(t){return null},t.prototype.Ko=function(t){return Lu(this.persistence,new xu,t.initialUser,this.R)},t.prototype.qo=function(t){return new rc(oc.bs,this.R)},t.prototype.Bo=function(t){return new vc},t.prototype.terminate=function(){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}}))}))},t}(),nl=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Qo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return(0,i.ZT)(e,t),e.prototype.initialize=function(e){return(0,i.mG)(this,void 0,void 0,(function(){var n=this;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return r.sent(),[4,Wu(this.localStore)];case 2:return r.sent(),[4,this.Qo.initialize(this,e)];case 3:return r.sent(),[4,tl(this.Qo.syncEngine)];case 4:return r.sent(),[4,Wc(this.Qo.remoteStore)];case 5:return r.sent(),[4,this.persistence.He((function(){return n.gcScheduler&&!n.gcScheduler.started&&n.gcScheduler.start(n.localStore),Promise.resolve()}))];case 6:return r.sent(),[2]}}))}))},e.prototype.Ko=function(t){return Lu(this.persistence,new xu,t.initialUser,this.R)},e.prototype.Uo=function(t){var e=this.persistence.referenceDelegate.garbageCollector;return new fu(e,t.asyncQueue)},e.prototype.qo=function(t){var e=Nu(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?Xa.withCacheSize(this.cacheSizeBytes):Xa.DEFAULT;return new Au(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Ic(),Tc(),this.R,this.sharedClientState,!!this.forceOwnership)},e.prototype.Bo=function(t){return new vc},e}(el),rl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Qo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return(0,i.ZT)(e,t),e.prototype.initialize=function(e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r=this;return(0,i.Jh)(this,(function(o){switch(o.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return o.sent(),n=this.Qo.syncEngine,this.sharedClientState instanceof mc?(this.sharedClientState.syncEngine={ui:zh.bind(null,n),ai:Qh.bind(null,n),hi:Yh.bind(null,n),fn:Xh.bind(null,n),ci:Kh.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:o.sent(),o.label=3;case 3:return[4,this.persistence.He((function(t){return(0,i.mG)(r,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return[4,Wh(this.Qo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}}))}))}))];case 4:return o.sent(),[2]}}))}))},e.prototype.Bo=function(t){var e=Ic();if(!mc.yt(e))throw new Ir(_r.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Nu(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new mc(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(nl),il=function(){function t(){}return t.prototype.initialize=function(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n=this;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return Nh(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=Vh.bind(null,this.syncEngine),[4,th(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}}))}))},t.prototype.createEventManager=function(t){return new ch},t.prototype.createDatastore=function(t){var e,n=Ec(t.databaseInfo.databaseId),r=(e=t.databaseInfo,new _c(e));return function(t,e,n){return new Nc(t,e,n)}(t.credentials,r,n)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return Nh(s.syncEngine,t,0)},o=yc.yt()?new yc:new gc,new Oc(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Th(t,e,n,r,i,o);return s&&(a.$o=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return(0,i.mG)(this,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return e=Or(t),Sr("RemoteStore","RemoteStore shutting down."),e.Or.add(5),[4,xc(e)];case 1:return n.sent(),e.Lr.shutdown(),e.Br.set("Unknown"),[2]}}))}))}(this.remoteStore)},t}(),ol=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.jo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.jo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Wo=function(){this.muted=!0},t.prototype.jo=function(t,e){var n=this;this.muted||setTimeout((function(){n.muted||t(e)}),0)},t}(),sl=(function(){function t(t,e){var n=this;this.Go=t,this.R=e,this.metadata=new ma,this.buffer=new Uint8Array,this.zo=new TextDecoder("utf-8"),this.Ho().then((function(t){t&&t.io()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))}),(function(t){return n.metadata.reject(t)}))}t.prototype.close=function(){return this.Go.cancel()},t.prototype.getMetadata=function(){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){return[2,this.metadata.promise]}))}))},t.prototype.Lo=function(){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.Ho())]}}))}))},t.prototype.Ho=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t,e,n,r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,this.Jo()];case 1:return null===(t=i.sent())?[2,null]:(e=this.zo.decode(t),n=Number(e),isNaN(n)&&this.Yo("length string ("+e+") is not valid number"),[4,this.Xo(n)]);case 2:return r=i.sent(),[2,new vh(JSON.parse(r),t.length+n)]}}))}))},t.prototype.Zo=function(){return this.buffer.findIndex((function(t){return t==="{".charCodeAt(0)}))},t.prototype.Jo=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t,e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return this.Zo()<0?[4,this.tc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.Zo())<0&&this.Yo("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}}))}))},t.prototype.Xo=function(t){return(0,i.mG)(this,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.tc()]:[3,3];case 1:n.sent()&&this.Yo("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.zo.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}}))}))},t.prototype.Yo=function(t){throw this.Go.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.tc=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t,e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return[4,this.Go.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}}))}))}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n=this;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Ir(_r.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o,s,a,u;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return n=Or(t),r=As(n.R)+"/documents",o={documents:e.map((function(t){return Is(n.R,t)}))},[4,n.$i("BatchGetDocuments",r,o)];case 1:return s=i.sent(),a=new Map,s.forEach((function(t){var e=function(t,e){return"found"in e?function(t,e){Rr(!!e.found),e.found.name,e.found.updateTime;var n=Ts(t,e.found.name),r=bs(e.found.updateTime),i=new bi({mapValue:{fields:e.found.fields}});return _i.newFoundDocument(n,r,i)}(t,e):"missing"in e?function(t,e){Rr(!!e.missing),Rr(!!e.readTime);var n=Ts(t,e.missing),r=bs(e.readTime);return _i.newNoDocument(n,r)}(t,e):Nr()}(n.R,t);a.set(e.key.toString(),e)})),u=[],[2,(e.forEach((function(t){var e=a.get(t.toString());Rr(!!e),u.push(e)})),u)]}}))}))}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach((function(t){return n.recordVersion(t)})),e)]}}))}))},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new Uo(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t,e=this;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach((function(e){t.delete(e.key.toString())})),t.forEach((function(t,n){var r=ii.fromPath(n);e.mutations.push(new Fo(r,e.precondition(r)))})),[4,function(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return n=Or(t),r=As(n.R)+"/documents",o={writes:e.map((function(t){return Rs(n.R,t)}))},[4,n.Ni("Commit",r,o)];case 1:return i.sent(),[2]}}))}))}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}}))}))},t.prototype.recordVersion=function(t){var e;if(t.isFoundDocument())e=t.version;else{if(!t.isNoDocument())throw Nr();e=Ur.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Ir(_r.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?To.updateTime(e):To.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Ur.min()))throw new Ir(_r.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return To.updateTime(e)}return To.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),al=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.ec=5,this.Zi=new Sc(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ec-=1,this.nc()},t.prototype.nc=function(){var t=this;this.Zi.ji((function(){return(0,i.mG)(t,void 0,void 0,(function(){var t,e,n=this;return(0,i.Jh)(this,(function(r){return t=new sl(this.datastore),(e=this.sc(t))&&e.then((function(e){n.asyncQueue.enqueueAndForget((function(){return t.commit().then((function(){n.deferred.resolve(e)})).catch((function(t){n.ic(t)}))}))})).catch((function(t){n.ic(t)})),[2]}))}))}))},t.prototype.sc=function(t){try{var e=this.updateFunction(t);return!ei(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.ic=function(t){var e=this;this.ec>0&&this.rc(t)?(this.ec-=1,this.asyncQueue.enqueueAndForget((function(){return e.nc(),Promise.resolve()}))):this.deferred.reject(t)},t.prototype.rc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Bo(e)}return!1},t}(),ul=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=sc.UNAUTHENTICATED,this.clientId=xr.u(),this.credentialListener=function(){return Promise.resolve()},this.credentials.setChangeListener(e,(function(t){return(0,i.mG)(r,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return Sr("FirestoreClient","Received user=",t.uid),[4,this.credentialListener(t)];case 1:return e.sent(),this.user=t,[2]}}))}))}))}return t.prototype.getConfiguration=function(){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){return[2,{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100}]}))}))},t.prototype.setCredentialChangeListener=function(t){this.credentialListener=t},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Ir(_r.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new ma;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((function(){return(0,i.mG)(t,void 0,void 0,(function(){var t,n;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=ih(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}}))}))})),e.promise},t}();function cl(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r,o=this;return(0,i.Jh)(this,(function(s){switch(s.label){case 0:return t.asyncQueue.verifyOperationInProgress(),Sr("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=s.sent(),[4,e.initialize(n)];case 2:return s.sent(),r=n.initialUser,t.setCredentialChangeListener((function(t){return(0,i.mG)(o,void 0,void 0,(function(){return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return r.isEqual(t)?[3,2]:[4,Mu(e.localStore,t)];case 1:n.sent(),r=t,n.label=2;case 2:return[2]}}))}))})),e.persistence.setDatabaseDeletedListener((function(){return t.terminate()})),t.offlineComponents=e,[2]}}))}))}function hl(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r;return(0,i.Jh)(this,(function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,ll(t)];case 1:return n=o.sent(),Sr("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=o.sent(),[4,e.initialize(n,r)];case 3:return o.sent(),t.setCredentialChangeListener((function(t){return function(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return(n=Or(t)).asyncQueue.verifyOperationInProgress(),Sr("RemoteStore","RemoteStore received new credentials"),r=qc(n),n.Or.add(3),[4,xc(n)];case 1:return i.sent(),r&&n.Br.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Or.delete(3),[4,Dc(n)];case 3:return i.sent(),[2]}}))}))}(e.remoteStore,t)})),t.onlineComponents=e,[2]}}))}))}function ll(t){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(Sr("FirestoreClient","Using default OfflineComponentProvider"),[4,cl(t,new el)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}}))}))}function fl(t){return(0,i.mG)(this,void 0,void 0,(function(){return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(Sr("FirestoreClient","Using default OnlineComponentProvider"),[4,hl(t,new il)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}}))}))}function dl(t){return ll(t).then((function(t){return t.persistence}))}function pl(t){return ll(t).then((function(t){return t.localStore}))}function ml(t){return fl(t).then((function(t){return t.remoteStore}))}function vl(t){return fl(t).then((function(t){return t.syncEngine}))}function gl(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return[4,fl(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Eh.bind(null,e.syncEngine),n.onUnlisten=Ah.bind(null,e.syncEngine),n)]}}))}))}function yl(t,e,n){var r=this;void 0===n&&(n={});var o=new ma;return t.asyncQueue.enqueueAndForget((function(){return(0,i.mG)(r,void 0,void 0,(function(){var r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return r=function(t,e,n,r,i){var o=new ol({next:function(o){e.enqueueAndForget((function(){return lh(t,s)}));var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Ir(_r.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Ir(_r.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new mh(Hi(n.path),o,{includeMetadataChanges:!0,so:!0});return hh(t,s)},[4,gl(t)];case 1:return[2,r.apply(void 0,[i.sent(),t.asyncQueue,e,n,o])]}}))}))})),o.promise}function bl(t,e,n){var r=this;void 0===n&&(n={});var o=new ma;return t.asyncQueue.enqueueAndForget((function(){return(0,i.mG)(r,void 0,void 0,(function(){var r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return r=function(t,e,n,r,i){var o=new ol({next:function(n){e.enqueueAndForget((function(){return lh(t,s)})),n.fromCache&&"server"===r.source?i.reject(new Ir(_r.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new mh(n,o,{includeMetadataChanges:!0,so:!0});return hh(t,s)},[4,gl(t)];case 1:return[2,r.apply(void 0,[i.sent(),t.asyncQueue,e,n,o])]}}))}))})),o.promise}var wl=function(t,e,n,r,i,o,s,a){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=o,this.autoDetectLongPolling=s,this.useFetchStreams=a},_l=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Il=new Map,Tl=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},El=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){this.changeListener=e,t.enqueueRetryable((function(){return e(sc.UNAUTHENTICATED)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Sl=function(){function t(t){this.token=t,this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(this.token)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t,e){var n=this;this.changeListener=e,t.enqueueRetryable((function(){return e(n.token.user)}))},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Al=function(){function t(t){var e=this;this.currentUser=sc.UNAUTHENTICATED,this.oc=new ma,this.cc=0,this.forceRefresh=!1,this.auth=null,this.asyncQueue=null,this.uc=function(){e.cc++,e.currentUser=e.ac(),e.oc.resolve(),e.changeListener&&e.asyncQueue.enqueueRetryable((function(){return e.changeListener(e.currentUser)}))};var n=function(t){Sr("FirebaseCredentialsProvider","Auth detected"),e.auth=t,e.auth.addAuthTokenListener(e.uc)};t.onInit((function(t){return n(t)})),setTimeout((function(){if(!e.auth){var r=t.getImmediate({optional:!0});r?n(r):(Sr("FirebaseCredentialsProvider","Auth not yet detected"),e.oc.resolve())}}),0)}return t.prototype.getToken=function(){var t=this,e=this.cc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((function(n){return t.cc!==e?(Sr("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Rr("string"==typeof n.accessToken),new Tl(n.accessToken,t.currentUser)):null})):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t,e){var n=this;this.asyncQueue=t,this.asyncQueue.enqueueRetryable((function(){return(0,i.mG)(n,void 0,void 0,(function(){return(0,i.Jh)(this,(function(t){switch(t.label){case 0:return[4,this.oc.promise];case 1:return t.sent(),[4,e(this.currentUser)];case 2:return t.sent(),this.changeListener=e,[2]}}))}))}))},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.uc),this.changeListener=function(){return Promise.resolve()}},t.prototype.ac=function(){var t=this.auth&&this.auth.getUid();return Rr(null===t||"string"==typeof t),new sc(t)},t}(),kl=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n,this.type="FirstParty",this.user=sc.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.lc},e=this.hc.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),this.fc&&(t["X-Goog-Iam-Authorization-Token"]=this.fc),t},enumerable:!1,configurable:!0}),t}(),Cl=function(){function t(t,e,n){this.hc=t,this.lc=e,this.fc=n}return t.prototype.getToken=function(){return Promise.resolve(new kl(this.hc,this.lc,this.fc))},t.prototype.setChangeListener=function(t,e){t.enqueueRetryable((function(){return e(sc.FIRST_PARTY)}))},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Nl(t,e,n){if(!n)throw new Ir(_r.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function Rl(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Ir(_r.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Ol(t,e,n,r){if(!0===e&&!0===r)throw new Ir(_r.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Dl(t){if(!ii.isDocumentKey(t))throw new Ir(_r.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function xl(t){if(ii.isDocumentKey(t))throw new Ir(_r.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Pl(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Nr()}function Ll(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ir(_r.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Pl(t);throw new Ir(_r.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Ml(t,e){if(e<=0)throw new Ir(_r.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var jl=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Ir(_r.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Ir(_r.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.useFetchStreams=!!t.useFetchStreams,Ol("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams},t}(),Ul=function(){function t(t,e){this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new jl({}),this._settingsFrozen=!1,t instanceof _l?(this._databaseId=t,this._credentials=new El):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ir(_r.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new _l(t.options.projectId)}(t),this._credentials=new Al(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Ir(_r.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Ir(_r.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new jl(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new El;switch(t.type){case"gapi":var e=t.client;return Rr(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Cl(e,t.sessionIndex||"0",t.iamToken||null);case"provider":return t.client;default:throw new Ir(_r.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Il.get(this))&&(Sr("ComponentProvider","Removing Datastore"),Il.delete(this),t.terminate()),Promise.resolve();var t},t}(),Fl=function(){function t(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Bl(this.firestore,this.converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),ql=function(){function t(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Bl=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Hi(r))||this)._path=r,i.type="collection",i}return(0,i.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Fl(this.firestore,null,new ii(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(ql);function Vl(t,e){for(var n,r=[],s=2;s<arguments.length;s++)r[s-2]=arguments[s];if(t=(0,o.m9)(t),Nl("collection","path",e),t instanceof Ul)return xl(n=Gr.fromString.apply(Gr,(0,i.ev)([e],r))),new Bl(t,null,n);if(!(t instanceof Fl||t instanceof Bl))throw new Ir(_r.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return xl(n=Gr.fromString.apply(Gr,(0,i.ev)([t.path],r)).child(Gr.fromString(e))),new Bl(t.firestore,null,n)}function Gl(t,e){for(var n,r=[],s=2;s<arguments.length;s++)r[s-2]=arguments[s];if(t=(0,o.m9)(t),1===arguments.length&&(e=xr.u()),Nl("doc","path",e),t instanceof Ul)return Dl(n=Gr.fromString.apply(Gr,(0,i.ev)([e],r))),new Fl(t,null,new ii(n));if(!(t instanceof Fl||t instanceof Bl))throw new Ir(_r.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Dl(n=t._path.child(Gr.fromString.apply(Gr,(0,i.ev)([e],r)))),new Fl(t.firestore,t instanceof Bl?t.converter:null,new ii(n))}function Hl(t,e){return t=(0,o.m9)(t),e=(0,o.m9)(e),(t instanceof Fl||t instanceof Bl)&&(e instanceof Fl||e instanceof Bl)&&t.firestore===e.firestore&&t.path===e.path&&t.converter===e.converter}function Kl(t,e){return t=(0,o.m9)(t),e=(0,o.m9)(e),t instanceof ql&&e instanceof ql&&t.firestore===e.firestore&&Zi(t._query,e._query)&&t.converter===e.converter}var zl=function(){function t(){var t=this;this.dc=Promise.resolve(),this.wc=[],this._c=!1,this.mc=[],this.yc=null,this.gc=!1,this.Ec=!1,this.Tc=[],this.Zi=new Sc(this,"async_queue_retry"),this.Ic=function(){var e=Tc();e&&Sr("AsyncQueue","Visibility state changed to "+e.visibilityState),t.Zi.Gi()};var e=Tc();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ic)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this._c},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.Ac(),this.Rc(t)},t.prototype.enterRestrictedMode=function(t){if(!this._c){this._c=!0,this.Ec=t||!1;var e=Tc();e&&"function"==typeof e.removeEventListener&&e.removeEventListener("visibilitychange",this.Ic)}},t.prototype.enqueue=function(t){var e=this;if(this.Ac(),this._c)return new Promise((function(){}));var n=new ma;return this.Rc((function(){return e._c&&e.Ec?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)})).then((function(){return n.promise}))},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget((function(){return e.wc.push(t),e.bc()}))},t.prototype.bc=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t,e=this;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:if(0===this.wc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.wc[0]()];case 2:return n.sent(),this.wc.shift(),this.Zi.reset(),[3,4];case 3:if(!_a(t=n.sent()))throw t;return Sr("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.wc.length>0&&this.Zi.ji((function(){return e.bc()})),n.label=5;case 5:return[2]}}))}))},t.prototype.Rc=function(t){var e=this,n=this.dc.then((function(){return e.gc=!0,t().catch((function(t){throw e.yc=t,e.gc=!1,Ar("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t})).then((function(t){return e.gc=!1,t}))}));return this.dc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.Ac(),this.Tc.indexOf(t)>-1&&(e=0);var i=rh.createAndSchedule(this,t,e,n,(function(t){return r.vc(t)}));return this.mc.push(i),i},t.prototype.Ac=function(){this.yc&&Nr()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Pc=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t;return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return[4,t=this.dc];case 1:e.sent(),e.label=2;case 2:if(t!==this.dc)return[3,0];e.label=3;case 3:return[2]}}))}))},t.prototype.Vc=function(t){for(var e=0,n=this.mc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.Sc=function(t){var e=this;return this.Pc().then((function(){e.mc.sort((function(t,e){return t.targetTimeMs-e.targetTimeMs}));for(var n=0,r=e.mc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Pc()}))},t.prototype.Dc=function(t){this.Tc.push(t)},t.prototype.vc=function(t){var e=this.mc.indexOf(t);this.mc.splice(e,1)},t}();function Wl(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new ma,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var Jl=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).type="firestore",r._queue=new zl,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return(0,i.ZT)(e,t),e.prototype._terminate=function(){return this._firestoreClient||Xl(this),this._firestoreClient.terminate()},e}(Ul);function $l(t){return t._firestoreClient||Xl(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function Xl(t){var e,n=t._freezeSettings(),r=function(t,e,n,r){return new wl(t,e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,r.useFetchStreams)}(t._databaseId,(null===(e=t._app)||void 0===e?void 0:e.options.appId)||"",t._persistenceKey,n);t._firestoreClient=new ul(t._credentials,t._queue,r)}function Ql(t,e,n){var r=this,o=new ma;return t.asyncQueue.enqueue((function(){return(0,i.mG)(r,void 0,void 0,(function(){var r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),[4,cl(t,n)];case 1:return i.sent(),[4,hl(t,e)];case 2:return i.sent(),o.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===_r.FAILED_PRECONDITION||t.code===_r.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=i.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),o.reject(r),[3,4];case 4:return[2]}}))}))})).then((function(){return o.promise}))}function Yl(t){if(t._initialized||t._terminated)throw new Ir(_r.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Zl=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Ir(_r.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kr(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),tf=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(Wr.fromBase64String(e))}catch(e){throw new Ir(_r.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(Wr.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),ef=function(t){this._methodName=t},nf=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Ir(_r.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Ir(_r.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Pr(this._lat,t._lat)||Pr(this._long,t._long)},t}(),rf=/^__.*__$/,of=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new Do(t,this.data,this.fieldMask,e,this.fieldTransforms):new Oo(t,this.data,e,this.fieldTransforms)},t}(),sf=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new Do(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function af(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Nr()}}var uf=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.R=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Cc(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Nc",{get:function(){return this.settings.Nc},enumerable:!1,configurable:!0}),t.prototype.xc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.R,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.$c(t),r},t.prototype.Oc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.xc({path:n,Fc:!1});return r.Cc(),r},t.prototype.Mc=function(t){return this.xc({path:void 0,Fc:!0})},t.prototype.Lc=function(t){return Cf(t,this.settings.methodName,this.settings.Bc||!1,this.path,this.settings.qc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find((function(e){return t.isPrefixOf(e)}))||void 0!==this.fieldTransforms.find((function(e){return t.isPrefixOf(e.field)}))},t.prototype.Cc=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.$c(this.path.get(t))},t.prototype.$c=function(t){if(0===t.length)throw this.Lc("Document fields must not be empty");if(af(this.Nc)&&rf.test(t))throw this.Lc('Document fields cannot begin and end with "__"')},t}(),cf=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.R=n||Ec(t)}return t.prototype.Uc=function(t,e,n,r){return void 0===r&&(r=!1),new uf({Nc:t,methodName:e,qc:n,path:Kr.emptyPath(),Fc:!1,Bc:r},this.databaseId,this.R,this.ignoreUndefinedProperties)},t}();function hf(t){var e=t._freezeSettings(),n=Ec(t._databaseId);return new cf(t._databaseId,!!e.ignoreUndefinedProperties,n)}function lf(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Uc(o.merge||o.mergeFields?2:0,e,n,i);Ef("Data must be an object, but it was:",s,r);var a,u,c=If(r,s);if(o.merge)a=new zr(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var h=[],l=0,f=o.mergeFields;l<f.length;l++){var d=Sf(e,f[l],n);if(!s.contains(d))throw new Ir(_r.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Nf(h,d)||h.push(d)}a=new zr(h),u=s.fieldTransforms.filter((function(t){return a.covers(t.field)}))}else a=null,u=s.fieldTransforms;return new of(new bi(c),a,u)}var ff=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Nc)throw 1===t.Nc?t.Lc(this._methodName+"() can only appear at the top level of your update data"):t.Lc(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(ef);function df(t,e,n){return new uf({Nc:3,qc:e.settings.qc,methodName:t._methodName,Fc:n},e.databaseId,e.R,e.ignoreUndefinedProperties)}var pf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype._toFieldTransform=function(t){return new _o(t.path,new fo)},e.prototype.isEqual=function(t){return t instanceof e},e}(ef),mf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,i.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=df(this,t,!0),n=this.Kc.map((function(t){return _f(t,e)})),r=new po(n);return new _o(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ef),vf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Kc=n,r}return(0,i.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=df(this,t,!0),n=this.Kc.map((function(t){return _f(t,e)})),r=new vo(n);return new _o(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(ef),gf=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Qc=n,r}return(0,i.ZT)(e,t),e.prototype._toFieldTransform=function(t){var e=new yo(t.R,ao(t.R,this.Qc));return new _o(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(ef);function yf(t,e,n,r){var i=t.Uc(1,e,n);Ef("Data must be an object, but it was:",i,r);var s=[],a=bi.empty();qr(r,(function(t,r){var u=kf(e,t,n);r=(0,o.m9)(r);var c=i.Oc(u);if(r instanceof ff)s.push(u);else{var h=_f(r,c);null!=h&&(s.push(u),a.set(u,h))}}));var u=new zr(s);return new sf(a,u,i.fieldTransforms)}function bf(t,e,n,r,i,s){var a=t.Uc(1,e,n),u=[Sf(e,r,n)],c=[i];if(s.length%2!=0)throw new Ir(_r.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var h=0;h<s.length;h+=2)u.push(Sf(e,s[h])),c.push(s[h+1]);for(var l=[],f=bi.empty(),d=u.length-1;d>=0;--d)if(!Nf(l,u[d])){var p=u[d],m=c[d];m=(0,o.m9)(m);var v=a.Oc(p);if(m instanceof ff)l.push(p);else{var g=_f(m,v);null!=g&&(l.push(p),f.set(p,g))}}var y=new zr(l);return new sf(f,y,a.fieldTransforms)}function wf(t,e,n,r){return void 0===r&&(r=!1),_f(n,t.Uc(r?4:3,e))}function _f(t,e){if(Tf(t=(0,o.m9)(t)))return Ef("Unsupported field value:",e,t),If(t,e);if(t instanceof ef)return function(t,e){if(!af(e.Nc))throw e.Lc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Lc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Fc&&4!==e.Nc)throw e.Lc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=_f(o[i],e.Mc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(null===(t=(0,o.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return ao(e.R,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=jr.fromDate(t);return{timestampValue:vs(e.R,n)}}if(t instanceof jr)return n=new jr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:vs(e.R,n)};if(t instanceof nf)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof tf)return{bytesValue:gs(e.R,t._byteString)};if(t instanceof Fl){n=e.databaseId;var r=t.firestore._databaseId;if(!r.isEqual(n))throw e.Lc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:ws(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Lc("Unsupported field value: "+Pl(t))}(t,e)}function If(t,e){var n={};return Br(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):qr(t,(function(t,r){var i=_f(r,e.kc(t));null!=i&&(n[t]=i)})),{mapValue:{fields:n}}}function Tf(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof jr||t instanceof nf||t instanceof tf||t instanceof Fl||t instanceof ef)}function Ef(t,e,n){if(!Tf(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Pl(n);throw"an object"===r?e.Lc(t+" a custom object"):e.Lc(t+" "+r)}}function Sf(t,e,n){if((e=(0,o.m9)(e))instanceof Zl)return e._internalPath;if("string"==typeof e)return kf(t,e);throw Cf("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var Af=new RegExp("[~\\*/\\[\\]]");function kf(t,e,n){if(e.search(Af)>=0)throw Cf("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(Zl.bind.apply(Zl,(0,i.ev)([void 0],e.split(".")))))._internalPath}catch(r){throw Cf("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Cf(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Ir(_r.INVALID_ARGUMENT,(a+=". ")+t+u)}function Nf(t,e){return t.some((function(t){return t.isEqual(e)}))}var Rf=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Fl(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new Of(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}},t.prototype.get=function(t){if(this._document){var e=this._document.data.field(Df("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),Of=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(Rf);function Df(t,e){return"string"==typeof e?kf(t,e):e instanceof Zl?e._internalPath:e._delegate._internalPath}var xf=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Pf=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return(0,i.ZT)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Lf(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data.field(Df("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(Rf),Lf=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Pf),Mf=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new xf(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach((function(e){return t.push(e)})),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach((function(r){t.call(e,new Lf(n._firestore,n._userDataWriter,r.key,r,new xf(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query.converter))}))},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Ir(_r.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map((function(e){return{type:"added",doc:new Lf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new xf(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),oldIndex:-1,newIndex:n++}}))}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter((function(t){return e||3!==t.type})).map((function(e){var n=new Lf(t._firestore,t._userDataWriter,e.doc.key,e.doc,new xf(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query.converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:jf(e.type),doc:n,oldIndex:i,newIndex:o}}))}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function jf(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Nr()}}function Uf(t,e){return t instanceof Pf&&e instanceof Pf?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Mf&&e instanceof Mf&&t._firestore===e._firestore&&Kl(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Ff(t){if(zi(t)&&0===t.explicitOrderBy.length)throw new Ir(_r.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var qf=function(){};function Bf(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Vf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).jc=e,i.Wc=n,i.Gc=r,i.type="where",i}return(0,i.ZT)(e,t),e.prototype._apply=function(t){var e=hf(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Ir(_r.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){$f(s,o);for(var u=[],c=0,h=s;c<h.length;c++){var l=h[c];u.push(Jf(r,t,l))}a={arrayValue:{values:u}}}else a=Jf(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||$f(s,o),a=wf(n,"where",s,"in"===o||"not-in"===o);var f=ki.create(i,o,a);return function(t,e){if(e.g()){var n=Ji(t);if(null!==n&&!n.isEqual(e.field))throw new Ir(_r.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Wi(t);null!==r&&Xf(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw i===e.op?new Ir(_r.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Ir(_r.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,f),f}(t._query,0,e,t.firestore._databaseId,this.jc,this.Wc,this.Gc);return new ql(t.firestore,t.converter,function(t,e){var n=t.filters.concat([e]);return new Vi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(qf),Gf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).jc=e,r.zc=n,r.type="orderBy",r}return(0,i.ZT)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Ir(_r.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Ir(_r.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Ui(e,n);return function(t,e){if(null===Wi(t)){var n=Ji(t);null!==n&&Xf(0,n,e.field)}}(t,r),r}(t._query,this.jc,this.zc);return new ql(t.firestore,t.converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Vi(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(qf),Hf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Hc=n,i.Jc=r,i}return(0,i.ZT)(e,t),e.prototype._apply=function(t){return new ql(t.firestore,t.converter,Yi(t._query,this.Hc,this.Jc))},e}(qf),Kf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return(0,i.ZT)(e,t),e.prototype._apply=function(t){var e=Wf(t,this.type,this.Yc,this.Xc);return new ql(t.firestore,t.converter,function(t,e){return new Vi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(qf),zf=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Yc=n,i.Xc=r,i}return(0,i.ZT)(e,t),e.prototype._apply=function(t){var e=Wf(t,this.type,this.Yc,this.Xc);return new ql(t.firestore,t.converter,function(t,e){return new Vi(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(qf);function Wf(t,e,n,r){if(n[0]=(0,o.m9)(n[0]),n[0]instanceof Rf)return function(t,e,n,r,i){if(!r)throw new Ir(_r.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=Xi(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(fi(e,r.key));else{var c=r.data.field(u.field);if(Yr(c))throw new Ir(_r.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var h=u.field.canonicalString();throw new Ir(_r.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+h+"' (used as the orderBy) does not exist.")}o.push(c)}}return new Mi(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=hf(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Ir(_r.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Ir(_r.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!$i(t)&&-1!==c.indexOf("/"))throw new Ir(_r.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(Gr.fromString(c));if(!ii.isDocumentKey(h))throw new Ir(_r.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");var l=new ii(h);a.push(fi(e,l))}else{var f=wf(n,r,c);a.push(f)}}return new Mi(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function Jf(t,e,n){if("string"==typeof(n=(0,o.m9)(n))){if(""===n)throw new Ir(_r.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!$i(e)&&-1!==n.indexOf("/"))throw new Ir(_r.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Gr.fromString(n));if(!ii.isDocumentKey(r))throw new Ir(_r.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return fi(t,new ii(r))}if(n instanceof Fl)return fi(t,n._key);throw new Ir(_r.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Pl(n)+".")}function $f(t,e){if(!Array.isArray(t)||0===t.length)throw new Ir(_r.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Ir(_r.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function Xf(t,e,n){if(!n.isEqual(e))throw new Ir(_r.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var Qf=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),oi(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Xr(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Qr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Nr()}},t.prototype.convertObject=function(t,e){var n=this,r={};return qr(t.fields,(function(t,i){r[t]=n.convertValue(i,e)})),r},t.prototype.convertGeoPoint=function(t){return new nf(Xr(t.latitude),Xr(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map((function(t){return n.convertValue(t,e)}))},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=Zr(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(ti(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=$r(t);return new jr(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Gr.fromString(t);Rr(Ks(n));var r=new _l(n.get(1),n.get(3)),i=new ii(n.popFirst(5));return r.isEqual(e)||Ar("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function Yf(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var Zf=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,i.ZT)(e,t),e.prototype.convertBytes=function(t){return new tf(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Fl(this.firestore,null,e)},e}(Qf),td=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=hf(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=ed(t,this._firestore),i=Yf(r.converter,e,n),o=lf(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(o.toMutation(r._key,To.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var s,a=ed(t,this._firestore);return s="string"==typeof(e=(0,o.m9)(e))||e instanceof Zl?bf(this._dataReader,"WriteBatch.update",a._key,e,n,r):yf(this._dataReader,"WriteBatch.update",a._key,e),this._mutations.push(s.toMutation(a._key,To.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=ed(t,this._firestore);return this._mutations=this._mutations.concat(new Uo(e._key,To.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Ir(_r.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function ed(t,e){if((t=(0,o.m9)(t)).firestore!==e)throw new Ir(_r.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var nd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,i.ZT)(e,t),e.prototype.convertBytes=function(t){return new tf(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Fl(this.firestore,null,e)},e}(Qf);function rd(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Ll(t,Fl);var s=Ll(t.firestore,Jl),a=hf(s);return od(s,[("string"==typeof(e=(0,o.m9)(e))||e instanceof Zl?bf(a,"updateDoc",t._key,e,n,r):yf(a,"updateDoc",t._key,e)).toMutation(t._key,To.exists(!0))])}function id(t){for(var e,n,r,s=[],a=1;a<arguments.length;a++)s[a-1]=arguments[a];t=(0,o.m9)(t);var u={includeMetadataChanges:!1},c=0;"object"!=typeof s[c]||Wl(s[c])||(u=s[c],c++);var h,l,f,d={includeMetadataChanges:u.includeMetadataChanges};if(Wl(s[c])){var p=s[c];s[c]=null===(e=p.next)||void 0===e?void 0:e.bind(p),s[c+1]=null===(n=p.error)||void 0===n?void 0:n.bind(p),s[c+2]=null===(r=p.complete)||void 0===r?void 0:r.bind(p)}if(t instanceof Fl)l=Ll(t.firestore,Jl),f=Hi(t._key.path),h={next:function(e){s[c]&&s[c](sd(l,t,e))},error:s[c+1],complete:s[c+2]};else{var m=Ll(t,ql);l=Ll(m.firestore,Jl),f=m._query;var v=new nd(l);h={next:function(t){s[c]&&s[c](new Mf(l,v,m,t))},error:s[c+1],complete:s[c+2]},Ff(t._query)}return function(t,e,n,r){var o=this,s=new ol(r),a=new mh(e,s,n);return t.asyncQueue.enqueueAndForget((function(){return(0,i.mG)(o,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return e=hh,[4,gl(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))})),function(){s.Wo(),t.asyncQueue.enqueueAndForget((function(){return(0,i.mG)(o,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return e=lh,[4,gl(t)];case 1:return[2,e.apply(void 0,[n.sent(),a])]}}))}))}))}}($l(l),f,d,h)}function od(t,e){return function(t,e){var n=this,r=new ma;return t.asyncQueue.enqueueAndForget((function(){return(0,i.mG)(n,void 0,void 0,(function(){var n;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return n=kh,[4,vl(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}}))}))})),r.promise}($l(t),e)}function sd(t,e,n){var r=n.docs.get(e._key),i=new nd(t);return new Pf(t,i,e._key,r,new xf(n.hasPendingWrites,n.fromCache),e.converter)}var ad=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return(0,i.ZT)(e,t),e.prototype.get=function(e){var n=this,r=ed(e,this._firestore),i=new nd(this._firestore);return t.prototype.get.call(this,e).then((function(t){return new Pf(n._firestore,i,r._key,t._document,new xf(!1,!1),r.converter)}))},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=hf(t)}return t.prototype.get=function(t){var e=this,n=ed(t,this._firestore),r=new Zf(this._firestore);return this._transaction.lookup([n._key]).then((function(t){if(!t||1!==t.length)return Nr();var i=t[0];if(i.isFoundDocument())return new Rf(e._firestore,r,i.key,i,n.converter);if(i.isNoDocument())return new Rf(e._firestore,r,n._key,null,n.converter);throw Nr()}))},t.prototype.set=function(t,e,n){var r=ed(t,this._firestore),i=Yf(r.converter,e,n),o=lf(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var s,a=ed(t,this._firestore);return s="string"==typeof(e=(0,o.m9)(e))||e instanceof Zl?bf(this._dataReader,"Transaction.update",a._key,e,n,r):yf(this._dataReader,"Transaction.update",a._key,e),this._transaction.update(a._key,s),this},t.prototype.delete=function(t){var e=ed(t,this._firestore);return this._transaction.delete(e._key),this},t}());function ud(){if("undefined"==typeof Uint8Array)throw new Ir(_r.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function cd(){if("undefined"==typeof atob)throw new Ir(_r.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var hd=function(){function t(t){this._delegate=t}return t.fromBase64String=function(e){return cd(),new t(tf.fromBase64String(e))},t.fromUint8Array=function(e){return ud(),new t(tf.fromUint8Array(e))},t.prototype.toBase64=function(){return cd(),this._delegate.toBase64()},t.prototype.toUint8Array=function(){return ud(),this._delegate.toUint8Array()},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},t}(),ld=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){Yl(t=Ll(t,Jl));var n=$l(t),r=t._freezeSettings(),i=new il;return Ql(n,i,new nl(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){Yl(t=Ll(t,Jl));var e=$l(t),n=t._freezeSettings(),r=new il;return Ql(e,r,new rl(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Ir(_r.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new ma;return t._queue.enqueueAndForgetEvenWhileRestricted((function(){return(0,i.mG)(e,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return(0,i.mG)(this,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return ya.yt()?(e=t+"main",[4,ya.delete(e)]):[2,Promise.resolve()];case 1:return n.sent(),[2]}}))}))}(Nu(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}}))}))})),n.promise}(t._delegate)},t}(),fd=function(){function t(t,e,n){var r=this;this._delegate=e,this.Zc=n,this.INTERNAL={delete:function(){return r.terminate()}},t instanceof _l||(this.tu=t)}return Object.defineProperty(t.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),t.prototype.settings=function(t){var e=this._delegate._getSettings();t.merge||e.host===t.host||kr("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&delete(t=Object.assign(Object.assign({},e),t)).merge,this._delegate._setSettings(t)},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){var i;void 0===r&&(r={});var s=(t=Ll(t,Ul))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&kr("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},s),{host:e+":"+n,ssl:!1})),r.mockUserToken){var a,u;if("string"==typeof r.mockUserToken)a=r.mockUserToken,u=sc.MOCK_USER;else{a=(0,o.Sg)(r.mockUserToken,null===(i=t._app)||void 0===i?void 0:i.options.projectId);var c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new Ir(_r.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new sc(c)}t._credentials=new Sl(new Tl(a,u))}}(this._delegate,t,e,n)},t.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return(0,i.mG)(e,void 0,void 0,(function(){var e,n;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return[4,dl(t)];case 1:return e=r.sent(),[4,ml(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Or(t);return e.Or.delete(0),Dc(e)}(n))]}}))}))}))}($l(Ll(this._delegate,Jl)))},t.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue((function(){return(0,i.mG)(e,void 0,void 0,(function(){var e,n;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return[4,dl(t)];case 1:return e=r.sent(),[4,ml(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return(0,i.mG)(this,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return(e=Or(t)).Or.add(0),[4,xc(e)];case 1:return n.sent(),e.Br.set("Offline"),[2]}}))}))}(n))]}}))}))}))}($l(Ll(this._delegate,Jl)))},t.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Ol("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Zc.enableMultiTabIndexedDbPersistence(this):this.Zc.enableIndexedDbPersistence(this,n)},t.prototype.clearPersistence=function(){return this.Zc.clearIndexedDbPersistence(this)},t.prototype.terminate=function(){return this.tu&&(this.tu._removeServiceInstance("firestore"),this.tu._removeServiceInstance("firestore-exp")),this._delegate._delete()},t.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new ma;return t.asyncQueue.enqueueAndForget((function(){return(0,i.mG)(e,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return e=xh,[4,vl(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}}))}))})),n.promise}($l(Ll(this._delegate,Jl)))},t.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new ol(e);return t.asyncQueue.enqueueAndForget((function(){return(0,i.mG)(n,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return e=function(t,e){Or(t).Gr.add(e),e.next()},[4,gl(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))})),function(){r.Wo(),t.asyncQueue.enqueueAndForget((function(){return(0,i.mG)(n,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return e=function(t,e){Or(t).Gr.delete(e)},[4,gl(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}}))}))}))}}($l(t=Ll(t,Jl)),Wl(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(t.prototype,"app",{get:function(){if(!this.tu)throw new Ir(_r.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.tu},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Ad(this,Vl(this._delegate,t))}catch(t){throw yd(t,"collection()","Firestore.collection()")}},t.prototype.doc=function(t){try{return new gd(this,Gl(this._delegate,t))}catch(t){throw yd(t,"doc()","Firestore.doc()")}},t.prototype.collectionGroup=function(t){try{return new Td(this,function(t,e){if(t=Ll(t,Ul),Nl("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Ir(_r.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new ql(t,null,function(t){return new Vi(Gr.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw yd(t,"collectionGroup()","Firestore.collectionGroup()")}},t.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new ma;return t.asyncQueue.enqueueAndForget((function(){return(0,i.mG)(n,void 0,void 0,(function(){var n;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,function(t){return fl(t).then((function(t){return t.datastore}))}(t)];case 1:return n=i.sent(),new al(t.asyncQueue,n,e,r).run(),[2]}}))}))})),r.promise}($l(t),(function(n){return e(new ad(t,n))}))}(this._delegate,(function(n){return t(new pd(e,n))}))},t.prototype.batch=function(){var t=this;return $l(this._delegate),new md(new td(this._delegate,(function(e){return od(t._delegate,e)})))},t.prototype.loadBundle=function(t){throw new Ir(_r.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},t.prototype.namedQuery=function(t){throw new Ir(_r.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},t}(),dd=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return(0,i.ZT)(e,t),e.prototype.convertBytes=function(t){return new hd(new tf(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return gd.eu(e,this.firestore,null)},e}(Qf),pd=function(){function t(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new dd(t)}return t.prototype.get=function(t){var e=this,n=kd(t);return this._delegate.get(n).then((function(t){return new _d(e._firestore,new Pf(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n.converter))}))},t.prototype.set=function(t,e,n){var r=kd(t);return n?(Rl("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var a=kd(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,(0,i.ev)([a,e,n],o)),this},t.prototype.delete=function(t){var e=kd(t);return this._delegate.delete(e),this},t}(),md=function(){function t(t){this._delegate=t}return t.prototype.set=function(t,e,n){var r=kd(t);return n?(Rl("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},t.prototype.update=function(t,e,n){for(var r,o=[],s=3;s<arguments.length;s++)o[s-3]=arguments[s];var a=kd(t);return 2===arguments.length?this._delegate.update(a,e):(r=this._delegate).update.apply(r,(0,i.ev)([a,e,n],o)),this},t.prototype.delete=function(t){var e=kd(t);return this._delegate.delete(e),this},t.prototype.commit=function(){return this._delegate.commit()},t}(),vd=function(){function t(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}return t.prototype.fromFirestore=function(t,e){var n=new Lf(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Id(this._firestore,n),null!=e?e:{})},t.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},t.nu=function(e,n){var r=t.su,i=r.get(e);i||(i=new WeakMap,r.set(e,i));var o=i.get(n);return o||(o=new t(e,new dd(e),n),i.set(n,o)),o},t}();vd.su=new WeakMap;var gd=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new dd(t)}return t.iu=function(e,n,r){if(e.length%2!=0)throw new Ir(_r.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+e.canonicalString()+" has "+e.length);return new t(n,new Fl(n._delegate,r,new ii(e)))},t.eu=function(e,n,r){return new t(n,new Fl(n._delegate,r,e))},Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Ad(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),t.prototype.collection=function(t){try{return new Ad(this.firestore,Vl(this._delegate,t))}catch(t){throw yd(t,"collection()","DocumentReference.collection()")}},t.prototype.isEqual=function(t){return(t=(0,o.m9)(t))instanceof Fl&&Hl(this._delegate,t)},t.prototype.set=function(t,e){e=Rl("DocumentReference.set",e);try{return function(t,e,n){t=Ll(t,Fl);var r=Ll(t.firestore,Jl),i=Yf(t.converter,e,n);return od(r,[lf(hf(r),"setDoc",t._key,i,null!==t.converter,n).toMutation(t._key,To.none())])}(this._delegate,t,e)}catch(t){throw yd(t,"setDoc()","DocumentReference.set()")}},t.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?rd(this._delegate,t):rd.apply(void 0,(0,i.ev)([this._delegate,t,e],n))}catch(t){throw yd(t,"updateDoc()","DocumentReference.update()")}},t.prototype.delete=function(){return od(Ll((t=this._delegate).firestore,Jl),[new Uo(t._key,To.none())]);var t},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=bd(e),i=wd(e,(function(e){return new _d(t.firestore,new Pf(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate.converter))}));return id(this._delegate,r,i)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Ll(t,Fl);var e=Ll(t.firestore,Jl),n=$l(e),r=new nd(e);return function(t,e){var n=this,r=new ma;return t.asyncQueue.enqueueAndForget((function(){return(0,i.mG)(n,void 0,void 0,(function(){var n;return(0,i.Jh)(this,(function(o){switch(o.label){case 0:return n=function(t,e,n){return(0,i.mG)(this,void 0,void 0,(function(){var r,o;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,function(t,e){var n=Or(t);return n.persistence.runTransaction("read document","readonly",(function(t){return n.Mn.mn(t,e)}))}(t,e)];case 1:return(o=i.sent()).isFoundDocument()?n.resolve(o):o.isNoDocument()?n.resolve(null):n.reject(new Ir(_r.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=i.sent(),o=ih(r,"Failed to get document '"+e+" from cache"),n.reject(o),[3,3];case 3:return[2]}}))}))},[4,pl(t)];case 1:return[2,n.apply(void 0,[o.sent(),e,r])]}}))}))})),r.promise}(n,t._key).then((function(n){return new Pf(e,r,t._key,n,new xf(null!==n&&n.hasLocalMutations,!0),t.converter)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Ll(t,Fl);var e=Ll(t.firestore,Jl);return yl($l(e),t._key,{source:"server"}).then((function(n){return sd(e,t,n)}))}(this._delegate):function(t){t=Ll(t,Fl);var e=Ll(t.firestore,Jl);return yl($l(e),t._key).then((function(n){return sd(e,t,n)}))}(this._delegate)).then((function(t){return new _d(e.firestore,new Pf(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate.converter))}))},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(vd.nu(this.firestore,e)):this._delegate.withConverter(null))},t}();function yd(t,e,n){return t.message=t.message.replace(e,n),t}function bd(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!Wl(r))return r}return{}}function wd(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=Wl(t[0])?t[0]:Wl(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var _d=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"ref",{get:function(){return new gd(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),t.prototype.data=function(t){return this._delegate.data(t)},t.prototype.get=function(t,e){return this._delegate.get(t,e)},t.prototype.isEqual=function(t){return Uf(this._delegate,t._delegate)},t}(),Id=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return(0,i.ZT)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(_d),Td=function(){function t(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new dd(t)}return t.prototype.where=function(e,n,r){try{return new t(this.firestore,Bf(this._delegate,function(t,e,n){var r=e,i=Df("where",t);return new Vf(i,r,n)}(e,n,r)))}catch(e){throw yd(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.orderBy=function(e,n){try{return new t(this.firestore,Bf(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Df("orderBy",t);return new Gf(r,n)}(e,n)))}catch(e){throw yd(e,/(orderBy|where)\(\)/,"Query.$1()")}},t.prototype.limit=function(e){try{return new t(this.firestore,Bf(this._delegate,function(t){return Ml("limit",t),new Hf("limit",t,"F")}(e)))}catch(e){throw yd(e,"limit()","Query.limit()")}},t.prototype.limitToLast=function(e){try{return new t(this.firestore,Bf(this._delegate,function(t){return Ml("limitToLast",t),new Hf("limitToLast",t,"L")}(e)))}catch(e){throw yd(e,"limitToLast()","Query.limitToLast()")}},t.prototype.startAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Bf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Kf("startAt",t,!0)}.apply(void 0,e)))}catch(e){throw yd(e,"startAt()","Query.startAt()")}},t.prototype.startAfter=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Bf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Kf("startAfter",t,!1)}.apply(void 0,e)))}catch(e){throw yd(e,"startAfter()","Query.startAfter()")}},t.prototype.endBefore=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Bf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new zf("endBefore",t,!0)}.apply(void 0,e)))}catch(e){throw yd(e,"endBefore()","Query.endBefore()")}},t.prototype.endAt=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];try{return new t(this.firestore,Bf(this._delegate,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new zf("endAt",t,!1)}.apply(void 0,e)))}catch(e){throw yd(e,"endAt()","Query.endAt()")}},t.prototype.isEqual=function(t){return Kl(this._delegate,t._delegate)},t.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Ll(t,ql);var e=Ll(t.firestore,Jl),n=$l(e),r=new nd(e);return function(t,e){var n=this,r=new ma;return t.asyncQueue.enqueueAndForget((function(){return(0,i.mG)(n,void 0,void 0,(function(){var n;return(0,i.Jh)(this,(function(o){switch(o.label){case 0:return n=function(t,e,n){return(0,i.mG)(this,void 0,void 0,(function(){var r,o,s,a,u;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,Hu(t,e,!0)];case 1:return u=i.sent(),r=new wh(e,u.Bn),o=r._o(u.documents),s=r.applyChanges(o,!1),n.resolve(s.snapshot),[3,3];case 2:return a=i.sent(),u=ih(a,"Failed to execute query '"+e+" against cache"),n.reject(u),[3,3];case 3:return[2]}}))}))},[4,pl(t)];case 1:return[2,n.apply(void 0,[o.sent(),e,r])]}}))}))})),r.promise}(n,t._query).then((function(n){return new Mf(e,r,t,n)}))}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Ll(t,ql);var e=Ll(t.firestore,Jl),n=$l(e),r=new nd(e);return bl(n,t._query,{source:"server"}).then((function(n){return new Mf(e,r,t,n)}))}(this._delegate):function(t){t=Ll(t,ql);var e=Ll(t.firestore,Jl),n=$l(e),r=new nd(e);return Ff(t._query),bl(n,t._query).then((function(n){return new Mf(e,r,t,n)}))}(this._delegate)).then((function(t){return new Sd(e.firestore,new Mf(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))}))},t.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=bd(e),i=wd(e,(function(e){return new Sd(t.firestore,new Mf(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))}));return id(this._delegate,r,i)},t.prototype.withConverter=function(e){return new t(this.firestore,e?this._delegate.withConverter(vd.nu(this.firestore,e)):this._delegate.withConverter(null))},t}(),Ed=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"doc",{get:function(){return new Id(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),t}(),Sd=function(){function t(t,e){this._firestore=t,this._delegate=e}return Object.defineProperty(t.prototype,"query",{get:function(){return new Td(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map((function(e){return new Id(t._firestore,e)}))},enumerable:!1,configurable:!0}),t.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map((function(t){return new Ed(e._firestore,t)}))},t.prototype.forEach=function(t,e){var n=this;this._delegate.forEach((function(r){t.call(e,new Id(n._firestore,r))}))},t.prototype.isEqual=function(t){return Uf(this._delegate,t._delegate)},t}(),Ad=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return(0,i.ZT)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new gd(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new gd(this.firestore,void 0===t?Gl(this._delegate):Gl(this._delegate,t))}catch(t){throw yd(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Ll(t.firestore,Jl),r=Gl(t),i=Yf(t.converter,e);return od(n,[lf(hf(t.firestore),"addDoc",r._key,i,null!==t.converter,{}).toMutation(r._key,To.exists(!1))]).then((function(){return r}))}(this._delegate,t).then((function(t){return new gd(e.firestore,t)}))},e.prototype.isEqual=function(t){return Hl(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,t?this._delegate.withConverter(vd.nu(this.firestore,t)):this._delegate.withConverter(null))},e}(Td);function kd(t){return Ll(t,Fl)}var Cd,Nd=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._delegate=new(Zl.bind.apply(Zl,(0,i.ev)([void 0],t)))}return t.documentId=function(){return new t(Kr.keyField().canonicalString())},t.prototype.isEqual=function(t){return(t=(0,o.m9)(t))instanceof Zl&&this._delegate._internalPath.isEqual(t._internalPath)},t}(),Rd=function(){function t(t){this._delegate=t}return t.serverTimestamp=function(){var e=new pf("serverTimestamp");return e._methodName="FieldValue.serverTimestamp",new t(e)},t.delete=function(){var e=new ff("deleteField");return e._methodName="FieldValue.delete",new t(e)},t.arrayUnion=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new mf("arrayUnion",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayUnion",new t(r)},t.arrayRemove=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new vf("arrayRemove",t)}.apply(void 0,e);return r._methodName="FieldValue.arrayRemove",new t(r)},t.increment=function(e){var n=function(t){return new gf("increment",t)}(e);return n._methodName="FieldValue.increment",new t(n)},t.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},t}(),Od=n(909),Dd={Firestore:fd,GeoPoint:nf,Timestamp:jr,Blob:hd,Transaction:pd,WriteBatch:md,DocumentReference:gd,DocumentSnapshot:_d,Query:Td,QueryDocumentSnapshot:Id,QuerySnapshot:Sd,CollectionReference:Ad,FieldPath:Nd,FieldValue:Rd,setLogLevel:function(t){var e;e=t,Tr.setLogLevel(e)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Od.wA("firestore",(function(t){return function(t,e){return new fd(t,new Jl(t,e),new ld)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))}),"PUBLIC").setServiceProps(Object.assign({},Dd)))})(Cd=r.Z),Cd.registerVersion("@firebase/firestore","2.4.0")},332:(t,e,n)=>{"use strict";n.r(e);var r=n(6099),i=n(655),o=n(4589),s=n(909),a="firebasestorage.googleapis.com",u=function(t){function e(n,r){var i=t.call(this,c(n),"Firebase Storage: "+r+" ("+c(n)+")")||this;return i.customData={serverResponse:null},i._baseMessage=i.message,Object.setPrototypeOf(i,e.prototype),i}return(0,i.ZT)(e,t),e.prototype._codeEquals=function(t){return c(t)===this.code},Object.defineProperty(e.prototype,"serverResponse",{get:function(){return this.customData.serverResponse},set:function(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=this._baseMessage+"\n"+this.customData.serverResponse:this.message=this._baseMessage},enumerable:!1,configurable:!0}),e}(o.ZR);function c(t){return"storage/"+t}function h(){return new u("unknown","An unknown error occurred, please check the error payload for server response.")}function l(){return new u("canceled","User canceled the upload/download.")}function f(){return new u("cannot-slice-blob","Cannot slice blob for upload. Please retry the upload.")}function d(t){return new u("invalid-argument",t)}function p(){return new u("app-deleted","The Firebase app was deleted.")}function m(t){return new u("invalid-root-operation","The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function v(t,e){return new u("invalid-format","String does not match format '"+t+"': "+e)}function g(t){throw new u("internal-error","Internal error: "+t)}var y={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"},b=function(t,e){this.data=t,this.contentType=e||null};function w(t,e){switch(t){case y.RAW:return new b(_(e));case y.BASE64:case y.BASE64URL:return new b(I(t,e));case y.DATA_URL:return new b((n=new E(e)).base64?I(y.BASE64,n.rest):function(t){var e;try{e=decodeURIComponent(t)}catch(t){throw v(y.DATA_URL,"Malformed data URL.")}return _(e)}(n.rest),new E(e).contentType)}var n;throw h()}function _(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?n<t.length-1&&56320==(64512&t.charCodeAt(n+1))?(r=65536|(1023&r)<<10|1023&t.charCodeAt(++n),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function I(t,e){switch(t){case y.BASE64:var n=-1!==e.indexOf("-"),r=-1!==e.indexOf("_");if(n||r)throw v(t,"Invalid character '"+(n?"-":"_")+"' found: is it base64url encoded?");break;case y.BASE64URL:var i=-1!==e.indexOf("+"),o=-1!==e.indexOf("/");if(i||o)throw v(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/")}var s;try{s=atob(e)}catch(e){throw v(t,"Invalid character found")}for(var a=new Uint8Array(s.length),u=0;u<s.length;u++)a[u]=s.charCodeAt(u);return a}var T,E=function(t){this.base64=!1,this.contentType=null;var e=t.match(/^data:([^,]+)?,/);if(null===e)throw v(y.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");var n,r,i=e[1]||null;null!=i&&(this.base64=(r=";base64",(n=i).length>=r.length&&n.substring(n.length-r.length)===r),this.contentType=this.base64?i.substring(0,i.length-";base64".length):i),this.rest=t.substring(t.indexOf(",")+1)},S={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function A(t){switch(t){case"running":case"pausing":case"canceling":return S.RUNNING;case"paused":return S.PAUSED;case"success":return S.SUCCESS;case"canceled":return S.CANCELED;case"error":default:return S.ERROR}}!function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"}(T||(T={}));var k=function(){function t(){var t=this;this.sent_=!1,this.xhr_=new XMLHttpRequest,this.errorCode_=T.NO_ERROR,this.sendPromise_=new Promise((function(e){t.xhr_.addEventListener("abort",(function(){t.errorCode_=T.ABORT,e()})),t.xhr_.addEventListener("error",(function(){t.errorCode_=T.NETWORK_ERROR,e()})),t.xhr_.addEventListener("load",(function(){e()}))}))}return t.prototype.send=function(t,e,n,r){if(this.sent_)throw g("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(e,t,!0),void 0!==r)for(var i in r)r.hasOwnProperty(i)&&this.xhr_.setRequestHeader(i,r[i].toString());return void 0!==n?this.xhr_.send(n):this.xhr_.send(),this.sendPromise_},t.prototype.getErrorCode=function(){if(!this.sent_)throw g("cannot .getErrorCode() before sending");return this.errorCode_},t.prototype.getStatus=function(){if(!this.sent_)throw g("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}},t.prototype.getResponseText=function(){if(!this.sent_)throw g("cannot .getResponseText() before sending");return this.xhr_.responseText},t.prototype.abort=function(){this.xhr_.abort()},t.prototype.getResponseHeader=function(t){return this.xhr_.getResponseHeader(t)},t.prototype.addUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",t)},t.prototype.removeUploadProgressListener=function(t){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",t)},t}(),C=function(){function t(){}return t.prototype.createConnection=function(){return new k},t}(),N=function(){function t(t,e){this.bucket=t,this.path_=e}return Object.defineProperty(t.prototype,"path",{get:function(){return this.path_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRoot",{get:function(){return 0===this.path.length},enumerable:!1,configurable:!0}),t.prototype.fullServerUrl=function(){var t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)},t.prototype.bucketOnlyServerUrl=function(){return"/b/"+encodeURIComponent(this.bucket)+"/o"},t.makeFromBucketSpec=function(e,n){var r;try{r=t.makeFromUrl(e,n)}catch(n){return new t(e,"")}if(""===r.path)return r;throw new u("invalid-default-bucket","Invalid default bucket '"+e+"'.")},t.makeFromUrl=function(e,n){var r=null,i="([A-Za-z0-9.\\-_]+)",o=new RegExp("^gs://"+i+"(/(.*))?$","i");function s(t){t.path_=decodeURIComponent(t.path)}for(var c=n.replace(/[.]/g,"\\."),h=[{regex:o,indices:{bucket:1,path:3},postModify:function(t){"/"===t.path.charAt(t.path.length-1)&&(t.path_=t.path_.slice(0,-1))}},{regex:new RegExp("^https?://"+c+"/v[A-Za-z0-9_]+/b/"+i+"/o(/([^?#]*).*)?$","i"),indices:{bucket:1,path:3},postModify:s},{regex:new RegExp("^https?://"+(n===a?"(?:storage.googleapis.com|storage.cloud.google.com)":n)+"/"+i+"/([^?#]*)","i"),indices:{bucket:1,path:2},postModify:s}],l=0;l<h.length;l++){var f=h[l],d=f.regex.exec(e);if(d){var p=d[f.indices.bucket],m=d[f.indices.path];m||(m=""),r=new t(p,m),f.postModify(r);break}}if(null==r)throw function(t){return new u("invalid-url","Invalid URL '"+t+"'.")}(e);return r},t}(),R=function(){function t(t){this.promise_=Promise.reject(t)}return t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){},t}();function O(t){return"string"==typeof t||t instanceof String}function D(t){return x()&&t instanceof Blob}function x(){return"undefined"!=typeof Blob}function P(t,e,n,r){if(r<e)throw d("Invalid value for '"+t+"'. Expected "+e+" or greater.");if(r>n)throw d("Invalid value for '"+t+"'. Expected "+n+" or less.")}function L(t,e){var n=e.match(/^(\w+):\/\/.+/),r=e;return null==(null==n?void 0:n[1])&&(r="https://"+e),r+"/v0"+t}function M(t){var e=encodeURIComponent,n="?";for(var r in t)t.hasOwnProperty(r)&&(n=n+(e(r)+"=")+e(t[r])+"&");return n.slice(0,-1)}var j=function(){function t(t,e,n,r,i,o,s,a,u,c,h){var l=this;this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.url_=t,this.method_=e,this.headers_=n,this.body_=r,this.successCodes_=i.slice(),this.additionalRetryCodes_=o.slice(),this.callback_=s,this.errorCallback_=a,this.progressCallback_=c,this.timeout_=u,this.pool_=h,this.promise_=new Promise((function(t,e){l.resolve_=t,l.reject_=e,l.start_()}))}return t.prototype.start_=function(){var t=this;function e(e,n){var r,i=t.resolve_,o=t.reject_,s=n.connection;if(n.wasSuccessCode)try{var a=t.callback_(s,s.getResponseText());void 0!==a?i(a):i()}catch(t){o(t)}else null!==s?((r=h()).serverResponse=s.getResponseText(),t.errorCallback_?o(t.errorCallback_(s,r)):o(r)):n.canceled?o(r=t.appDelete_?p():l()):o(r=new u("retry-limit-exceeded","Max retry time for operation exceeded, please try again."))}this.canceled_?e(0,new U(!1,null,!0)):this.backoffId_=function(e,n,r){var o=1,s=null,a=!1,u=0;function c(){return 2===u}var h=!1;function l(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];h||(h=!0,n.apply(null,t))}function f(e){s=setTimeout((function(){s=null,function(e,n){if(n)e(!1,new U(!1,null,!0));else{var r=t.pool_.createConnection();t.pendingConnection_=r,null!==t.progressCallback_&&r.addUploadProgressListener(i),r.send(t.url_,t.method_,t.body_,t.headers_).then((function(){null!==t.progressCallback_&&r.removeUploadProgressListener(i),t.pendingConnection_=null;var n=r.getErrorCode()===T.NO_ERROR,o=r.getStatus();if(n&&!t.isRetryStatusCode_(o)){var s=-1!==t.successCodes_.indexOf(o);e(!0,new U(s,r))}else{var a=r.getErrorCode()===T.ABORT;e(!1,new U(!1,null,a))}}))}function i(e){var n=e.loaded,r=e.lengthComputable?e.total:-1;null!==t.progressCallback_&&t.progressCallback_(n,r)}}(d,c())}),e)}function d(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!h)if(t)l.call.apply(l,(0,i.ev)([null,t],e));else{var r;c()||a?l.call.apply(l,(0,i.ev)([null,t],e)):(o<64&&(o*=2),1===u?(u=2,r=0):r=1e3*(o+Math.random()),f(r))}}var p=!1;function m(t){p||(p=!0,h||(null!==s?(t||(u=2),clearTimeout(s),f(0)):t||(u=1)))}return f(0),setTimeout((function(){a=!0,m(!0)}),r),m}(0,e,this.timeout_)},t.prototype.getPromise=function(){return this.promise_},t.prototype.cancel=function(t){this.canceled_=!0,this.appDelete_=t||!1,null!==this.backoffId_&&(0,this.backoffId_)(!1),null!==this.pendingConnection_&&this.pendingConnection_.abort()},t.prototype.isRetryStatusCode_=function(t){var e=t>=500&&t<600,n=-1!==[408,429].indexOf(t),r=-1!==this.additionalRetryCodes_.indexOf(t);return e||n||r},t}(),U=function(t,e,n){this.wasSuccessCode=t,this.connection=e,this.canceled=!!n};function F(){return"undefined"!=typeof BlobBuilder?BlobBuilder:"undefined"!=typeof WebKitBlobBuilder?WebKitBlobBuilder:void 0}function q(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=F();if(void 0!==n){for(var r=new n,i=0;i<t.length;i++)r.append(t[i]);return r.getBlob()}if(x())return new Blob(t);throw new u("unsupported-environment","This browser doesn't seem to support creating Blobs")}var B=function(){function t(t,e){var n=0,r="";D(t)?(this.data_=t,n=t.size,r=t.type):t instanceof ArrayBuffer?(e?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),n=this.data_.length):t instanceof Uint8Array&&(e?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),n=t.length),this.size_=n,this.type_=r}return t.prototype.size=function(){return this.size_},t.prototype.type=function(){return this.type_},t.prototype.slice=function(e,n){if(D(this.data_)){var r=(i=this.data_,o=e,s=n,i.webkitSlice?i.webkitSlice(o,s):i.mozSlice?i.mozSlice(o,s):i.slice?i.slice(o,s):null);return null===r?null:new t(r)}var i,o,s;return new t(new Uint8Array(this.data_.buffer,e,n-e),!0)},t.getBlob=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(x()){var r=e.map((function(e){return e instanceof t?e.data_:e}));return new t(q.apply(null,r))}var i=e.map((function(t){return O(t)?w(y.RAW,t).data:t.data_})),o=0;i.forEach((function(t){o+=t.byteLength}));var s=new Uint8Array(o),a=0;return i.forEach((function(t){for(var e=0;e<t.length;e++)s[a++]=t[e]})),new t(s,!0)},t.prototype.uploadData=function(){return this.data_},t}();function V(t){var e,n;try{e=JSON.parse(t)}catch(t){return null}return"object"!=typeof(n=e)||Array.isArray(n)?null:e}function G(t){var e=t.lastIndexOf("/",t.length-2);return-1===e?t:t.slice(e+1)}function H(t,e){return e}var K=function(t,e,n,r){this.server=t,this.local=e||t,this.writable=!!n,this.xform=r||H},z=null;function W(){if(z)return z;var t=[];t.push(new K("bucket")),t.push(new K("generation")),t.push(new K("metageneration")),t.push(new K("name","fullPath",!0));var e=new K("name");e.xform=function(t,e){return function(t){return!O(t)||t.length<2?t:G(t)}(e)},t.push(e);var n=new K("size");return n.xform=function(t,e){return void 0!==e?Number(e):e},t.push(n),t.push(new K("timeCreated")),t.push(new K("updated")),t.push(new K("md5Hash",null,!0)),t.push(new K("cacheControl",null,!0)),t.push(new K("contentDisposition",null,!0)),t.push(new K("contentEncoding",null,!0)),t.push(new K("contentLanguage",null,!0)),t.push(new K("contentType",null,!0)),t.push(new K("metadata","customMetadata",!0)),z=t}function J(t,e,n){var r=V(e);return null===r?null:function(t,e,n){for(var r={type:"file"},i=n.length,o=0;o<i;o++){var s=n[o];r[s.local]=s.xform(r,e[s.server])}return function(t,e){Object.defineProperty(t,"ref",{get:function(){var n=t.bucket,r=t.fullPath,i=new N(n,r);return e._makeStorageReference(i)}})}(r,t),r}(t,r,n)}function $(t,e){for(var n={},r=e.length,i=0;i<r;i++){var o=e[i];o.writable&&(n[o.server]=t[o.local])}return JSON.stringify(n)}var X=function(t,e,n,r){this.url=t,this.method=e,this.handler=n,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]};function Q(t){if(!t)throw h()}function Y(t,e){return function(n,r){var i=J(t,r,e);return Q(null!==i),i}}function Z(t){return function(e,n){var r,i,o;return 401===e.getStatus()?r=e.getResponseText().includes("Firebase App Check token is invalid")?new u("unauthorized-app","This app does not have permission to access Firebase Storage on this project."):new u("unauthenticated","User is not authenticated, please authenticate using Firebase Authentication and try again."):402===e.getStatus()?(o=t.bucket,r=new u("quota-exceeded","Quota for bucket '"+o+"' exceeded, please view quota on https://firebase.google.com/pricing/.")):403===e.getStatus()?(i=t.path,r=new u("unauthorized","User does not have permission to access '"+i+"'.")):r=n,r.serverResponse=n.serverResponse,r}}function tt(t){var e=Z(t);return function(n,r){var i,o=e(n,r);return 404===n.getStatus()&&(i=t.path,o=new u("object-not-found","Object '"+i+"' does not exist.")),o.serverResponse=r.serverResponse,o}}function et(t,e,n){var r=L(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new X(r,"GET",Y(t,n),i);return o.errorHandler=tt(e),o}function nt(t,e,n,r,i){var o={};e.isRoot?o.prefix="":o.prefix=e.path+"/",n&&n.length>0&&(o.delimiter=n),r&&(o.pageToken=r),i&&(o.maxResults=i);var s=L(e.bucketOnlyServerUrl(),t.host),a=t.maxOperationRetryTime,u=new X(s,"GET",function(t,e){return function(n,r){var i=function(t,e,n){var r=V(n);return null===r?null:function(t,e,n){var r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n.prefixes)for(var i=0,o=n.prefixes;i<o.length;i++){var s=o[i].replace(/\/$/,""),a=t._makeStorageReference(new N(e,s));r.prefixes.push(a)}if(n.items)for(var u=0,c=n.items;u<c.length;u++){var h=c[u];a=t._makeStorageReference(new N(e,h.name)),r.items.push(a)}return r}(t,e,r)}(t,e,r);return Q(null!==i),i}}(t,e.bucket),a);return u.urlParams=o,u.errorHandler=Z(e),u}function rt(t,e,n){var r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=function(t,e){return e&&e.type()||"application/octet-stream"}(0,e)),r}var it=function(t,e,n,r){this.current=t,this.total=e,this.finalized=!!n,this.metadata=r||null};function ot(t,e){var n=null;try{n=t.getResponseHeader("X-Goog-Upload-Status")}catch(t){Q(!1)}return Q(!!n&&-1!==(e||["active"]).indexOf(n)),n}var st=262144;var at=function(t,e,n){if("function"==typeof t||null!=e||null!=n)this.next=t,this.error=e,this.complete=n;else{var r=t;this.next=r.next,this.error=r.error,this.complete=r.complete}};function ut(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];Promise.resolve().then((function(){return t.apply(void 0,e)}))}}var ct=function(){function t(t,e,n){var r=this;void 0===n&&(n=null),this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=t,this._blob=e,this._metadata=n,this._mappings=W(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=function(t){r._request=void 0,r._chunkMultiplier=1,t._codeEquals("canceled")?(r._needToFetchStatus=!0,r.completeTransitions_()):(r._error=t,r._transition("error"))},this._metadataErrorHandler=function(t){r._request=void 0,t._codeEquals("canceled")?r.completeTransitions_():(r._error=t,r._transition("error"))},this._promise=new Promise((function(t,e){r._resolve=t,r._reject=e,r._start()})),this._promise.then(null,(function(){}))}return t.prototype._makeProgressCallback=function(){var t=this,e=this._transferred;return function(n){return t._updateProgress(e+n)}},t.prototype._shouldDoResumable=function(t){return t.size()>262144},t.prototype._start=function(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this._continueUpload():this._oneShotUpload())},t.prototype._resolveToken=function(t){var e=this;Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then((function(n){var r=n[0],i=n[1];switch(e._state){case"running":t(r,i);break;case"canceling":e._transition("canceled");break;case"pausing":e._transition("paused")}}))},t.prototype._createResumable=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s=rt(e,r,i),a={name:s.fullPath},u=L(o,t.host),c={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":""+r.size(),"X-Goog-Upload-Header-Content-Type":s.contentType,"Content-Type":"application/json; charset=utf-8"},h=$(s,n),l=t.maxUploadRetryTime,f=new X(u,"POST",(function(t){var e;ot(t);try{e=t.getResponseHeader("X-Goog-Upload-URL")}catch(t){Q(!1)}return Q(O(e)),e}),l);return f.urlParams=a,f.headers=c,f.body=h,f.errorHandler=Z(e),f}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._uploadUrl=e,t._needToFetchStatus=!1,t.completeTransitions_()}),t._errorHandler)}))},t.prototype._fetchStatus=function(){var t=this,e=this._uploadUrl;this._resolveToken((function(n,r){var i=function(t,e,n,r){var i=t.maxUploadRetryTime,o=new X(n,"POST",(function(t){var e=ot(t,["active","final"]),n=null;try{n=t.getResponseHeader("X-Goog-Upload-Size-Received")}catch(t){Q(!1)}n||Q(!1);var i=Number(n);return Q(!isNaN(i)),new it(i,r.size(),"final"===e)}),i);return o.headers={"X-Goog-Upload-Command":"query"},o.errorHandler=Z(e),o}(t._ref.storage,t._ref._location,e,t._blob),o=t._ref.storage._makeRequest(i,n,r);t._request=o,o.getPromise().then((function(e){e=e,t._request=void 0,t._updateProgress(e.current),t._needToFetchStatus=!1,e.finalized&&(t._needToFetchMetadata=!0),t.completeTransitions_()}),t._errorHandler)}))},t.prototype._continueUpload=function(){var t=this,e=st*this._chunkMultiplier,n=new it(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((function(i,o){var s;try{s=function(t,e,n,r,i,o,s,a){var c=new it(0,0);if(s?(c.current=s.current,c.total=s.total):(c.current=0,c.total=r.size()),r.size()!==c.total)throw new u("server-file-wrong-size","Server recorded incorrect upload file size, please retry the upload.");var h=c.total-c.current,l=h;i>0&&(l=Math.min(l,i));var d=c.current,p=d+l,m={"X-Goog-Upload-Command":l===h?"upload, finalize":"upload","X-Goog-Upload-Offset":""+c.current},v=r.slice(d,p);if(null===v)throw f();var g=e.maxUploadRetryTime,y=new X(n,"POST",(function(t,n){var i,s=ot(t,["active","final"]),a=c.current+l,u=r.size();return i="final"===s?Y(e,o)(t,n):null,new it(a,u,"final"===s,i)}),g);return y.headers=m,y.body=v.uploadData(),y.progressCallback=a||null,y.errorHandler=Z(t),y}(t._ref._location,t._ref.storage,r,t._blob,e,t._mappings,n,t._makeProgressCallback())}catch(e){return t._error=e,void t._transition("error")}var a=t._ref.storage._makeRequest(s,i,o);t._request=a,a.getPromise().then((function(e){t._increaseMultiplier(),t._request=void 0,t._updateProgress(e.current),e.finalized?(t._metadata=e.metadata,t._transition("success")):t.completeTransitions_()}),t._errorHandler)}))},t.prototype._increaseMultiplier=function(){st*this._chunkMultiplier<33554432&&(this._chunkMultiplier*=2)},t.prototype._fetchMetadata=function(){var t=this;this._resolveToken((function(e,n){var r=et(t._ref.storage,t._ref._location,t._mappings),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._transition("success")}),t._metadataErrorHandler)}))},t.prototype._oneShotUpload=function(){var t=this;this._resolveToken((function(e,n){var r=function(t,e,n,r,i){var o=e.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"},a=function(){for(var t="",e=0;e<2;e++)t+=Math.random().toString().slice(2);return t}();s["Content-Type"]="multipart/related; boundary="+a;var u=rt(e,r,i),c="--"+a+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+$(u,n)+"\r\n--"+a+"\r\nContent-Type: "+u.contentType+"\r\n\r\n",h="\r\n--"+a+"--",l=B.getBlob(c,r,h);if(null===l)throw f();var d={name:u.fullPath},p=L(o,t.host),m=t.maxUploadRetryTime,v=new X(p,"POST",Y(t,n),m);return v.urlParams=d,v.headers=s,v.body=l.uploadData(),v.errorHandler=Z(e),v}(t._ref.storage,t._ref._location,t._mappings,t._blob,t._metadata),i=t._ref.storage._makeRequest(r,e,n);t._request=i,i.getPromise().then((function(e){t._request=void 0,t._metadata=e,t._updateProgress(t._blob.size()),t._transition("success")}),t._errorHandler)}))},t.prototype._updateProgress=function(t){var e=this._transferred;this._transferred=t,this._transferred!==e&&this._notifyObservers()},t.prototype._transition=function(t){if(this._state!==t)switch(t){case"canceling":case"pausing":this._state=t,void 0!==this._request&&this._request.cancel();break;case"running":var e="paused"===this._state;this._state=t,e&&(this._notifyObservers(),this._start());break;case"paused":this._state=t,this._notifyObservers();break;case"canceled":this._error=l(),this._state=t,this._notifyObservers();break;case"error":case"success":this._state=t,this._notifyObservers()}},t.prototype.completeTransitions_=function(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}},Object.defineProperty(t.prototype,"snapshot",{get:function(){var t=A(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:t,metadata:this._metadata,task:this,ref:this._ref}},enumerable:!1,configurable:!0}),t.prototype.on=function(t,e,n,r){var i=this,o=new at(e,n,r);return this._addObserver(o),function(){i._removeObserver(o)}},t.prototype.then=function(t,e){return this._promise.then(t,e)},t.prototype.catch=function(t){return this.then(null,t)},t.prototype._addObserver=function(t){this._observers.push(t),this._notifyObserver(t)},t.prototype._removeObserver=function(t){var e=this._observers.indexOf(t);-1!==e&&this._observers.splice(e,1)},t.prototype._notifyObservers=function(){var t=this;this._finishPromise(),this._observers.slice().forEach((function(e){t._notifyObserver(e)}))},t.prototype._finishPromise=function(){if(void 0!==this._resolve){var t=!0;switch(A(this._state)){case S.SUCCESS:ut(this._resolve.bind(null,this.snapshot))();break;case S.CANCELED:case S.ERROR:ut(this._reject.bind(null,this._error))();break;default:t=!1}t&&(this._resolve=void 0,this._reject=void 0)}},t.prototype._notifyObserver=function(t){switch(A(this._state)){case S.RUNNING:case S.PAUSED:t.next&&ut(t.next.bind(t,this.snapshot))();break;case S.SUCCESS:t.complete&&ut(t.complete.bind(t))();break;case S.CANCELED:case S.ERROR:t.error&&ut(t.error.bind(t,this._error))();break;default:t.error&&ut(t.error.bind(t,this._error))()}},t.prototype.resume=function(){var t="paused"===this._state||"pausing"===this._state;return t&&this._transition("running"),t},t.prototype.pause=function(){var t="running"===this._state;return t&&this._transition("pausing"),t},t.prototype.cancel=function(){var t="running"===this._state||"pausing"===this._state;return t&&this._transition("canceling"),t},t}(),ht=function(){function t(t,e){this._service=t,this._location=e instanceof N?e:N.makeFromUrl(e,t.host)}return t.prototype.toString=function(){return"gs://"+this._location.bucket+"/"+this._location.path},t.prototype._newRef=function(e,n){return new t(e,n)},Object.defineProperty(t.prototype,"root",{get:function(){var t=new N(this._location.bucket,"");return this._newRef(this._service,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._location.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._location.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return G(this._location.path)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"storage",{get:function(){return this._service},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=function(t){if(0===t.length)return null;var e=t.lastIndexOf("/");return-1===e?"":t.slice(0,e)}(this._location.path);if(null===e)return null;var n=new N(this._location.bucket,e);return new t(this._service,n)},enumerable:!1,configurable:!0}),t.prototype._throwIfRoot=function(t){if(""===this._location.path)throw m(t)},t}();function lt(t){var e={prefixes:[],items:[]};return ft(t,e).then((function(){return e}))}function ft(t,e,n){return(0,i.mG)(this,void 0,void 0,(function(){var r,o,s;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,dt(t,{pageToken:n})];case 1:return r=i.sent(),(o=e.prefixes).push.apply(o,r.prefixes),(s=e.items).push.apply(s,r.items),null==r.nextPageToken?[3,3]:[4,ft(t,e,r.nextPageToken)];case 2:i.sent(),i.label=3;case 3:return[2]}}))}))}function dt(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n,r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return null!=e&&"number"==typeof e.maxResults&&P("options.maxResults",1,1e3,e.maxResults),n=e||{},r=nt(t.storage,t._location,"/",n.pageToken,n.maxResults),[4,t.storage.makeRequestWithTokens(r)];case 1:return[2,i.sent().getPromise()]}}))}))}function pt(t){return(0,i.mG)(this,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getDownloadURL"),e=function(t,e,n){var r=L(e.fullServerUrl(),t.host),i=t.maxOperationRetryTime,o=new X(r,"GET",function(t,e){return function(n,r){var i=J(t,r,e);return Q(null!==i),function(t,e,n){var r=V(e);if(null===r)return null;if(!O(r.downloadTokens))return null;var i=r.downloadTokens;if(0===i.length)return null;var o=encodeURIComponent;return i.split(",").map((function(e){var r=t.bucket,i=t.fullPath;return L("/b/"+o(r)+"/o/"+o(i),n)+M({alt:"media",token:e})}))[0]}(i,r,t.host)}}(t,n),i);return o.errorHandler=tt(e),o}(t.storage,t._location,W()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise().then((function(t){if(null===t)throw new u("no-download-url","The given file does not have any download URLs.");return t}))]}}))}))}function mt(t,e){var n=function(t,e){var n=e.split("/").filter((function(t){return t.length>0})).join("/");return 0===t.length?n:t+"/"+n}(t._location.path,e),r=new N(t._location.bucket,n);return new ht(t.storage,r)}function vt(t){return/^[A-Za-z]+:\/\//.test(t)}function gt(t,e){if(t instanceof wt){var n=t;if(null==n._bucket)throw new u("no-default-bucket","No default bucket found. Did you set the 'storageBucket' property when initializing the app?");var r=new ht(n,n._bucket);return null!=e?gt(r,e):r}return void 0!==e?mt(t,e):t}function yt(t,e){if(e&&vt(e)){if(t instanceof wt)return new ht(t,e);throw d("To use ref(service, url), the first argument must be a Storage instance.")}return gt(t,e)}function bt(t,e){var n=null==e?void 0:e.storageBucket;return null==n?null:N.makeFromBucketSpec(n,t)}var wt=function(){function t(t,e,n,r,i,o){this.app=t,this._authProvider=e,this._appCheckProvider=n,this._pool=r,this._url=i,this._firebaseVersion=o,this._bucket=null,this._host=a,this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?N.makeFromBucketSpec(i,this._host):bt(this._host,this.app.options)}return Object.defineProperty(t.prototype,"host",{get:function(){return this._host},set:function(t){this._host=t,null!=this._url?this._bucket=N.makeFromBucketSpec(this._url,t):this._bucket=bt(t,this.app.options)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._maxUploadRetryTime},set:function(t){P("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._maxOperationRetryTime},set:function(t){P("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t},enumerable:!1,configurable:!0}),t.prototype._getAuthToken=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t,e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return this._overrideAuthToken?[2,this._overrideAuthToken]:(t=this._authProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:if(null!==(e=n.sent()))return[2,e.accessToken];n.label=2;case 2:return[2,null]}}))}))},t.prototype._getAppCheckToken=function(){return(0,i.mG)(this,void 0,void 0,(function(){var t;return(0,i.Jh)(this,(function(e){switch(e.label){case 0:return(t=this._appCheckProvider.getImmediate({optional:!0}))?[4,t.getToken()]:[3,2];case 1:return[2,e.sent().token];case 2:return[2,null]}}))}))},t.prototype._delete=function(){return this._deleted||(this._deleted=!0,this._requests.forEach((function(t){return t.cancel()})),this._requests.clear()),Promise.resolve()},t.prototype._makeStorageReference=function(t){return new ht(this,t)},t.prototype._makeRequest=function(t,e,n){var r=this;if(this._deleted)return new R(p());var i=function(t,e,n,r,i,o){var s=M(t.urlParams),a=t.url+s,u=Object.assign({},t.headers);return function(t,e){e&&(t["X-Firebase-GMPID"]=e)}(u,e),function(t,e){null!==e&&e.length>0&&(t.Authorization="Firebase "+e)}(u,n),function(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(null!=e?e:"AppManager")}(u,o),function(t,e){null!==e&&(t["X-Firebase-AppCheck"]=e)}(u,r),new j(a,t.method,u,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i)}(t,this._appId,e,n,this._pool,this._firebaseVersion);return this._requests.add(i),i.getPromise().then((function(){return r._requests.delete(i)}),(function(){return r._requests.delete(i)})),i},t.prototype.makeRequestWithTokens=function(t){return(0,i.mG)(this,void 0,void 0,(function(){var e,n,r;return(0,i.Jh)(this,(function(i){switch(i.label){case 0:return[4,Promise.all([this._getAuthToken(),this._getAppCheckToken()])];case 1:return e=i.sent(),n=e[0],r=e[1],[2,this._makeRequest(t,n,r)]}}))}))},t}();function _t(t,e){return yt(t=(0,o.m9)(t),e)}var It,Tt,Et=function(){function t(t,e,n){this._delegate=t,this.task=e,this.ref=n}return Object.defineProperty(t.prototype,"bytesTransferred",{get:function(){return this._delegate.bytesTransferred},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"state",{get:function(){return this._delegate.state},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBytes",{get:function(){return this._delegate.totalBytes},enumerable:!1,configurable:!0}),t}(),St=function(){function t(t,e){this._delegate=t,this._ref=e,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}return Object.defineProperty(t.prototype,"snapshot",{get:function(){return new Et(this._delegate.snapshot,this,this._ref)},enumerable:!1,configurable:!0}),t.prototype.then=function(t,e){var n=this;return this._delegate.then((function(e){if(t)return t(new Et(e,n,n._ref))}),e)},t.prototype.on=function(t,e,n,r){var i=this,o=void 0;return e&&(o="function"==typeof e?function(t){return e(new Et(t,i,i._ref))}:{next:e.next?function(t){return e.next(new Et(t,i,i._ref))}:void 0,complete:e.complete||void 0,error:e.error||void 0}),this._delegate.on(t,o,n||void 0,r||void 0)},t}(),At=function(){function t(t,e){this._delegate=t,this._service=e}return Object.defineProperty(t.prototype,"prefixes",{get:function(){var t=this;return this._delegate.prefixes.map((function(e){return new kt(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"items",{get:function(){var t=this;return this._delegate.items.map((function(e){return new kt(e,t._service)}))},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextPageToken",{get:function(){return this._delegate.nextPageToken||null},enumerable:!1,configurable:!0}),t}(),kt=function(){function t(t,e){this._delegate=t,this.storage=e}return Object.defineProperty(t.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bucket",{get:function(){return this._delegate.bucket},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fullPath",{get:function(){return this._delegate.fullPath},enumerable:!1,configurable:!0}),t.prototype.toString=function(){return this._delegate.toString()},t.prototype.child=function(e){return new t(function(t,e){return mt(t,e)}(this._delegate,e),this.storage)},Object.defineProperty(t.prototype,"root",{get:function(){return new t(this._delegate.root,this.storage)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){var e=this._delegate.parent;return null==e?null:new t(e,this.storage)},enumerable:!1,configurable:!0}),t.prototype.put=function(t,e){return this._throwIfRoot("put"),new St(function(t,e,n){return function(t,e,n){return t._throwIfRoot("uploadBytesResumable"),new ct(t,new B(e),n)}(t=(0,o.m9)(t),e,n)}(this._delegate,t,e),this)},t.prototype.putString=function(t,e,n){void 0===e&&(e=y.RAW),this._throwIfRoot("putString");var r=w(e,t),o=(0,i.pi)({},n);return null==o.contentType&&null!=r.contentType&&(o.contentType=r.contentType),new St(new ct(this._delegate,new B(r.data,!0),o),this)},t.prototype.listAll=function(){var t=this;return function(t){return lt(t=(0,o.m9)(t))}(this._delegate).then((function(e){return new At(e,t.storage)}))},t.prototype.list=function(t){var e=this;return function(t,e){return dt(t=(0,o.m9)(t),e)}(this._delegate,t||void 0).then((function(t){return new At(t,e.storage)}))},t.prototype.getMetadata=function(){return function(t){return function(t){return(0,i.mG)(this,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("getMetadata"),e=et(t.storage,t._location,W()),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}(t=(0,o.m9)(t))}(this._delegate)},t.prototype.updateMetadata=function(t){return function(t,e){return function(t,e){return(0,i.mG)(this,void 0,void 0,(function(){var n;return(0,i.Jh)(this,(function(r){switch(r.label){case 0:return t._throwIfRoot("updateMetadata"),n=function(t,e,n,r){var i=L(e.fullServerUrl(),t.host),o=$(n,r),s=t.maxOperationRetryTime,a=new X(i,"PATCH",Y(t,r),s);return a.headers={"Content-Type":"application/json; charset=utf-8"},a.body=o,a.errorHandler=tt(e),a}(t.storage,t._location,e,W()),[4,t.storage.makeRequestWithTokens(n)];case 1:return[2,r.sent().getPromise()]}}))}))}(t=(0,o.m9)(t),e)}(this._delegate,t)},t.prototype.getDownloadURL=function(){return function(t){return pt(t=(0,o.m9)(t))}(this._delegate)},t.prototype.delete=function(){return this._throwIfRoot("delete"),function(t){return function(t){return(0,i.mG)(this,void 0,void 0,(function(){var e;return(0,i.Jh)(this,(function(n){switch(n.label){case 0:return t._throwIfRoot("deleteObject"),e=function(t,e){var n=L(e.fullServerUrl(),t.host),r=t.maxOperationRetryTime,i=new X(n,"DELETE",(function(t,e){}),r);return i.successCodes=[200,204],i.errorHandler=tt(e),i}(t.storage,t._location),[4,t.storage.makeRequestWithTokens(e)];case 1:return[2,n.sent().getPromise()]}}))}))}(t=(0,o.m9)(t))}(this._delegate)},t.prototype._throwIfRoot=function(t){if(""===this._delegate._location.path)throw m(t)},t}(),Ct=function(){function t(t,e){this.app=t,this._delegate=e}return Object.defineProperty(t.prototype,"maxOperationRetryTime",{get:function(){return this._delegate.maxOperationRetryTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"maxUploadRetryTime",{get:function(){return this._delegate.maxUploadRetryTime},enumerable:!1,configurable:!0}),t.prototype.ref=function(t){if(vt(t))throw d("ref() expected a child path but got a URL, use refFromURL instead.");return new kt(_t(this._delegate,t),this)},t.prototype.refFromURL=function(t){if(!vt(t))throw d("refFromURL() expected a full URL but got a child path, use ref() instead.");try{N.makeFromUrl(t,this._delegate.host)}catch(t){throw d("refFromUrl() expected a valid full URL but got an invalid one.")}return new kt(_t(this._delegate,t),this)},t.prototype.setMaxUploadRetryTime=function(t){this._delegate.maxUploadRetryTime=t},t.prototype.setMaxOperationRetryTime=function(t){this._delegate.maxOperationRetryTime=t},t.prototype.useEmulator=function(t,e,n){void 0===n&&(n={}),function(t,e,n,r){void 0===r&&(r={}),function(t,e,n,r){void 0===r&&(r={}),t.host="http://"+e+":"+n;var i=r.mockUserToken;i&&(t._overrideAuthToken="string"==typeof i?i:(0,o.Sg)(i,t.app.options.projectId))}(t,e,n,r)}(this._delegate,t,e,n)},t}();It=r.Z,Tt={TaskState:S,TaskEvent:{STATE_CHANGED:"state_changed"},StringFormat:y,Storage:wt,Reference:kt},It.INTERNAL.registerComponent(new s.wA("storage",(function(t,e){var n=e.instanceIdentifier,i=t.getProvider("app").getImmediate(),o=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return new Ct(i,new wt(i,o,s,new C,n,r.Z.SDK_VERSION))}),"PUBLIC").setServiceProps(Tt).setMultipleInstances(!0)),It.registerVersion("@firebase/storage","0.7.0")},2261:(t,e,n)=>{var r;t.exports=function(){if(!r){try{r=n(5158)("follow-redirects")}catch(t){}"function"!=typeof r&&(r=function(){})}r.apply(null,arguments)}},938:(t,e,n)=>{var r=n(8835),i=r.URL,o=n(8605),s=n(7211),a=n(2413).Writable,u=n(2357),c=n(2261),h=["abort","aborted","connect","error","socket","timeout"],l=Object.create(null);h.forEach((function(t){l[t]=function(e,n,r){this._redirectable.emit(t,e,n,r)}}));var f=_("ERR_FR_REDIRECTION_FAILURE",""),d=_("ERR_FR_TOO_MANY_REDIRECTS","Maximum number of redirects exceeded"),p=_("ERR_FR_MAX_BODY_LENGTH_EXCEEDED","Request body larger than maxBodyLength limit"),m=_("ERR_STREAM_WRITE_AFTER_END","write after end");function v(t,e){a.call(this),this._sanitizeOptions(t),this._options=t,this._ended=!1,this._ending=!1,this._redirectCount=0,this._redirects=[],this._requestBodyLength=0,this._requestBodyBuffers=[],e&&this.on("response",e);var n=this;this._onNativeResponse=function(t){n._processResponse(t)},this._performRequest()}function g(t){var e={maxRedirects:21,maxBodyLength:10485760},n={};return Object.keys(t).forEach((function(o){var s=o+":",a=n[s]=t[o],h=e[o]=Object.create(a);Object.defineProperties(h,{request:{value:function(t,o,a){if("string"==typeof t){var h=t;try{t=b(new i(h))}catch(e){t=r.parse(h)}}else i&&t instanceof i?t=b(t):(a=o,o=t,t={protocol:s});return"function"==typeof o&&(a=o,o=null),(o=Object.assign({maxRedirects:e.maxRedirects,maxBodyLength:e.maxBodyLength},t,o)).nativeProtocols=n,u.equal(o.protocol,s,"protocol mismatch"),c("options",o),new v(o,a)},configurable:!0,enumerable:!0,writable:!0},get:{value:function(t,e,n){var r=h.request(t,e,n);return r.end(),r},configurable:!0,enumerable:!0,writable:!0}})})),e}function y(){}function b(t){var e={protocol:t.protocol,hostname:t.hostname.startsWith("[")?t.hostname.slice(1,-1):t.hostname,hash:t.hash,search:t.search,pathname:t.pathname,path:t.pathname+t.search,href:t.href};return""!==t.port&&(e.port=Number(t.port)),e}function w(t,e){var n;for(var r in e)t.test(r)&&(n=e[r],delete e[r]);return n}function _(t,e){function n(t){Error.captureStackTrace(this,this.constructor),this.message=t||e}return n.prototype=new Error,n.prototype.constructor=n,n.prototype.name="Error ["+t+"]",n.prototype.code=t,n}function I(t){for(var e=0;e<h.length;e++)t.removeListener(h[e],l[h[e]]);t.on("error",y),t.abort()}v.prototype=Object.create(a.prototype),v.prototype.abort=function(){I(this._currentRequest),this.emit("abort")},v.prototype.write=function(t,e,n){if(this._ending)throw new m;if(!("string"==typeof t||"object"==typeof t&&"length"in t))throw new TypeError("data should be a string, Buffer or Uint8Array");"function"==typeof e&&(n=e,e=null),0!==t.length?this._requestBodyLength+t.length<=this._options.maxBodyLength?(this._requestBodyLength+=t.length,this._requestBodyBuffers.push({data:t,encoding:e}),this._currentRequest.write(t,e,n)):(this.emit("error",new p),this.abort()):n&&n()},v.prototype.end=function(t,e,n){if("function"==typeof t?(n=t,t=e=null):"function"==typeof e&&(n=e,e=null),t){var r=this,i=this._currentRequest;this.write(t,e,(function(){r._ended=!0,i.end(null,null,n)})),this._ending=!0}else this._ended=this._ending=!0,this._currentRequest.end(null,null,n)},v.prototype.setHeader=function(t,e){this._options.headers[t]=e,this._currentRequest.setHeader(t,e)},v.prototype.removeHeader=function(t){delete this._options.headers[t],this._currentRequest.removeHeader(t)},v.prototype.setTimeout=function(t,e){var n=this;function r(e){e.setTimeout(t),e.removeListener("timeout",e.destroy),e.addListener("timeout",e.destroy)}function i(e){n._timeout&&clearTimeout(n._timeout),n._timeout=setTimeout((function(){n.emit("timeout"),o()}),t),r(e)}function o(){clearTimeout(n._timeout),e&&n.removeListener("timeout",e),this.socket||n._currentRequest.removeListener("socket",i)}return e&&this.on("timeout",e),this.socket?i(this.socket):this._currentRequest.once("socket",i),this.on("socket",r),this.once("response",o),this.once("error",o),this},["flushHeaders","getHeader","setNoDelay","setSocketKeepAlive"].forEach((function(t){v.prototype[t]=function(e,n){return this._currentRequest[t](e,n)}})),["aborted","connection","socket"].forEach((function(t){Object.defineProperty(v.prototype,t,{get:function(){return this._currentRequest[t]}})})),v.prototype._sanitizeOptions=function(t){if(t.headers||(t.headers={}),t.host&&(t.hostname||(t.hostname=t.host),delete t.host),!t.pathname&&t.path){var e=t.path.indexOf("?");e<0?t.pathname=t.path:(t.pathname=t.path.substring(0,e),t.search=t.path.substring(e))}},v.prototype._performRequest=function(){var t=this._options.protocol,e=this._options.nativeProtocols[t];if(e){if(this._options.agents){var n=t.substr(0,t.length-1);this._options.agent=this._options.agents[n]}var i=this._currentRequest=e.request(this._options,this._onNativeResponse);this._currentUrl=r.format(this._options),i._redirectable=this;for(var o=0;o<h.length;o++)i.on(h[o],l[h[o]]);if(this._isRedirect){var s=0,a=this,u=this._requestBodyBuffers;!function t(e){if(i===a._currentRequest)if(e)a.emit("error",e);else if(s<u.length){var n=u[s++];i.finished||i.write(n.data,n.encoding,t)}else a._ended&&i.end()}()}}else this.emit("error",new TypeError("Unsupported protocol "+t))},v.prototype._processResponse=function(t){var e=t.statusCode;this._options.trackRedirects&&this._redirects.push({url:this._currentUrl,headers:t.headers,statusCode:e});var n=t.headers.location;if(n&&!1!==this._options.followRedirects&&e>=300&&e<400){if(I(this._currentRequest),t.destroy(),++this._redirectCount>this._options.maxRedirects)return void this.emit("error",new d);((301===e||302===e)&&"POST"===this._options.method||303===e&&!/^(?:GET|HEAD)$/.test(this._options.method))&&(this._options.method="GET",this._requestBodyBuffers=[],w(/^content-/i,this._options.headers));var i=w(/^host$/i,this._options.headers)||r.parse(this._currentUrl).hostname,o=r.resolve(this._currentUrl,n);c("redirecting to",o),this._isRedirect=!0;var s=r.parse(o);if(Object.assign(this._options,s),s.hostname!==i&&w(/^authorization$/i,this._options.headers),"function"==typeof this._options.beforeRedirect){var a={headers:t.headers};try{this._options.beforeRedirect.call(null,this._options,a)}catch(t){return void this.emit("error",t)}this._sanitizeOptions(this._options)}try{this._performRequest()}catch(t){var u=new f("Redirected request failed: "+t.message);u.cause=t,this.emit("error",u)}}else t.responseUrl=this._currentUrl,t.redirects=this._redirects,this.emit("response",t),this._requestBodyBuffers=[]},t.exports=g({http:o,https:s}),t.exports.wrap=g},7824:t=>{var e=1e3,n=60*e,r=60*n,i=24*r;function o(t,e,n){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+n:Math.ceil(t/e)+" "+n+"s"}t.exports=function(t,s){s=s||{};var a,u=typeof t;if("string"===u&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var o=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(o){var s=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*s;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*r;case"minutes":case"minute":case"mins":case"min":case"m":return s*n;case"seconds":case"second":case"secs":case"sec":case"s":return s*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}}}(t);if("number"===u&&!1===isNaN(t))return s.long?o(a=t,i,"day")||o(a,r,"hour")||o(a,n,"minute")||o(a,e,"second")||a+" ms":function(t){return t>=i?Math.round(t/i)+"d":t>=r?Math.round(t/r)+"h":t>=n?Math.round(t/n)+"m":t>=e?Math.round(t/e)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},1078:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.storage=e.firestore=e.auth=void 0;const r=n(5503);n(7397),n(9433),n(332);r.default.initializeApp({apiKey:"AIzaSyAevVhT5LHhj8qr1GEcz2kxC9Eh4-OPctY",authDomain:"kakaotalk-c8efd.firebaseapp.com",projectId:"kakaotalk-c8efd",storageBucket:"kakaotalk-c8efd.appspot.com",messagingSenderId:"211963357652",appId:"1:211963357652:web:03c0d9ef8b2d8623210e41"});const i=r.default.auth();e.auth=i;const o=r.default.firestore();e.firestore=o;const s=r.default.storage();e.storage=s},4100:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Loading=void 0;const r=n(1873);class i extends r.Component{constructor(t){super(t)}render(){return'\n      <div class="loadingContainer">\n        <img src="./public/images/loading.gif" alt="loading" />\n      </div>\n      '}}e.Loading=i},7597:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Login=void 0;const r=n(1873),i=n(1078);class o extends r.Component{app=document.getElementById("app");router;constructor(t,e){super(t),this.router=e}mount(){document.getElementById("loginSubmit").onclick=function(){var t=document.getElementById("email").value,e=document.getElementById("password").value;i.auth.signInWithEmailAndPassword(t,e).then((t=>console.log("success"))).catch((t=>alert(t.message)))},document.getElementById("moveSignup").addEventListener("click",(()=>{this.router.push("/signup")}))}render(){return'\n        <div class="loginLogoContainer">\n            <img class="loginLogo" src="./public/images/logo.png" alt="" />\n        </div>\n        <div class="loginFormContainer">\n                <div class="loginInputContainer">\n                    <input type="text" id="email" placeholder="카카오계정 (이메일)" value=""/>\n                    <input type="password" id="password" placeholder="비밀번호" value="" />\n                </div>\n                <button type="submit" class="loginButton" id="loginSubmit">로그인</button>\n                <button type="submit" class="moveButton" id="moveSignup">회원가입</button>\n        </div>\n        '}}e.Login=o},2935:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Signup=void 0;const r=n(1873),i=n(1078);class o extends r.Component{app=document.getElementById("app");router;constructor(t,e){super(t),this.router=e}mount(){document.getElementById("signupSubmit").onclick=function(){const t=document.getElementById("nickname").value,e=document.getElementById("email").value,n=document.getElementById("password").value;i.auth.createUserWithEmailAndPassword(e,n).then((n=>{const r={nickname:t,email:e,profileImg:"",profileMessage:"",background:"",uid:n.user.uid,friends:[]};i.firestore.collection("users").doc(n.user.uid).set(r).catch((t=>t))})).catch((t=>alert(t.message)))},document.getElementById("moveLogin").addEventListener("click",(()=>{this.router.push("/login")}))}render(){return'\n        <div class="loginLogoContainer">\n            <img class="loginLogo" src="./public/images/logo.png" alt="" />\n        </div>\n        <div class="loginFormContainer">\n            <div class="loginInputContainer">\n                <input type="passowrd" id="nickname" placeholder="닉네임" />\n                <input type="email" id="email" placeholder="카카오계정 (이메일)" />\n                <input type="password" id="password" placeholder="비밀번호" />\n            </div>\n            <button class="loginButton" id="signupSubmit">회원가입</button>\n            <button type="submit" class="moveButton" id="moveLogin">로그인</button>\n        </div>\n        '}}e.Signup=o},650:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Chat=void 0;const r=n(1873),i=n(1078);class o extends r.Component{chat;router;friend;room;me;deleteChat;constructor(t,e,n,r,i,o){super(t),this.room=e,this.friend=n,this.me=r,console.log(e,n,r),this.deleteChat=i,this.router=o}mount(){document.getElementById(`delete${this.room.id}`).addEventListener("click",(()=>{confirm("Do you really want to delete it?")&&(i.firestore.collection("rooms").doc(this.room.id).delete(),i.firestore.collection("users").doc(this.me.uid).collection("rooms").doc(this.room.id).delete(),i.firestore.collection("users").doc(this.friend.uid).collection("rooms").doc(this.room.id).delete(),this.deleteChat(this.room.id,this.friend.uid))}))}render(){return`\n    <div class="chatRoom delete" id="delete${this.room.id}">\n        <div class="imageContainer">\n            <img src="${this.friend.profileImg}" onError="this.src='./public/images/profile.jpg';" alt="..." />\n        </div>\n        <div class="roomContent">\n            <span class="roomTitle">${this.friend.nickname}</span>\n            <span class="chatContent">${this.room.recentMessage}</span>\n        </div>\n        <div class="roomInfo">\n            <span class="time">${parseInt(this.room.hour)<10?`0${this.room.hour}`:this.room.hour}\n        :\n        ${parseInt(this.room.minute)<10?`0${this.room.minute}`:this.room.minute}</span>\n            ${this.room.unreadMessage?`<span class="unread">${this.room.unreadMessage}</span>`:""}\n        </div>\n    </div>\n        `}}e.Chat=o},7900:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Chats=void 0;const r=n(1873);n(776);class i extends r.Component{router;constructor(t,e){super(t),this.router=e}mount(){this.components.map((t=>t.mount()))}render(){return`\n        <div class="chat">\n          ${this.components.map((t=>t.render())).join("")}\n        </div>\n    `}}e.Chats=i},2087:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Header=void 0;const r=n(1873);class i extends r.Component{router;me;constructor(t,e,n){super(t),this.router=n,this.me=e}mount(){const t=document.querySelector(".home"),e=document.querySelector(".chat"),n=document.querySelector(".news"),r=document.querySelector(".more");e.classList.add("focus"),t.addEventListener("click",(()=>{t.setAttribute("disabled","disabled"),this.router.push("/"),e.classList.remove("focus")})),n.addEventListener("click",(()=>{n.setAttribute("disabled","disabled"),this.router.push("/news"),e.classList.remove("focus")})),r.addEventListener("click",(()=>{r.setAttribute("disabled","disabled"),this.router.push("/more"),e.classList.remove("focus")})),document.getElementById("chatBack").addEventListener("click",(()=>{this.router.setData(this.me),this.router.push("/chat")}))}render(){return'\n        <div class="headerContainer">\n            <div class="headerBar">\n                <span>Chatting</span>\n                <div class="headerButtonContainer">\n                    <button type="button" id="chatBack"><img src="./public/images/back.png" /></button>\n                </div>\n            </div>\n            <div class="headerTab">\n                <div class="tabButton home">\n                    <img src="./public/images/people.png" />\n                </div>\n                <div class="tabButton chat">\n                    <img src="./public/images/chatting.png" />\n                </div>\n                <div class="tabButton news">\n                    <img src="./public/images/news.png" />\n                </div>\n                <div class="tabButton more">\n                    <img src="./public/images/more_r.png" />\n                </div>\n            </div>\n        </div>\n        '}}e.Header=i},5462:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Header=void 0;const r=n(1873);class i extends r.Component{len;router;me;constructor(t,e,n,r){super(t),this.len=e,this.me=n,this.router=r}mount(){const t=document.querySelector(".home"),e=document.querySelector(".chat"),n=document.querySelector(".news"),r=document.querySelector(".more");t.classList.add("focus"),e.addEventListener("click",(()=>{e.setAttribute("disabled","disabled"),this.router.setData(this.me),this.router.push("/chat"),t.classList.remove("focus")})),n.addEventListener("click",(()=>{n.setAttribute("disabled","disabled"),this.router.push("/news"),t.classList.remove("focus")})),r.addEventListener("click",(()=>{r.setAttribute("disabled","disabled"),this.router.push("/more"),t.classList.remove("focus")})),document.getElementById("mainBack").addEventListener("click",(()=>{this.router.push("/")}))}render(){return`\n        <div class="headerContainer">\n            <div class="headerBar">\n                <span>Friends ${this.len}</span>\n                <div class="headerButtonContainer">\n                    <button type="button" id="mainBack"><img src="./public/images/back.png" /></button>\n                </div>\n            </div>\n            <div class="headerTab">\n                <div class="tabButton home">\n                    <img src="./public/images/people.png" />\n                </div>\n                <div class="tabButton chat">\n                    <img src="./public/images/chatting.png" />\n                </div>\n                <div class="tabButton news">\n                    <img src="./public/images/news.png" />\n                </div>\n                <div class="tabButton more">\n                    <img src="./public/images/more_r.png" />\n                </div>\n            </div>\n        </div>\n        `}}e.Header=i},483:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Main=void 0;const r=n(1873);class i extends r.Component{myprofile;router;constructor(t){super(t)}render(){return`\n        <div class="main">\n            <div class="myProfileText">\n                <span>My Friends</span>\n            </div>\n            ${this.components.map((t=>t.render())).join("")}\n        </div>\n        `}}e.Main=i},6949:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Profile=void 0;const r=n(1078),i=n(1873);class o extends i.Component{friend;router;me;parent;friends;update;constructor(t,e,n,r,i,o){super(t),this.parent=t,this.friend=e,this.friends=n,this.me=r,this.update=o,this.router=i}mount(){document.getElementById(`delete${this.friend.uid}`).addEventListener("click",(t=>{console.log(t),console.log(t.target.parentElement);let e=this.friends.filter((t=>t.uid!==this.friend.uid));this.update(e),r.firestore.collection("users").doc(this.me.uid).update({friends:e}),r.firestore.collection("users").doc(this.me.uid).collection("friends").doc(this.friend.uid).delete()}))}render(){return`\n        <div class="profile" id="${this.friend.uid}"">\n            <div class="profileLeft">\n                <img src="${this.friend.profileImg}" onError="this.src='./public/images/profile.jpg';" alt="..." />\n                <span>${this.friend.nickname}</span>\n            </div>\n            ${this.friend.profileMessage?`<div class="profileMessage"><span>${this.friend.profileMessage}</span></div>`:""}\n            <span class="deleteFriend" id="delete${this.friend.uid}">❌</span>\n        </div>\n        `}}e.Profile=o},7083:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Chat=void 0;const r=n(1873),i=n(1078);class o extends r.Component{chat;router;friend;room;me;constructor(t,e,n,r,i,o){super(t),this.chat=e,this.room=n,this.friend=r,this.me=i,this.router=o}mount(){document.getElementById(`${this.chat.id}`).addEventListener("click",(()=>{"0"!==this.room.unreadMessage&&i.firestore.collection("users").doc(i.auth.currentUser.uid).collection("rooms").doc(this.room.id).update({unreadMessage:0}).catch((t=>console.log(t.message))),this.router.setData([this.chat,this.me,this.friend]),this.router.push("/room")}))}render(){return`\n    <div class="chatRoom" id="${this.room.id}">\n        <div class="imageContainer">\n            <img src="${this.friend.profileImg}" onError="this.src='./public/images/profile.jpg';" alt="..." />\n        </div>\n        <div class="roomContent">\n            <span class="roomTitle">${this.friend.nickname}</span>\n            <span class="chatContent">${this.room.recentMessage}</span>\n        </div>\n        <div class="roomInfo">\n            <span class="time">${parseInt(this.room.hour)<10?`0${this.room.hour}`:this.room.hour}\n        :\n        ${parseInt(this.room.minute)<10?`0${this.room.minute}`:this.room.minute}</span>\n            ${this.room.unreadMessage?`<span class="unread">${this.room.unreadMessage}</span>`:""}\n        </div>\n    </div>\n        `}}e.Chat=o},4140:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Chats=void 0;const r=n(1873);n(776);class i extends r.Component{router;constructor(t,e){super(t),this.router=e}mount(){this.components.map((t=>t.mount()))}render(){return`\n        <div class="chat">\n          ${this.components.map((t=>t.render())).join("")}\n        </div>\n    `}}e.Chats=i},6175:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Header=void 0;const r=n(1873);class i extends r.Component{router;friendList;roomList;me;constructor(t,e,n,r,i){super(t),this.router=i,this.me=e,this.roomList=n,this.friendList=r}mount(){const t=document.querySelector(".home"),e=document.querySelector(".chat"),n=document.querySelector(".news"),r=document.querySelector(".more");e.classList.add("focus"),t.addEventListener("click",(()=>{t.setAttribute("disabled","disabled"),this.router.push("/"),e.classList.remove("focus")})),n.addEventListener("click",(()=>{n.setAttribute("disabled","disabled"),this.router.push("/news"),e.classList.remove("focus")})),r.addEventListener("click",(()=>{r.setAttribute("disabled","disabled"),this.router.push("/more"),e.classList.remove("focus")})),document.getElementById("chatDropButton").addEventListener("click",(()=>{const t=document.getElementById("chatDropdown");console.log(t),"none"==t.style.display?t.style.display="inline-block":t.style.display="none"})),document.getElementById("chatDropLi").addEventListener("click",(()=>{this.router.setData([this.me,this.roomList,this.friendList]),this.router.push("/canclechat")}))}render(){return'\n        <div class="headerContainer">\n            <div class="headerBar">\n                <span>Chatting</span>\n                <div class="headerButtonContainer">\n                    <div class="dropbox">\n                      <button type="button" id="chatDropButton"><img src="./public/images/more_c.png" /></button>\n                      <div style="display:none;" class="chatDropdown" id="chatDropdown">\n                        <span id="chatDropLi">Delete Chatting</span>\n                      </div>\n                    </div>\n                </div>\n            </div>\n            <div class="headerTab">\n                <div class="tabButton home">\n                    <img src="./public/images/people.png" />\n                </div>\n                <div class="tabButton chat">\n                    <img src="./public/images/chatting.png" />\n                </div>\n                <div class="tabButton news">\n                    <img src="./public/images/news.png" />\n                </div>\n                <div class="tabButton more">\n                    <img src="./public/images/more_r.png" />\n                </div>\n            </div>\n        </div>\n        '}}e.Header=i},7208:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Search=void 0;const r=n(1873);class i extends r.Component{constructor(t){super(t)}render(){return'\n        <div class="search">\n            <input type="text" placeholder="🔍 Search Chatting and Friends" />\n        </div>\n        '}}e.Search=i},2237:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Header=void 0;const r=n(1873);class i extends r.Component{len;router;me;friends;constructor(t,e,n,r,i){super(t),this.len=e,this.me=n,this.router=i,this.friends=r}mount(){this.router.setData(this.me);const t=document.querySelector(".home"),e=document.querySelector(".chat"),n=document.querySelector(".news"),r=document.querySelector(".more");t.classList.add("focus"),e.addEventListener("click",(()=>{e.setAttribute("disabled","disabled"),this.router.push("/chat"),t.classList.remove("focus")})),n.addEventListener("click",(()=>{n.setAttribute("disabled","disabled"),this.router.push("/news"),t.classList.remove("focus")})),r.addEventListener("click",(()=>{r.setAttribute("disabled","disabled"),this.router.push("/more"),t.classList.remove("focus")})),document.getElementById("mainDropButton").addEventListener("click",(()=>{const t=document.getElementById("mainDropdown");console.log(t),"none"==t.style.display?t.style.display="inline-block":t.style.display="none"})),document.getElementById("dropLi").addEventListener("click",(()=>{this.router.setData([this.friends,this.me]),this.router.push("/canclefriend")}))}render(){return`\n        <div class="headerContainer">\n            <div class="headerBar">\n                <span>Friends ${this.len}</span>\n                <div class="headerButtonContainer">\n                    <div class="dropbox">\n                      <button type="button" id="mainDropButton"><img src="./public/images/more_c.png" /></button>\n                      <div style="display:none;" class="dropdown" id="mainDropdown">\n                        <span id="dropLi">Delete Friends</span>\n                      </div>\n                    </div>\n                </div>\n            </div>\n            <div class="headerTab">\n                <div class="tabButton home">\n                    <img src="./public/images/people.png" />\n                </div>\n                <div class="tabButton chat">\n                    <img src="./public/images/chatting.png" />\n                </div>\n                <div class="tabButton news">\n                    <img src="./public/images/news.png" />\n                </div>\n                <div class="tabButton more">\n                    <img src="./public/images/more_r.png" />\n                </div>\n            </div>\n        </div>\n        `}}e.Header=i},8053:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Main=void 0;const r=n(1873);class i extends r.Component{myprofile;router;constructor(t,e,n){super(t),this.myprofile=e,this.router=n}mount(){document.getElementById(`${this.myprofile.uid}`).addEventListener("click",(()=>{this.router.setData([this.myprofile,this.myprofile]),this.router.push("/profile")})),this.components.map((t=>t.mount()))}render(){return`\n        <div class="main">\n            <div class="myProfileText">\n                <span>My Profile</span>\n            </div>\n            <div class="myProfile" id="${this.myprofile.uid}">\n                <div class="profileLeft">\n                    <img src="${this.myprofile.profileImg}" onError="this.src='./public/images/profile.jpg';" alt="..." />\n                    <span>${this.myprofile.nickname}</span>\n                </div>\n                ${this.myprofile.profileMessage?`<div class="profileMessage"><span>${this.myprofile.profileMessage}</span></div>`:""}\n            </div>\n            <div class="myProfileText">\n                <span>My Friends</span>\n            </div>\n            ${this.components.map((t=>t.render())).join("")}\n        </div>\n        `}}e.Main=i},1545:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Profile=void 0;const r=n(1873);class i extends r.Component{friend;router;me;constructor(t,e,n,r){super(t),this.friend=e,this.me=n,this.router=r}mount(){document.getElementById(`${this.friend.uid}`).addEventListener("click",(()=>{this.router.setData([this.friend,this.me]),this.router.push("/profile")}))}render(){return`\n        <div class="profile" id="${this.friend.uid}"">\n            <div class="profileLeft">\n                <img src="${this.friend.profileImg}" onError="this.src='./public/images/profile.jpg';" alt="..." />\n                <span>${this.friend.nickname}</span>\n            </div>\n            ${this.friend.profileMessage?`<div class="profileMessage"><span>${this.friend.profileMessage}</span></div>`:""}\n        </div>\n        `}}e.Profile=i},5677:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Search=void 0;const r=n(1873),i=n(1078),o=n(5997);class s extends r.Component{me;constructor(t,e){super(t),this.me=e}mount(){document.querySelector("#search").addEventListener("input",(t=>{var e=t.currentTarget.value,n=document.querySelector(".searchBox");""!=e?(n.style.display="flex",i.firestore.collection("users").where("nickname",">=",e).where("nickname","<=",e+"").get().then((t=>{this.searchFriend(t)}))):n.style.display="none"})),this.components.map((t=>t.mount()))}searchFriend=t=>{0===t.docs.length?document.querySelector(".searchBox").innerHTML="<span>Nothing Found...T.T</span>":document.querySelector(".searchBox").innerHTML="";const e=[];t.docs.map((t=>{const n=t.data(),r=new o.SearchElement(this,n,this.me);document.querySelector(".searchBox").innerHTML+=r.render(),e.push(r)})),e.map((t=>t.mount()))};render(){return'\n        <div class="search">\n            <input id="search" type="text" placeholder="🔍 Search Nickname & Email" value="" />\n            <div class="searchBox">\n            </div>\n        </div>\n        '}}e.Search=s},5997:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SearchElement=void 0;const r=n(1873),i=n(1078);class o extends r.Component{user;me;constructor(t,e,n){super(t),this.user=e,this.me=n}mount(){document.getElementById(`search${this.user.uid}`).addEventListener("click",(()=>{this.me.uid!==this.user.uid?i.firestore.collection("users").doc(this.me.uid).collection("friends").doc(this.user.uid).set(this.user).catch((t=>alert(t.message))).then((()=>{var t=this.me.friends;t.push(this.user.uid),i.firestore.collection("users").doc(this.me.uid).update({friends:t})})):alert("This is me....")}))}render(){return`\n        <div class="searchElement">\n            <img src="${this.user.profileImg?this.user.profileImg:"./public/images/profile.jpg"}" />\n            <div class="searchText">\n                <span class="nickname">${this.user.nickname}</span>\n                <span class="email">${this.user.email}</span>\n            </div>\n            <button class="addFriend" id="search${this.user.uid}">친구 추가</button>\n        </div>\n        `}}e.SearchElement=o},6068:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Header=void 0;const r=n(1873);class i extends r.Component{router;constructor(t,e){super(t),this.router=e}mount(){const t=document.querySelector(".home"),e=document.querySelector(".chat"),n=document.querySelector(".news"),r=document.querySelector(".more");r.classList.add("focus"),t.addEventListener("click",(()=>{t.setAttribute("disabled","disabled"),this.router.push("/"),r.classList.remove("focus")})),n.addEventListener("click",(()=>{n.setAttribute("disabled","disabled"),this.router.push("/news"),r.classList.remove("focus")})),e.addEventListener("click",(()=>{e.setAttribute("disabled","disabled"),this.router.push("/chat"),r.classList.remove("focus")}))}render(){return'\n        <div class="headerContainer">\n            <div class="headerBar">\n                <span>LOGOUT</span>\n                <div class="headerButtonContainer">\n                    <button type="button"><img src="./public/images/add.png" /></button>\n                    <button type="button"><img src="./public/images/more_c.png" /></button>\n                </div>\n            </div>\n            <div class="headerTab">\n                <div class="tabButton home">\n                    <img src="./public/images/people.png" />\n                </div>\n                <div class="tabButton chat">\n                    <img src="./public/images/chatting.png" />\n                </div>\n                <div class="tabButton news">\n                    <img src="./public/images/news.png" />\n                </div>\n                <div class="tabButton more">\n                    <img src="./public/images/more_r.png" />\n                </div>\n            </div>\n        </div>\n        '}}e.Header=i},8299:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LogoutButton=void 0;const r=n(1873),i=n(1078);class o extends r.Component{constructor(t){super(t)}mount(){document.querySelector(".logoutButton").addEventListener("click",(t=>{i.auth.signOut()}))}render(){return'\n    <div class="logout">\n        <button class="logoutButton">LOGOUT</button>\n    </div>\n        '}}e.LogoutButton=o},8204:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Article=void 0;const r=n(1873);class i extends r.Component{url;img;title;from;constructor(t,e,n,r,i){super(t),this.url=e,this.img=n,this.title=r,this.from=i}render(){return`\n    <div class="newsBox">\n        <a href="${this.url}">\n            <div class="newsWith">\n                <img class="newsImg" src="${this.img}" onError="this.src='./public/images/book.jpg';" alt="..." />\n                <span class="newsTitle">${this.title}</span>\n            </div>\n            <h3 class="newsFrom">${this.from}</h3>\n        </a>\n    </div>\n                        `}}e.Article=i},1162:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Articles=void 0;const r=n(1873);class i extends r.Component{articles;title;constructor(t,e){super(t),this.title=e}render(){return`\n        <div class="articles">\n            <h4 class="newsLabel">${this.title} 채널 소식</h4>\n            <div class="newsGrid">\n            ${this.components.map((t=>t.render())).join("")}\n        </div>\n    </div>\n      `}}e.Articles=i},9122:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Header=void 0;const r=n(1873);class i extends r.Component{len;router;constructor(t,e){super(t),this.router=e}mount(){const t=document.querySelector(".home"),e=document.querySelector(".chat"),n=document.querySelector(".news"),r=document.querySelector(".more");n.classList.add("focus"),e.addEventListener("click",(()=>{e.setAttribute("disabled","disabled"),this.router.push("/chat"),n.classList.remove("focus")})),r.addEventListener("click",(()=>{r.setAttribute("disabled","disabled"),this.router.push("/more"),n.classList.remove("focus")})),t.addEventListener("click",(()=>{t.setAttribute("disabled","disabled"),this.router.push("/"),n.classList.remove("focus")}))}render(){return'\n        <div class="headerContainer">\n            <div class="headerBar">\n                <span>News</span>\n                <div class="headerButtonContainer">\n                    <button type="button"><img src="./public/images/add.png" /></button>\n                    <button type="button"><img src="./public/images/more_c.png" /></button>\n                </div>\n            </div>\n            <div class="headerTab">\n                <div class="tabButton home">\n                    <img src="./public/images/people.png" />\n                </div>\n                <div class="tabButton chat">\n                    <img src="./public/images/chatting.png" />\n                </div>\n                <div class="tabButton news">\n                    <img src="./public/images/news.png" />\n                </div>\n                <div class="tabButton more">\n                    <img src="./public/images/more_r.png" />\n                </div>\n            </div>\n        </div>\n        '}}e.Header=i},919:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Search=void 0;const r=n(1873);class i extends r.Component{me;searchContents;constructor(t,e){super(t),this.searchContents=e}mount(){document.getElementById("newsSearch").addEventListener("keydown",(t=>{if("Enter"==t.key){console.log(t);const e=t.target.value;this.searchContents(e)}}))}render(){return'\n        <div class="search">\n            <input id="newsSearch" type="text" placeholder="🔍 Search Book or Movie Information" value="" />\n            <div class="searchBox">\n            </div>\n        </div>\n        <div class="space"> </div>\n        '}}e.Search=i},1013:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Background=void 0;const r=n(1873);class i extends r.Component{user;router;me;constructor(t,e,n,r){super(t),this.user=e,this.me=n,this.router=r}mount(){document.querySelector(".closeProfile").addEventListener("click",(()=>{this.router.setData(this.me),this.router.push("/")}))}render(){return`\n    <div class="backgroundImg">\n            <img class="newsImg" src="${this.user.background}" onError="this.src='./public/images/background.jpg';" alt="..." />\n            <span class="closeProfile">X</span>\n    </div>\n    `}}e.Background=i},2244:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Button=void 0;const r=n(1873),i=n(1078);class o extends r.Component{friend;router;date;me;constructor(t,e,n,r){super(t),this.friend=e,this.router=r,this.me=n,this.date=new Date}mount(){document.getElementById("dochat").addEventListener("click",(t=>{document.getElementById("dochat").setAttribute("disabled","disabled"),this.me.uid!==this.friend.uid?i.firestore.collection("users").doc(this.me.uid).collection("rooms").where("friend.uid","==",this.friend.uid).get().then((t=>{if(0==t.docs.length){const t=this.createRoomId(),e={id:t,uids:[this.me.uid,this.friend.uid],friends:[this.me,this.friend],chats:[],time:Date.now(),year:this.date.getFullYear(),month:this.date.getMonth()+1,date:this.date.getDate(),hour:this.date.getHours(),minute:this.date.getMinutes()};i.firestore.collection("users").doc(this.me.uid).collection("rooms").doc(t).set({id:t,unreadMessage:0,friend:this.friend,time:Date.now(),recentMessage:"",year:this.date.getFullYear(),month:this.date.getMonth()+1,date:this.date.getDate(),hour:this.date.getHours(),minute:this.date.getMinutes()}),i.firestore.collection("users").doc(this.friend.uid).collection("rooms").doc(t).set({id:t,unreadMessage:0,friend:this.me,time:Date.now(),recentMessage:"",year:this.date.getFullYear(),month:this.date.getMonth()+1,date:this.date.getDate(),hour:this.date.getHours(),minute:this.date.getMinutes()}),i.firestore.collection("rooms").doc(t).set(e).then((()=>{this.router.setData([e,this.me,this.friend]),this.router.push("/room")}))}else i.firestore.collection("rooms").doc(t.docs[0].data().id).get().then((t=>{const e=t.data();this.router.setData([e,this.me,this.friend]),this.router.push("/room")}))})):alert("Can't chat with me...")})),document.querySelector(".update").addEventListener("click",(()=>{this.router.setData(this.me),this.router.push("/update")}))}createRoomId=()=>{function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()};render(){return`\n    <div class="container">\n        <div class="button">\n            <div class="buttonElement doChat">\n                <div class="imgWrapper" id="dochat">\n                    <img src="./public/images/chatting2.png" />\n                </div>\n                <span>DO CHAT</span>\n            </div>\n            ${this.me.uid===this.friend.uid?'\n            <div class="buttonElement update">\n                <div class="imgWrapper" id="update">\n                    <img src="./public/images/write.png" />\n                </div>\n                <span>UPDATE</span>\n            </div>\n            ':""}\n        </div>\n    </div>\n    `}}e.Button=o},768:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;const r=n(1873);class i extends r.Component{constructor(t){super(t)}render(){return`\n    <div class="container">\n        ${this.components.map((t=>t.render())).join("")}\n    </div>\n    `}}e.Container=i},1133:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Profile=void 0;const r=n(1873);class i extends r.Component{user;constructor(t,e){super(t),this.user=e}render(){return`\n    <div class="profile">\n        <img class="thumbnail" src="${this.user.profileImg}" onError="this.src='./public/images/profile.jpg';" alt="..." />\n        <span class="name">\n          ${this.user.nickname}\n        </span>\n        <div class="email">\n          <span>\n            ${this.user.email}\n          </span>\n        </div>\n        <span class="message">\n        ${""!==this.user.profileMessage?this.user.profileMessage:""}\n        </span>\n    </div>\n    `}}e.Profile=i},5480:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Chat=void 0;const r=n(1873);class i extends r.Component{chat;me;state;friend;constructor(t,e,n,r){super(t),this.chat=e,this.me=n,this.friend=r}setState(t){this.state=t}render(){return`\n    ${this.chat.uid===this.me.uid?`\n    <div class="myChat ${this.state}">\n      <span class="time">\n      ${parseInt(this.chat.hour)<10?`0${this.chat.hour}`:this.chat.hour}\n        :\n        ${parseInt(this.chat.minute)<10?`0${this.chat.minute}`:this.chat.minute}\n        </span>\n      <div class="content">\n        <span class="name">\n          ${this.me.nickname}\n        </span>\n        <div class="speechBuble">\n          <span>\n            ${this.chat.chatting}\n          </span>\n        </div>\n      </div>\n      <img src="${this.me.profileImg}" onError="this.src='./public/images/profile.jpg';" alt="..." />\n    </div>\n    `:`\n    <div class="chat ${this.state}">\n        <img src="${this.friend.profileImg}" onError="this.src='./public/images/profile.jpg';" alt="..." />\n            <div class="content">\n                <span class="name">\n                  ${this.friend.nickname}\n                </span>\n                <div class="speechBuble">\n                    <span>\n                      ${this.chat.chatting}\n                    </span>\n                </div>\n            </div>\n        <span class="time">\n        ${parseInt(this.chat.hour)<10?`0${this.chat.hour}`:this.chat.hour}\n        :\n        ${parseInt(this.chat.minute)<10?`0${this.chat.minute}`:this.chat.minute}\n        </span>\n    </div>\n    `}\n    `}}e.Chat=i},6331:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Content=void 0;const r=n(1873);class i extends r.Component{chats;stateArray=[];returnString;constructor(t,e){super(t),this.chats=e,this.returnString=""}mount(){var t=document.querySelector(".roomContent");t.scrollTop=t.scrollHeight,this.components.map((t=>t.mount()))}render(){var t,e=0,n=0;return this.stateArray.fill("",this.components.length),this.returnString="",`\n    <div class="roomContent">\n    ${this.components.map((n=>{0==e?(this.stateArray[0]="top",t=n.chat.uid):e==this.components.length-1?(t!==n.chat.uid?("top"==this.stateArray[e-1]?this.stateArray[e-1]="one":this.stateArray[e-1]="last",this.stateArray[e]="one"):t==n.chat.uid&&(this.stateArray[e]="last"),t=n.chat.uid):(t!==n.chat.uid?("top"==this.stateArray[e-1]?this.stateArray[e-1]="one":this.stateArray[e-1]="last",this.stateArray[e]="top"):this.stateArray[e]="middle",t=n.chat.uid),e++})).join("")}\n          ${this.components.map((t=>{"top"==this.stateArray[n]?(t.setState("top"),this.returnString+=t.render()):"last"==this.stateArray[n]?(t.setState("last"),this.returnString+=t.render()):"middle"==this.stateArray[n]?(t.setState("middle"),this.returnString+=t.render()):"one"==this.stateArray[n]&&(t.setState("one"),this.returnString+=t.render()),n++})).join("")}\n          ${this.returnString}\n          </div>\n          `}}e.Content=i},1232:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Header=void 0;const r=n(1873),i=n(776);class o extends r.Component{room;router;me;constructor(t,e,n,r){super(t),this.room=e,this.router=r,this.me=n}mount(){document.querySelector(".back").addEventListener("click",(()=>{this.router.setData(i),this.router.setData(this.me),this.router.push("/chat")}))}getRoomTitle(){const t=this.room.uids.filter((t=>t!==this.me.uid))[0];return this.room.friends.filter((e=>e.uid===t))[0].nickname}render(){return`\n        <div class="headerBar">\n            <div class="headerLeft">\n                <img class="back" src="./public/images/back.png" />\n                <span class="roomName">\n                  ${this.getRoomTitle()}\n                </span>\n                <span class="friendsNum">\n                  ${this.room.friends.length}\n                </span>\n            </div>\n        </div>\n        `}}e.Header=o},3879:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Input=void 0;const r=n(1873),i=n(1078);class o extends r.Component{room;date;me;friend;constructor(t,e,n,r){super(t),this.room=e,this.me=n,this.friend=r,this.date=new Date}mount(){const t=document.getElementById("chatInput");t.focus(),document.querySelector(".chatForm").addEventListener("submit",(e=>{e.preventDefault();const n=t.value;""!=n?(i.firestore.collection("rooms").doc(this.room.id).update({time:Date.now()}),i.firestore.collection("rooms").doc(this.room.id).collection("chats").doc(`${Date.now()}`).set({uid:this.me.uid,nickname:this.me.nickname,profileImg:this.me.profileImg,chatting:n,year:this.date.getFullYear(),month:this.date.getMonth()+1,date:this.date.getDate(),hour:this.date.getHours(),minute:this.date.getMinutes(),sender:this.me.uid,receiver:this.friend.uid,id:Date.now()}).then((()=>{t.value="",t.focus()}))):alert("you need something typing...")}))}render(){return'\n        <div class="chatInputWrap">\n            <form class="chatForm">\n                <input class="chatInput" id="chatInput" placeholder="채팅을 입력해주세요" value="" />\n                <button type="submit" class="chatButton">전송</button>\n            </form>\n        </div>\n        '}}e.Input=o},8552:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Background=void 0;const r=n(1078),i=n(1873);class o extends i.Component{me;router;constructor(t,e,n){super(t),this.me=e,this.router=n}mount(){document.querySelector("div > .closeProfile").addEventListener("click",(t=>{t.stopPropagation(),this.router.push("/")})),document.querySelector(".myBackground").addEventListener("click",(t=>{t.stopPropagation(),document.querySelector(".backgroundFileInput").click()})),document.querySelector(".backgroundFileInput").addEventListener("change",(t=>{const e=t.target.files[0];var n,r=new FileReader;r.onload=function(t){n=t.target.result},r.onloadend=t=>{this.uploadStorage(n)},r.readAsDataURL(e)}))}uploadStorage=async t=>{const e=await fetch(t),n=await e.blob(),i=r.storage.ref().child(`background${this.me.uid}`).put(n);i.on("state_changed",(t=>{console.log(`transferred : ${t.bytesTransferred}`)}),(t=>{console.log(t)}),(()=>{i.snapshot.ref.getDownloadURL().then((t=>{this.updateFirestore(t)}))}))};updateFirestore=t=>{console.log("downloadURL?",t),r.firestore.collection("users").doc(this.me.uid).update({background:t}).catch((t=>console.log(t.message)))};render(){return`\n    <div class="backgroundImg myBackground">\n      <img src="${this.me.background?this.me.background:"./public/images/background.jpg"}" />\n      <span class="closeProfile">X</span>\n      <input class="backgroundFileInput" type="file" accept="images/*" />\n    </div>\n    `}}e.Background=o},8415:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Container=void 0;const r=n(1873);class i extends r.Component{constructor(t){super(t)}render(){return`\n    <div class="container">\n        ${this.components.map((t=>t.render())).join("")}\n    </div>\n    `}}e.Container=i},2484:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Profile=void 0;const r=n(1873),i=n(1078);class o extends r.Component{me;constructor(t,e){super(t),this.me=e}mount(){var t=document.getElementById("myName"),e=t.value.length;t.setAttribute("size",String(e)),t.style.width=t.offsetWidth-44+"px",document.querySelector("#myName").addEventListener("input",(t=>{var e=document.getElementById("myName"),n=e.value.length;e.style.width=50+10*n+"px"})),this.addEventFile(),this.addEventName(),this.addEventMessage()}addEventMessage=()=>{document.getElementById("clickMessage").addEventListener("click",(()=>{const t=document.querySelector(".message");t.classList.remove("message"),t.innerHTML=`<div class="messageForm"><textarea class="messageInput">${this.me.profileMessage}</textarea><img src="./public/images/done.png" id="submitMessage" /></div>`,document.getElementById("submitMessage").addEventListener("click",(()=>{console.log("submitMessage");const e=document.querySelector(".messageInput").value;i.firestore.collection("users").doc(this.me.uid).update({profileMessage:e}).catch((t=>console.log(t.message))),t.classList.add("message"),t.innerHTML=`${this.me.profileMessage}<img id='clickMessage' src='./public/images/write.png' />`,this.addEventMessage()}))}))};addEventName=()=>{document.getElementById("clickName").addEventListener("click",(t=>{const e=document.getElementById("clickName"),n=document.getElementById("myName"),r=e.src.split("/");if("write.png"==r[r.length-1])n.style.pointerEvents="all",n.focus(),e.src="./public/images/done.png";else if("done.png"==r[r.length-1]){if(""==n.value)return void alert("you must input something...");i.firestore.collection("users").doc(this.me.uid).update({nickname:n.value}).catch((t=>console.log(t.message))),e.src="./public/images/write.png",n.style.pointerEvents="none"}}))};addEventFile=()=>{document.querySelector("#thumbnailUpdate").addEventListener("click",(t=>{t.stopPropagation(),document.querySelector(".profileFileInput").click()})),document.querySelector(".profileFileInput").addEventListener("change",(()=>{const t=event.target.files[0];var e,n=new FileReader;n.onload=function(t){e=t.target.result},n.onloadend=t=>{this.uploadStorage(e)},n.readAsDataURL(t)}))};uploadStorage=async t=>{const e=await fetch(t),n=await e.blob(),r=i.storage.ref().child(`thumbnail${this.me.uid}`).put(n);r.on("state_changed",(t=>{console.log(`transferred : ${t.bytesTransferred}`)}),(t=>{console.log(t)}),(()=>{r.snapshot.ref.getDownloadURL().then((t=>{this.updateFirestore(t)}))}))};updateFirestore(t){console.log("downloadURL?",t),i.firestore.collection("users").doc(this.me.uid).update({profileImg:t}).catch((t=>console.log(t.message)))}render(){return`\n    <div class="profile">\n        <img src="${this.me.profileImg?this.me.profileImg:"./public/images/profile.jpg"}" class="thumbnail myThumbnail" id="thumbnailUpdate" />\n        <span class="name"><input type="text" id="myName" value="${this.me.nickname}" /><img src="./public/images/write.png" id="clickName" /></span>\n        <div class="email"><span>${this.me.email}</span></div>\n        <span class="message" id="myMessage">${""!==this.me.profileMessage?`${this.me.profileMessage}<img id='clickMessage' src='./public/images/write.png' />`:"<img id='clickMessage' src='./public/images/write.png' />"}</span>\n        <input class="profileFileInput" type="file" accept="images/*" />\n        <div class="add"></div>\n    </div>\n    `}}e.Profile=o},2335:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CancleFriendContainer=void 0;const r=n(1873);class i extends r.Component{friends;constructor(t,e){super(t),this.friends=e}render(){return`\n        <div class="mainContainerWrapper">\n            <div class="mainContainer">\n                ${this.components.map((t=>t.render())).join("")}\n            </div>\n        </div>\n        `}}e.CancleFriendContainer=i},3102:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChatContainer=void 0;const r=n(1873);class i extends r.Component{constructor(t){super(t)}render(){return`\n        <div class="chatContainerWrapper">\n            <div class="chatContainer">\n                ${this.components.map((t=>t.render())).join("")}\n            </div>\n        </div>\n        `}}e.ChatContainer=i},3572:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LoginContainer=void 0;const r=n(1873);class i extends r.Component{constructor(){super(null)}render(){return`\n        <div class="loginContainerWrapper">\n            <div class="loginContainer">\n                ${this.components.map((t=>t.render())).join("")}\n            </div>\n        </div>\n        `}}e.LoginContainer=i},2339:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MainContainer=void 0;const r=n(1873);class i extends r.Component{constructor(){super(null)}render(){return`\n        <div class="mainContainerWrapper">\n            <div class="mainContainer">\n                ${this.components.map((t=>t.render())).join("")}\n            </div>\n        </div>\n        `}}e.MainContainer=i},4262:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MoreContainer=void 0;const r=n(1873);class i extends r.Component{constructor(t){super(null)}render(){return`\n        <div class="mainContainerWrapper">\n            <div class="mainContainer">\n                ${this.components.map((t=>t.render())).join("")}\n            </div>\n        </div>\n        `}}e.MoreContainer=i},1748:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NewsContainer=void 0;const r=n(1873);class i extends r.Component{articles;constructor(t){super(t)}render(){return`\n        <div class="newsContainerWrapper">\n            <div class="newsContainer">\n                ${this.components.map((t=>t.render())).join("")}\n            </div>\n        </div>\n        `}}e.NewsContainer=i},6231:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProfileContainer=void 0;const r=n(1873),i=n(776);i.friends[0];class o extends r.Component{datas;constructor(t){super(null),this.datas=i}render(){return`\n        <div class="profileContainerWrapper">\n            <div class="profileContainer">\n              ${this.components.map((t=>t.render())).join("")}\n            </div>\n        </div>\n    `}}e.ProfileContainer=o},116:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProfileUpdateContainer=void 0;const r=n(1873),i=n(776);i.friends[0];class o extends r.Component{datas;constructor(t){super(null),this.datas=i}render(){return`\n        <div class="profileContainerWrapper">\n            <div class="profileContainer">\n                ${this.components.map((t=>t.render())).join("")}\n            </div>\n        </div>\n    `}}e.ProfileUpdateContainer=o},3488:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RoomContainer=void 0;const r=n(1873),i=n(776);class o extends r.Component{datas;constructor(t){super(null),this.datas=i}render(){return`\n        <div class="roomContainerWrapper">\n            <div class="roomContainer">\n                ${this.components.map((t=>t.render())).join("")}\n            </div>\n        </div>\n        `}}e.RoomContainer=o},5e3:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SignupContainer=void 0;const r=n(1873);class i extends r.Component{constructor(){super(null)}render(){return`\n        <div class="loginContainerWrapper">\n            <div class="loginContainer">\n                ${this.components.map((t=>t.render())).join("")}\n            </div>\n        </div>\n        `}}e.SignupContainer=i},1873:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Component=void 0;const r=n(8139);class i extends r.Observable{components=[];constructor(t){super(),super.register(t?null:this),t&&t.addChild(this)}addChild(t){this.components.push(t)}render(){this.components.map((t=>t.render)).join("")}mount(){this.components.forEach((t=>t.mount()))}}e.Component=i},8139:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Observable=void 0;const r=n(1423);e.Observable=class{register(t){t&&r.subject.register(t)}}},7061:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Page=void 0;const r=n(1423);e.Page=class{router;constructor(t){r.subject.reset(),this.router=t}render(){r.subject.render()}mount(){r.subject.mount()}reset(){r.subject.reset()}}},1567:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Router=void 0,e.Router=class{nowPage="";pages=[];datas=[];constructor({pages:t}){this.pages=t,window.onhashchange=t=>{this.nowPage=window.location.hash.replace("#",""),new(0,this.pages.find((t=>t.path===this.nowPage)).page)({router:this,datas:this.datas})}}push(t){window.location.hash=t}setData(t){this.datas=[],this.datas.push(t)}}},1423:(t,e)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.subject=e.Subject=void 0;class n{app;observers=[];constructor(){this.app=document.getElementById("app")}register(t){this.observers.push(t)}render(){this.app.innerHTML=this.observers.map((t=>t.render())).join("")}mount(){this.observers.forEach((t=>{t.mount()}))}reset(){this.observers=[]}}e.Subject=n;const r=new n;e.subject=r},6053:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CancleChatPage=void 0;const r=n(7061),i=n(3102),o=n(7900),s=n(2087),a=n(650);class u extends r.Page{friendList=[];roomList=[];me;constructor({router:t,datas:e}){super(t),console.log(e),this.me=e[0][0],this.roomList=e[0][1],this.friendList=e[0][2];const n=new i.ChatContainer(null);new s.Header(n,this.me,t);const r=new o.Chats(n,t);var u=0;console.log(this.roomList),this.roomList.map((e=>{new a.Chat(r,e,this.friendList[u],this.me,this.deleteChat,t),u++})),this.render(),this.mount()}deleteChat=(t,e)=>{console.log("reset 전"),this.reset(),console.log("reset 후"),this.roomList=this.roomList.filter((e=>e.id!==t)),this.friendList=this.friendList.filter((t=>t.uid!==e));const n=new i.ChatContainer(null);new s.Header(n,this.me,this.router);const r=new o.Chats(n,this.router);var u=0;console.log(this.roomList),this.roomList.map((t=>{new a.Chat(r,t,this.friendList[u],this.me,this.deleteChat,this.router),u++})),this.render(),this.mount()}}e.CancleChatPage=u},5442:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CancleFriendPage=void 0;const r=n(7061),i=n(2335),o=n(5462),s=n(483),a=n(6949);class u extends r.Page{friends;container;me;constructor({router:t,datas:e}){super(t),this.friends=e[0][0],this.me=e[0][1],this.router=t,this.container=new i.CancleFriendContainer(null,e),new o.Header(this.container,this.friends.length,this.me,t);const n=new s.Main(this.container);this.friends.map((e=>{new a.Profile(n,e,this.friends,this.me,t,this.updateFriends)})),this.render(),this.mount()}updateFriends=t=>{this.friends=t,this.container.components=[],new o.Header(this.container,this.friends.length,this.me,this.router);const e=new s.Main(this.container);this.friends.map((t=>{new a.Profile(e,t,this.friends,this.me,this.router,this.updateFriends)}))}}e.CancleFriendPage=u},8071:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ChatPage=void 0;const r=n(7061),i=n(3102),o=n(4140),s=n(6175),a=n(7208),u=n(7083),c=n(1078);class h extends r.Page{idList=[];friendList=[];roomList=[];chatList=[];header;constructor({router:t,datas:e}){super(t);const n=e[0],r=new i.ChatContainer(null);this.header=new s.Header(r,n,this.roomList,this.friendList,t),new a.Search(r);const h=new o.Chats(r,t);c.firestore.collection("users").doc(c.auth.currentUser.uid).collection("rooms").orderBy("time","desc").onSnapshot((e=>{h.components=[],this.idList=[],this.friendList=[],this.chatList=[],this.roomList=[],this.fetchRoomsList(e).then((()=>{if(0==this.roomList.length)return this.render(),void this.mount();c.firestore.collection("rooms").where("id","in",this.idList).orderBy("time","desc").get().then((t=>{t.docs.map((t=>{this.chatList.push(t.data())}))})).then((()=>{var e=0;this.chatList.map((r=>{new u.Chat(h,r,this.roomList[e],this.friendList[e],n,t),e++}))})).then((()=>{this.render(),this.mount()})).catch((t=>console.log(t.message)))}))}))}fetchRoomsList=async t=>{t.docs.map((t=>{var e=t.data().id,n=t.data().friend;this.roomList.push(t.data()),this.idList.push(e),this.friendList.push(n)})),this.header.roomList=this.roomList,this.header.friendList=this.friendList}}e.ChatPage=h},1284:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.LoginPage=void 0;const r=n(7061),i=n(3572),o=n(7597);class s extends r.Page{constructor({router:t,datas:e}){super(t);const n=new i.LoginContainer;new o.Login(n,t),this.render(),this.mount()}}e.LoginPage=s},4696:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MainPage=void 0;const r=n(7061),i=n(2339),o=n(8053),s=n(2237),a=n(5677),u=n(1545),c=n(1078);class h extends r.Page{constructor({router:t,datas:e}){var n,r,h,l,f;super(t);var d=[];c.firestore.collection("users").doc(c.auth.currentUser.uid).get().then((e=>{n=e.data(),r=new i.MainContainer,h=new s.Header(r,0,n,d,t),l=new a.Search(r,n),f=new o.Main(r,n,t)})).then((()=>{c.firestore.collection("users").doc(c.auth.currentUser.uid).collection("friends").orderBy("nickname","asc").onSnapshot((e=>{f.components=[],l.components=[],d=[],h.len=e.docs.length,e.docs.map((e=>{d.push(e.data()),new u.Profile(f,e.data(),n,t)})),h.friends=d,this.render(),this.mount()}))}))}}e.MainPage=h},110:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MorePage=void 0;const r=n(7061),i=n(4262),o=n(6068),s=n(8299);class a extends r.Page{constructor({router:t,datas:e}){super(t);const n=new i.MoreContainer(null);new o.Header(n,t),new s.LogoutButton(n),this.render(),this.mount()}}e.MorePage=a},4109:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.NewsPage=void 0;const r=n(7061),i=n(1748),o=n(9122),s=n(919),a=n(1162),u=n(8204),c=n(4100);var h=n(9669).default;class l extends r.Page{constructor({router:t,datas:e}){super(t);const n=new i.NewsContainer(null);new o.Header(n,t),new s.Search(n,this.searchContents),new c.Loading(n),this.render(),this.mount(),this.useAnother("웹").then((e=>{this.reset(),console.log(e);const n=new i.NewsContainer(null);new o.Header(n,t),new s.Search(n,this.searchContents);const r=new a.Articles(n,"독서");e[0].map((t=>{new u.Article(r,t.link,t.image,t.title,t.publisher)}));const c=new a.Articles(n,"영화");e[1].map((t=>{new u.Article(c,t.link,t.image,t.title,t.director)}))})).then((()=>{this.render(),this.mount()})).catch((t=>console.log(t)))}useAnother=async t=>{console.log("");try{if(""!=t){const{data:{books:e}}=await h.get("https://typetalkserver.herokuapp.com/book",{params:{query:t}}),{data:{movies:n}}=await h.get("https://typetalkserver.herokuapp.com/movie",{params:{query:t}});return console.log(e,n),[e,n]}console.log("뭐라도 입력해요")}catch(t){console.log(t)}};searchContents=t=>{this.reset();const e=new i.NewsContainer(null);new o.Header(e,this.router),new s.Search(e,this.searchContents),new c.Loading(e),this.render(),this.mount(),this.useAnother(t).then((t=>{this.reset(),console.log(t);const e=new i.NewsContainer(null);new o.Header(e,this.router),new s.Search(e,this.searchContents);const n=new a.Articles(e,"독서");t[0].map((t=>{new u.Article(n,t.link,t.image,t.title,t.publisher)}));const r=new a.Articles(e,"영화");t[1].map((t=>{new u.Article(r,t.link,t.image,t.title,t.director)}))})).then((()=>{this.render(),this.mount()})).catch((t=>console.log(t)))}}e.NewsPage=l},4560:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProfilePage=void 0;const r=n(7061),i=n(6231),o=n(1013),s=n(768),a=n(2244),u=n(1133);class c extends r.Page{constructor({router:t,datas:e}){super(t);const n=e[0][0],r=e[0][1],c=new i.ProfileContainer(null);new o.Background(c,n,r,t);const h=new s.Container(c);new u.Profile(h,n),new a.Button(h,n,r,t),this.render(),this.mount()}}e.ProfilePage=c},6945:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ProfileUpdatePage=void 0;const r=n(7061),i=n(8552),o=n(8415),s=n(2484),a=n(116),u=n(1078);class c extends r.Page{constructor({router:t,datas:e}){super(t);const n=new a.ProfileUpdateContainer(null);u.firestore.collection("users").doc(u.auth.currentUser.uid).onSnapshot((e=>{n.components=[];const r=e.data();new i.Background(n,r,t);const a=new o.Container(n);new s.Profile(a,r),this.render(),this.mount()}))}}e.ProfileUpdatePage=c},620:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.RoomPage=void 0;const r=n(7061),i=n(3488),o=n(1232),s=n(6331),a=n(5480),u=n(3879),c=n(1078);class h extends r.Page{constructor({router:t,datas:e}){super(t);var n=e[0][0],r=e[0][1],h=e[0][2];const l=new i.RoomContainer(null);new o.Header(l,n,r,t);const f=new s.Content(l,n.chats);new u.Input(l,n,r,h),c.firestore.collection("rooms").doc(n.id).collection("chats").onSnapshot((t=>{setTimeout((function(){console.log("Room Here"),c.firestore.collection("users").doc(r.uid).collection("rooms").doc(n.id).update({unreadMessage:0}).catch((t=>console.log(t.message)))}),2e3),f.components=[],t.docs.map((t=>{new a.Chat(f,t.data(),r,h)})),this.render(),this.mount()}))}}e.RoomPage=h},570:(t,e,n)=>{"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SignupPage=void 0;const r=n(7061),i=n(5e3),o=n(2935);class s extends r.Page{constructor({router:t,datas:e}){super(t);const n=new i.SignupContainer;new o.Signup(n,t),this.render(),this.mount()}}e.SignupPage=s},655:(t,e,n)=>{"use strict";n.d(e,{ZT:()=>i,pi:()=>o,mG:()=>s,Jh:()=>a,XA:()=>u,CR:()=>c,ev:()=>h});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))((function(i,o){function s(t){try{u(r.next(t))}catch(t){o(t)}}function a(t){try{u(r.throw(t))}catch(t){o(t)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(s,a)}u((r=r.apply(t,e||[])).next())}))}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(t){o=[6,t],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(t){i={error:t}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function h(t,e,n){if(n||2===arguments.length)for(var r,i=0,o=e.length;i<o;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))}Object.create,Object.create},2357:t=>{"use strict";t.exports=require("assert")},5747:t=>{"use strict";t.exports=require("fs")},8605:t=>{"use strict";t.exports=require("http")},7211:t=>{"use strict";t.exports=require("https")},1631:t=>{"use strict";t.exports=require("net")},2413:t=>{"use strict";t.exports=require("stream")},3867:t=>{"use strict";t.exports=require("tty")},8835:t=>{"use strict";t.exports=require("url")},1669:t=>{"use strict";t.exports=require("util")},8761:t=>{"use strict";t.exports=require("zlib")},776:t=>{"use strict";t.exports=JSON.parse('{"myprofile":{"nickname":"이한","profileImg":"./images/profile.jpg","profileMessage":"코asdddddddddddddddddddddddddddddddddddddddddd","background":"./images/background.jpg","email":"ihan128@naver.com","uid":"a1"},"friends":[{"nickname":"아린","profileImg":"https://pbs.twimg.com/media/DNUuq9TUIAAdEv-?format=jpg&name=4096x4096","profileMessage":"코딩 공부 열심히 하세요!","uid":"a2","background":"./images/background.jpg","email":"Arin@naver.com"},{"nickname":"성소","profileImg":"https://img1.daumcdn.net/thumb/R720x0.q80/?scode=mtistory2&fname=http%3A%2F%2Fcfile22.uf.tistory.com%2Fimage%2F996FD04C5D1A1294369A9D","profileMessage":"늘 응원하고 있어요!","uid":"a3","background":"./images/background.jpg","email":"chinaGone@naver.com"}],"chats":[{"id":"b1","uids":["a1, a2"],"title":"테스트 방ㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇㅇ","content":"화면을 테스트합시다!","time":"오후 7:06","unread":"3","friends":[{"name":"전효성","profileImg":"https://image.news1.kr/system/ap/2015/5/7/1349513/dims/optimize"},{"name":"예리","profileImg":"https://i.pinimg.com/originals/3d/c6/45/3dc645dbc13ac045843e499def4aa669.png"}]},{"id":"b2","uids":["a1","a3"],"title":"테스트 방2","content":"코딩공부 열심히 하자구요","time":"오후 2:06","unread":"","friends":[{"name":"아린","profileImg":"https://pbs.twimg.com/media/DNUuq9TUIAAdEv-?format=jpg&name=4096x4096"},{"name":"성소","profileImg":"https://img1.daumcdn.net/thumb/R720x0.q80/?scode=mtistory2&fname=http%3A%2F%2Fcfile22.uf.tistory.com%2Fimage%2F996FD04C5D1A1294369A9D"}]}],"room":[{"id":"b1","uids":["a1","a2"],"title":"테스트 방","friends":[{"name":"전효성","profileImg":"https://image.news1.kr/system/ap/2015/5/7/1349513/dims/optimize"},{"name":"예리","profileImg":"https://i.pinimg.com/originals/3d/c6/45/3dc645dbc13ac045843e499def4aa669.png"}],"chats":[{"name":"전효성","profileImg":"https://image.news1.kr/system/ap/2015/5/7/1349513/dims/optimize","chatting":"반가워 하니야^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^","time":"오전 10:00"},{"name":"예리","profileImg":"https://i.pinimg.com/originals/3d/c6/45/3dc645dbc13ac045843e499def4aa669.png","chatting":"네 반갑습니다","time":"오전 10:01"}]},{"id":"b2","uids":["a1","a3"],"title":"테스트 방2","friends":[{"name":"아린","profileImg":"https://pbs.twimg.com/media/DNUuq9TUIAAdEv-?format=jpg&name=4096x4096"},{"name":"성소","profileImg":"https://img1.daumcdn.net/thumb/R720x0.q80/?scode=mtistory2&fname=http%3A%2F%2Fcfile22.uf.tistory.com%2Fimage%2F996FD04C5D1A1294369A9D"}],"chats":[{"name":"아린","profileImg":"https://pbs.twimg.com/media/DNUuq9TUIAAdEv-?format=jpg&name=4096x4096","chatting":"GraphQL도 한번 넣어보자^^","time":"오전 10:00"},{"name":"성소","profileImg":"https://img1.daumcdn.net/thumb/R720x0.q80/?scode=mtistory2&fname=http%3A%2F%2Fcfile22.uf.tistory.com%2Fimage%2F996FD04C5D1A1294369A9D","chatting":"타입스크립트의 인터페이스도 사용해보구ㅎㅎ","time":"오전 10:01"}]}]}')},8593:t=>{"use strict";t.exports=JSON.parse('{"_from":"axios","_id":"axios@0.21.4","_inBundle":false,"_integrity":"sha512-ut5vewkiu8jjGBdqpM44XxjuCjq9LAKeHVmoVfHVzy8eHgxxq8SbAVQNovDA8mVi05kP0Ea/n/UzcSHcTJQfNg==","_location":"/axios","_phantomChildren":{},"_requested":{"type":"tag","registry":true,"raw":"axios","name":"axios","escapedName":"axios","rawSpec":"","saveSpec":null,"fetchSpec":"latest"},"_requiredBy":["#USER","/"],"_resolved":"https://registry.npmjs.org/axios/-/axios-0.21.4.tgz","_shasum":"c67b90dc0568e5c1cf2b0b858c43ba28e2eda575","_spec":"axios","_where":"D:\\\\프로젝트\\\\typeTalk","author":{"name":"Matt Zabriskie"},"browser":{"./lib/adapters/http.js":"./lib/adapters/xhr.js"},"bugs":{"url":"https://github.com/axios/axios/issues"},"bundleDependencies":false,"bundlesize":[{"path":"./dist/axios.min.js","threshold":"5kB"}],"dependencies":{"follow-redirects":"^1.14.0"},"deprecated":false,"description":"Promise based HTTP client for the browser and node.js","devDependencies":{"coveralls":"^3.0.0","es6-promise":"^4.2.4","grunt":"^1.3.0","grunt-banner":"^0.6.0","grunt-cli":"^1.2.0","grunt-contrib-clean":"^1.1.0","grunt-contrib-watch":"^1.0.0","grunt-eslint":"^23.0.0","grunt-karma":"^4.0.0","grunt-mocha-test":"^0.13.3","grunt-ts":"^6.0.0-beta.19","grunt-webpack":"^4.0.2","istanbul-instrumenter-loader":"^1.0.0","jasmine-core":"^2.4.1","karma":"^6.3.2","karma-chrome-launcher":"^3.1.0","karma-firefox-launcher":"^2.1.0","karma-jasmine":"^1.1.1","karma-jasmine-ajax":"^0.1.13","karma-safari-launcher":"^1.0.0","karma-sauce-launcher":"^4.3.6","karma-sinon":"^1.0.5","karma-sourcemap-loader":"^0.3.8","karma-webpack":"^4.0.2","load-grunt-tasks":"^3.5.2","minimist":"^1.2.0","mocha":"^8.2.1","sinon":"^4.5.0","terser-webpack-plugin":"^4.2.3","typescript":"^4.0.5","url-search-params":"^0.10.0","webpack":"^4.44.2","webpack-dev-server":"^3.11.0"},"homepage":"https://axios-http.com","jsdelivr":"dist/axios.min.js","keywords":["xhr","http","ajax","promise","node"],"license":"MIT","main":"index.js","name":"axios","repository":{"type":"git","url":"git+https://github.com/axios/axios.git"},"scripts":{"build":"NODE_ENV=production grunt build","coveralls":"cat coverage/lcov.info | ./node_modules/coveralls/bin/coveralls.js","examples":"node ./examples/server.js","fix":"eslint --fix lib/**/*.js","postversion":"git push && git push --tags","preversion":"npm test","start":"node ./sandbox/server.js","test":"grunt test","version":"npm run build && grunt version && git add -A dist && git add CHANGELOG.md bower.json package.json"},"typings":"./index.d.ts","unpkg":"dist/axios.min.js","version":"0.21.4"}')}},e={};function n(r){var i=e[r];if(void 0!==i)return i.exports;var o=e[r]={exports:{}};return t[r](o,o.exports,n),o.exports}n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},(()=>{"use strict";const t=n(1567),e=n(4696),r=n(8071),i=n(620),o=n(4560),s=n(1284),a=n(1078),u=n(570),c=n(1078),h=n(110),l=n(6945),f=n(4109),d=n(5442),p=n(6053);a.auth.onAuthStateChanged((async n=>{if(n)console.log("로그인 중"),await c.firestore.collection("users").doc(n.uid).get().then((n=>{if(n.exists){const n=[{page:e.MainPage,path:"/"},{page:r.ChatPage,path:"/chat"},{page:i.RoomPage,path:"/room"},{page:o.ProfilePage,path:"/profile"},{page:h.MorePage,path:"/more"},{page:l.ProfileUpdatePage,path:"/update"},{page:f.NewsPage,path:"/news"},{page:d.CancleFriendPage,path:"/canclefriend"},{page:p.CancleChatPage,path:"/canclechat"}];new t.Router({pages:n}).push(n[0].path)}}));else{console.log("로그아웃 중");const e=[{page:s.LoginPage,path:"/login"},{page:u.SignupPage,path:"/signup"}];new t.Router({pages:e}).push(e[0].path)}}))})()})();